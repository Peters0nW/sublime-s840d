////////////////////////////////////////////////////
// PROC header tests
// Performance: 817.0ms
////////////////////////////////////////////////////

N100000 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N100010 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N100020 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N100030 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N100040 DEF STRING[2] _COMP
N100050 DEF STRING[32] _I_TENV
N100060 DEF STRING[128] _STR_PROT
N100070 IF ($AN_NCK_VERSION<990000)
N100080   GOTOF _AL11
N100090 ENDIF
N100100 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N100110   RET
N100120 ENDIF
N100130 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N100140 _MWBILD: _I_K=_I_K MOD 100
N100150 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N100160 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N100170 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N100180 GOTOF _FINMW_1
N100190 _PA2A: _OVR[20]=_OVR[20]/_I_K
N100200 _FINMW_1: RET
N100210 _FINMW_2: _I_CH_6=1
N100220 RET
N100230 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N100240 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N100250   RET
N100260 ENDIF
N100270 IF (_OVI[6]==0) GOTOF _MT1
N100280 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N100290 _MT1: _I_MA=_MA
N100300 IF (_OVI[2]==974) OR (_OVI[2]==994)
N100310   _I_MA=(_I_MA MOD 10)
N100320   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N100330     _I_MA=2
N100340   ENDIF
N100350 ENDIF
N100360 IF (_KNUM==0)
N100370   RET
N100380 ENDIF
N100390 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N100400   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N100410   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N100420 ELSE
N100430   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N100440 ENDIF
N100450 _OVI[0]=_T_7
N100460 IF (_DFLACH)
N100470   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N100480 ELSE
N100490   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N100500 ENDIF
N100510 _SD42950=$SC_TOOL_LENGTH_TYPE
N100520 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N100530   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N100540     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N100550       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N100560     ENDIF
N100570     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N100580       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N100590       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N100600         IF (_T_4==0)
N100610           _T_4=1
N100620         ELSE
N100630           _T_4=0
N100640         ENDIF
N100650       ENDIF
N100660     ENDIF
N100670   ENDIF
N100680   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N100690     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N100700       IF ($SC_TOOL_LENGTH_CONST_T==19)
N100710         _I_PROT=1
N100720         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N100730           IF (_T_3==3)
N100740             _T_3=1 _H_T_3=3
N100750           ELSE
N100760             IF (_T_3==1)
N100770               _T_3=3 _H_T_3=1
N100780             ELSE
N100790               _T_3=2 _H_T_3=2
N100800             ENDIF
N100810           ENDIF
N100820         ENDIF
N100830         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N100840           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N100850         ENDIF
N100860         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N100870           _T_6=0 _T_3=1 _H_T_3=3
N100880         ENDIF
N100890         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N100900           IF (_T_4==0)
N100910             _T_4=1
N100920           ELSE
N100930             _T_4=0
N100940           ENDIF
N100950         ENDIF
N100960       ENDIF
N100970     ENDIF
N100980   ENDIF
N100990 ENDIF
N101000 IF (_T_2>1)
N101010   IF (_TENV=="")
N101020     GOTOF _AL21
N101030   ENDIF
N101040   _I_TENV=_TENV
N101050   IF (_DFLACH)
N101060     _TCOR=0
N101070   ENDIF
N101080   IF (_TCOR<0)
N101090     GOTOF _AL5
N101100   ENDIF
N101110   IF (_TCOR==0)
N101120     _RETW=GETTENV(_I_TENV,_TDDL)
N101130     _TOUT=_TDDL[0]
N101140     IF (_DFLACH) AND (_T_7==0)
N101150       _TOUT=_TDDL[1]
N101160     ENDIF
N101170   ENDIF
N101180 ELSE
N101190   IF (_TCOR<=0)
N101200     GOTOF _AL5
N101210   ENDIF
N101220   IF (_T_7==0)
N101230     GOTOF _AL8
N101240   ENDIF
N101250   _I_TENV=""
N101260 ENDIF
N101270 IF (_T_3==0)
N101280   IF (_T_6<2)
N101290     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N101300     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N101310     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N101320       IF (NOT(_I_PROT))
N101330         _H_T_3=_I_MA
N101340         IF (_I_MA==1)
N101350           _H_T_3=2
N101360         ELSE
N101370           IF (_I_MA==2)
N101380             _H_T_3=1
N101390           ENDIF
N101400         ENDIF
N101410       ELSE
N101420         IF (_I_MA==3)
N101430           _H_T_3=2 _GEOAX=1
N101440         ENDIF
N101450       ENDIF
N101460       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N101470     ENDIF
N101480   ELSE
N101490     IF (_T_6==2)
N101500       _CORCOMP=6
N101510       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N101520     ENDIF
N101530     _H_T_3=_I_MA
N101540   ENDIF
N101550 ELSE
N101560   IF (_T_3==4)
N101570     _CORCOMP=6
N101580     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N101590   ELSE
N101600     IF (_T_2<2)
N101610       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N101620         IF (_H_T_3<>1)
N101630           IF (_H_T_3==2)
N101640             _H_T_3=1
N101650           ELSE
N101660             _H_T_3=0
N101670           ENDIF
N101680         ELSE
N101690           _H_T_3=2
N101700         ENDIF
N101710         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N101720         IF (_HI_GG<0)
N101730           IF (_H_T_3==0)
N101740             _H_T_3=1
N101750           ELSE
N101760             IF (_H_T_3==1)
N101770               _H_T_3=0
N101780             ENDIF
N101790           ENDIF
N101800         ENDIF
N101810         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N101820         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N101830         _H_T_3=_T_3
N101840       ENDIF
N101850       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N101860         IF (NOT(_I_PROT))
N101870           IF (_H_T_3<>1)
N101880             IF (_H_T_3==2)
N101890               _H_T_3=0
N101900             ELSE
N101910               _H_T_3=2
N101920             ENDIF
N101930           ENDIF
N101940           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N101950           IF (_HI_GG<0)
N101960             IF (_H_T_3==0)
N101970               _H_T_3=1
N101980             ELSE
N101990               IF (_H_T_3==1)
N102000                 _H_T_3=0
N102010               ENDIF
N102020             ENDIF
N102030           ENDIF
N102040           _GEOAX=_H_T_3
N102050         ELSE
N102060           _GEOAX=_T_3-1
N102070         ENDIF
N102080         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N102090         IF (NOT(_I_PROT))
N102100           _H_T_3=_T_3
N102110         ENDIF
N102120         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N102130       ENDIF
N102140     ELSE
N102150       _GEOAX=0 _CORCOMP=_T_3+2
N102160     ENDIF
N102170   ENDIF
N102180 ENDIF
N102190 IF ((_T_2==0) OR (_T_2==2))
N102200   IF (_I_CH_6==0)
N102210     _COMP="W" _CORMODE=1 _I_PROT=9
N102220   ELSE
N102230     _COMP="GW" _CORMODE=3 _I_PROT=0
N102240   ENDIF
N102250   IF (_DFLACH)
N102260     IF (_CORCOMP==0)
N102270       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N102280       EXECSTRING(_STR_PROT)
N102290       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N102300       IF (_H_T_3==3)
N102310         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N102320       ELSE
N102330         IF (_H_T_3==2)
N102340           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N102350         ELSE
N102360           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N102370         ENDIF
N102380       ENDIF
N102390     ELSE
N102400       IF (_CORCOMP==6)
N102410         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N102420         EXECSTRING(_STR_PROT)
N102430         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N102440       ENDIF
N102450     ENDIF
N102460   ELSE
N102470     IF (_CORCOMP==0)
N102480       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N102490       EXECSTRING(_STR_PROT)
N102500       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N102510       IF (_H_T_3==3)
N102520         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N102530       ELSE
N102540         IF (_H_T_3==2)
N102550           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N102560         ELSE
N102570           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N102580         ENDIF
N102590       ENDIF
N102600     ELSE
N102610       IF (_CORCOMP==6)
N102620         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N102630         EXECSTRING(_STR_PROT)
N102640         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N102650       ENDIF
N102660     ENDIF
N102670   ENDIF
N102680 ELSE
N102690   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N102700     GOTOF _AL22
N102710   ENDIF
N102720   IF (_DLNUM<0)
N102730     GOTOF _AL22
N102740   ELSE
N102750     IF ((_DLNUM==0) AND (_T_2<2))
N102760       GOTOF _AL22
N102770     ENDIF
N102780   ENDIF
N102790   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N102800     GOTOF _AL24
N102810   ENDIF
N102820   _OVI[13]=_DLNUM
N102830   IF (_I_CH_8==1)
N102840     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N102850       GOTOF _AL25
N102860     ENDIF
N102870     _COMP="E" _CORMODE=1
N102880   ELSE
N102890     IF (_I_CH_6==0)
N102900       _COMP="S" _CORMODE=1
N102910     ELSE
N102920       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N102930         GOTOF _AL25
N102940       ENDIF
N102950       _COMP="ES" _CORMODE=3
N102960     ENDIF
N102970   ENDIF
N102980   IF (_DFLACH)
N102990     IF (_CORCOMP==0)
N103000       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N103010       EXECSTRING(_STR_PROT)
N103020       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N103030       IF (_H_T_3==3)
N103040         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N103050       ELSE
N103060         IF (_H_T_3==2)
N103070           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N103080         ELSE
N103090           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N103100         ENDIF
N103110       ENDIF
N103120     ELSE
N103130       IF (_CORCOMP==6)
N103140         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N103150         EXECSTRING(_STR_PROT)
N103160         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N103170       ENDIF
N103180     ENDIF
N103190   ELSE
N103200     IF (_CORCOMP==0)
N103210       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N103220       EXECSTRING(_STR_PROT)
N103230       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N103240       IF (_H_T_3==3)
N103250         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N103260       ELSE
N103270         IF (_H_T_3==2)
N103280           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N103290         ELSE
N103300           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N103310         ENDIF
N103320       ENDIF
N103330     ELSE
N103340       IF (_CORCOMP==6)
N103350         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N103360         EXECSTRING(_STR_PROT)
N103370         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N103380       ENDIF
N103390     ENDIF
N103400   ENDIF
N103410 ENDIF
N103420 _H_TC=$P_TC
N103430 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N103440   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N103450   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N103460   TCARR=0
N103470   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N103480     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N103490   ENDIF
N103500   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N103510     PAROTOF
N103520   ENDIF
N103530   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N103540 ENDIF
N103550 IF (_HI_GG) AND (_T_2<2)
N103560   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N103570   G[6]=_HI_GG
N103580 ENDIF
N103590 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N103600   IF (_T_4==1)
N103610     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N103620   ENDIF
N103630   _CORVAL[0]=_H_OVR20
N103640   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N103650     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N103660   ENDIF
N103670 ELSE
N103680   IF (_T_4==1)
N103690     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N103700   ENDIF
N103710   _CORVAL[0]=_H_OVR20
N103720 ENDIF
N103730 IF ((_DLNUM==0) AND (_T_2==3))
N103740   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N103750 ELSE
N103760   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N103770 ENDIF
N103780 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N103790   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N103800     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N103810   ENDIF
N103820 ENDIF
N103830 IF (_HR_GG AND (_T_2<2))
N103840   G[6]=_HR_GG
N103850 ENDIF
N103860 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N103870   $P_CYCFRAME=CTRANS()
N103880   _T_7=_T_5 MOD 1000
N103890   G[8]=_T_7
N103900   TCARR=_H_TC
N103910   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N103920     _T_7=_T_5 DIV 1000 MOD 100
N103930     G[52]=_T_7
N103940   ENDIF
N103950   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N103960     _T_7=_T_5 DIV 100000 MOD 100
N103970     G[53]=_T_7
N103980   ENDIF
N103990 ENDIF
N104000 IF (_OVI[12]<>0)
N104010   _OVI[11]=0
N104020   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N104030 ENDIF
N104040 _FIN: _OVI[11]=1
N104050 RET
N104060 _AL1: _OVI[9]=61318
N104070 SETAL(_OVI[9])
N104080 RET
N104090 _AL5: _OVI[9]=61320
N104100 SETAL(_OVI[9])
N104110 RET
N104120 _AL7: _OVI[9]=61319
N104130 SETAL(_OVI[9])
N104140 RET
N104150 _AL8: _OVI[9]=61328
N104160 SETAL(_OVI[9])
N104170 RET
N104180 _AL11: _OVI[9]=61342
N104190 SETAL(_OVI[9])
N104200 RET
N104210 _AL12: _OVI[9]=61345
N104220 SETAL(_OVI[9])
N104230 RET
N104240 _AL20: _OVI[9]=61404
N104250 SETAL(_OVI[9])
N104260 RET
N104270 _AL21: _OVI[9]=61405
N104280 SETAL(_OVI[9])
N104290 RET
N104300 _AL22: _OVI[9]=61406
N104310 SETAL(_OVI[9])
N104320 RET
N104330 _AL24: _OVI[9]=61408
N104340 SETAL(_OVI[9])
N104350 RET
N104360 _AL25: _OVI[9]=61409
N104370 SETAL(_OVI[9])
N104380 RET
N104390 _AL26: _OVI[9]=61410
N104400 SETAL(_OVI[9])
N104410 RET
N104420 _AL27: _ALARM=61016
N104430 RET
N104440 _AL28: _OVI[9]=61404
N104450 SETAL(_OVI[9])
N104460 RET
N104470 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N104480 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N104490 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N104500 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N104510 DEF STRING[2] _COMP
N104520 DEF STRING[32] _I_TENV
N104530 DEF STRING[128] _STR_PROT
N104540 IF ($AN_NCK_VERSION<990000)
N104550   GOTOF _AL11
N104560 ENDIF
N104570 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N104580   RET
N104590 ENDIF
N104600 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N104610 _MWBILD: _I_K=_I_K MOD 100
N104620 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N104630 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N104640 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N104650 GOTOF _FINMW_1
N104660 _PA2A: _OVR[20]=_OVR[20]/_I_K
N104670 _FINMW_1: RET
N104680 _FINMW_2: _I_CH_6=1
N104690 RET
N104700 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N104710 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N104720   RET
N104730 ENDIF
N104740 IF (_OVI[6]==0) GOTOF _MT1
N104750 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N104760 _MT1: _I_MA=_MA
N104770 IF (_OVI[2]==974) OR (_OVI[2]==994)
N104780   _I_MA=(_I_MA MOD 10)
N104790   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N104800     _I_MA=2
N104810   ENDIF
N104820 ENDIF
N104830 IF (_KNUM==0)
N104840   RET
N104850 ENDIF
N104860 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N104870   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N104880   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N104890 ELSE
N104900   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N104910 ENDIF
N104920 _OVI[0]=_T_7
N104930 IF (_DFLACH)
N104940   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N104950 ELSE
N104960   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N104970 ENDIF
N104980 _SD42950=$SC_TOOL_LENGTH_TYPE
N104990 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N105000   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N105010     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N105020       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N105030     ENDIF
N105040     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N105050       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N105060       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N105070         IF (_T_4==0)
N105080           _T_4=1
N105090         ELSE
N105100           _T_4=0
N105110         ENDIF
N105120       ENDIF
N105130     ENDIF
N105140   ENDIF
N105150   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N105160     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N105170       IF ($SC_TOOL_LENGTH_CONST_T==19)
N105180         _I_PROT=1
N105190         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N105200           IF (_T_3==3)
N105210             _T_3=1 _H_T_3=3
N105220           ELSE
N105230             IF (_T_3==1)
N105240               _T_3=3 _H_T_3=1
N105250             ELSE
N105260               _T_3=2 _H_T_3=2
N105270             ENDIF
N105280           ENDIF
N105290         ENDIF
N105300         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N105310           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N105320         ENDIF
N105330         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N105340           _T_6=0 _T_3=1 _H_T_3=3
N105350         ENDIF
N105360         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N105370           IF (_T_4==0)
N105380             _T_4=1
N105390           ELSE
N105400             _T_4=0
N105410           ENDIF
N105420         ENDIF
N105430       ENDIF
N105440     ENDIF
N105450   ENDIF
N105460 ENDIF
N105470 IF (_T_2>1)
N105480   IF (_TENV=="")
N105490     GOTOF _AL21
N105500   ENDIF
N105510   _I_TENV=_TENV
N105520   IF (_DFLACH)
N105530     _TCOR=0
N105540   ENDIF
N105550   IF (_TCOR<0)
N105560     GOTOF _AL5
N105570   ENDIF
N105580   IF (_TCOR==0)
N105590     _RETW=GETTENV(_I_TENV,_TDDL)
N105600     _TOUT=_TDDL[0]
N105610     IF (_DFLACH) AND (_T_7==0)
N105620       _TOUT=_TDDL[1]
N105630     ENDIF
N105640   ENDIF
N105650 ELSE
N105660   IF (_TCOR<=0)
N105670     GOTOF _AL5
N105680   ENDIF
N105690   IF (_T_7==0)
N105700     GOTOF _AL8
N105710   ENDIF
N105720   _I_TENV=""
N105730 ENDIF
N105740 IF (_T_3==0)
N105750   IF (_T_6<2)
N105760     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N105770     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N105780     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N105790       IF (NOT(_I_PROT))
N105800         _H_T_3=_I_MA
N105810         IF (_I_MA==1)
N105820           _H_T_3=2
N105830         ELSE
N105840           IF (_I_MA==2)
N105850             _H_T_3=1
N105860           ENDIF
N105870         ENDIF
N105880       ELSE
N105890         IF (_I_MA==3)
N105900           _H_T_3=2 _GEOAX=1
N105910         ENDIF
N105920       ENDIF
N105930       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N105940     ENDIF
N105950   ELSE
N105960     IF (_T_6==2)
N105970       _CORCOMP=6
N105980       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N105990     ENDIF
N106000     _H_T_3=_I_MA
N106010   ENDIF
N106020 ELSE
N106030   IF (_T_3==4)
N106040     _CORCOMP=6
N106050     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N106060   ELSE
N106070     IF (_T_2<2)
N106080       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N106090         IF (_H_T_3<>1)
N106100           IF (_H_T_3==2)
N106110             _H_T_3=1
N106120           ELSE
N106130             _H_T_3=0
N106140           ENDIF
N106150         ELSE
N106160           _H_T_3=2
N106170         ENDIF
N106180         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N106190         IF (_HI_GG<0)
N106200           IF (_H_T_3==0)
N106210             _H_T_3=1
N106220           ELSE
N106230             IF (_H_T_3==1)
N106240               _H_T_3=0
N106250             ENDIF
N106260           ENDIF
N106270         ENDIF
N106280         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N106290         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N106300         _H_T_3=_T_3
N106310       ENDIF
N106320       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N106330         IF (NOT(_I_PROT))
N106340           IF (_H_T_3<>1)
N106350             IF (_H_T_3==2)
N106360               _H_T_3=0
N106370             ELSE
N106380               _H_T_3=2
N106390             ENDIF
N106400           ENDIF
N106410           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N106420           IF (_HI_GG<0)
N106430             IF (_H_T_3==0)
N106440               _H_T_3=1
N106450             ELSE
N106460               IF (_H_T_3==1)
N106470                 _H_T_3=0
N106480               ENDIF
N106490             ENDIF
N106500           ENDIF
N106510           _GEOAX=_H_T_3
N106520         ELSE
N106530           _GEOAX=_T_3-1
N106540         ENDIF
N106550         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N106560         IF (NOT(_I_PROT))
N106570           _H_T_3=_T_3
N106580         ENDIF
N106590         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N106600       ENDIF
N106610     ELSE
N106620       _GEOAX=0 _CORCOMP=_T_3+2
N106630     ENDIF
N106640   ENDIF
N106650 ENDIF
N106660 IF ((_T_2==0) OR (_T_2==2))
N106670   IF (_I_CH_6==0)
N106680     _COMP="W" _CORMODE=1 _I_PROT=9
N106690   ELSE
N106700     _COMP="GW" _CORMODE=3 _I_PROT=0
N106710   ENDIF
N106720   IF (_DFLACH)
N106730     IF (_CORCOMP==0)
N106740       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N106750       EXECSTRING(_STR_PROT)
N106760       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N106770       IF (_H_T_3==3)
N106780         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N106790       ELSE
N106800         IF (_H_T_3==2)
N106810           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N106820         ELSE
N106830           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N106840         ENDIF
N106850       ENDIF
N106860     ELSE
N106870       IF (_CORCOMP==6)
N106880         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N106890         EXECSTRING(_STR_PROT)
N106900         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N106910       ENDIF
N106920     ENDIF
N106930   ELSE
N106940     IF (_CORCOMP==0)
N106950       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N106960       EXECSTRING(_STR_PROT)
N106970       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N106980       IF (_H_T_3==3)
N106990         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N107000       ELSE
N107010         IF (_H_T_3==2)
N107020           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N107030         ELSE
N107040           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N107050         ENDIF
N107060       ENDIF
N107070     ELSE
N107080       IF (_CORCOMP==6)
N107090         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N107100         EXECSTRING(_STR_PROT)
N107110         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N107120       ENDIF
N107130     ENDIF
N107140   ENDIF
N107150 ELSE
N107160   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N107170     GOTOF _AL22
N107180   ENDIF
N107190   IF (_DLNUM<0)
N107200     GOTOF _AL22
N107210   ELSE
N107220     IF ((_DLNUM==0) AND (_T_2<2))
N107230       GOTOF _AL22
N107240     ENDIF
N107250   ENDIF
N107260   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N107270     GOTOF _AL24
N107280   ENDIF
N107290   _OVI[13]=_DLNUM
N107300   IF (_I_CH_8==1)
N107310     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N107320       GOTOF _AL25
N107330     ENDIF
N107340     _COMP="E" _CORMODE=1
N107350   ELSE
N107360     IF (_I_CH_6==0)
N107370       _COMP="S" _CORMODE=1
N107380     ELSE
N107390       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N107400         GOTOF _AL25
N107410       ENDIF
N107420       _COMP="ES" _CORMODE=3
N107430     ENDIF
N107440   ENDIF
N107450   IF (_DFLACH)
N107460     IF (_CORCOMP==0)
N107470       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N107480       EXECSTRING(_STR_PROT)
N107490       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N107500       IF (_H_T_3==3)
N107510         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N107520       ELSE
N107530         IF (_H_T_3==2)
N107540           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N107550         ELSE
N107560           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N107570         ENDIF
N107580       ENDIF
N107590     ELSE
N107600       IF (_CORCOMP==6)
N107610         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N107620         EXECSTRING(_STR_PROT)
N107630         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N107640       ENDIF
N107650     ENDIF
N107660   ELSE
N107670     IF (_CORCOMP==0)
N107680       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N107690       EXECSTRING(_STR_PROT)
N107700       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N107710       IF (_H_T_3==3)
N107720         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N107730       ELSE
N107740         IF (_H_T_3==2)
N107750           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N107760         ELSE
N107770           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N107780         ENDIF
N107790       ENDIF
N107800     ELSE
N107810       IF (_CORCOMP==6)
N107820         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N107830         EXECSTRING(_STR_PROT)
N107840         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N107850       ENDIF
N107860     ENDIF
N107870   ENDIF
N107880 ENDIF
N107890 _H_TC=$P_TC
N107900 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N107910   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N107920   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N107930   TCARR=0
N107940   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N107950     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N107960   ENDIF
N107970   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N107980     PAROTOF
N107990   ENDIF
N108000   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N108010 ENDIF
N108020 IF (_HI_GG) AND (_T_2<2)
N108030   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N108040   G[6]=_HI_GG
N108050 ENDIF
N108060 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N108070   IF (_T_4==1)
N108080     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N108090   ENDIF
N108100   _CORVAL[0]=_H_OVR20
N108110   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N108120     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N108130   ENDIF
N108140 ELSE
N108150   IF (_T_4==1)
N108160     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N108170   ENDIF
N108180   _CORVAL[0]=_H_OVR20
N108190 ENDIF
N108200 IF ((_DLNUM==0) AND (_T_2==3))
N108210   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N108220 ELSE
N108230   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N108240 ENDIF
N108250 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N108260   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N108270     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N108280   ENDIF
N108290 ENDIF
N108300 IF (_HR_GG AND (_T_2<2))
N108310   G[6]=_HR_GG
N108320 ENDIF
N108330 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N108340   $P_CYCFRAME=CTRANS()
N108350   _T_7=_T_5 MOD 1000
N108360   G[8]=_T_7
N108370   TCARR=_H_TC
N108380   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N108390     _T_7=_T_5 DIV 1000 MOD 100
N108400     G[52]=_T_7
N108410   ENDIF
N108420   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N108430     _T_7=_T_5 DIV 100000 MOD 100
N108440     G[53]=_T_7
N108450   ENDIF
N108460 ENDIF
N108470 IF (_OVI[12]<>0)
N108480   _OVI[11]=0
N108490   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N108500 ENDIF
N108510 _FIN: _OVI[11]=1
N108520 RET
N108530 _AL1: _OVI[9]=61318
N108540 SETAL(_OVI[9])
N108550 RET
N108560 _AL5: _OVI[9]=61320
N108570 SETAL(_OVI[9])
N108580 RET
N108590 _AL7: _OVI[9]=61319
N108600 SETAL(_OVI[9])
N108610 RET
N108620 _AL8: _OVI[9]=61328
N108630 SETAL(_OVI[9])
N108640 RET
N108650 _AL11: _OVI[9]=61342
N108660 SETAL(_OVI[9])
N108670 RET
N108680 _AL12: _OVI[9]=61345
N108690 SETAL(_OVI[9])
N108700 RET
N108710 _AL20: _OVI[9]=61404
N108720 SETAL(_OVI[9])
N108730 RET
N108740 _AL21: _OVI[9]=61405
N108750 SETAL(_OVI[9])
N108760 RET
N108770 _AL22: _OVI[9]=61406
N108780 SETAL(_OVI[9])
N108790 RET
N108800 _AL24: _OVI[9]=61408
N108810 SETAL(_OVI[9])
N108820 RET
N108830 _AL25: _OVI[9]=61409
N108840 SETAL(_OVI[9])
N108850 RET
N108860 _AL26: _OVI[9]=61410
N108870 SETAL(_OVI[9])
N108880 RET
N108890 _AL27: _ALARM=61016
N108900 RET
N108910 _AL28: _OVI[9]=61404
N108920 SETAL(_OVI[9])
N108930 RET
N108940 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N108950 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N108960 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N108970 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N108980 DEF STRING[2] _COMP
N108990 DEF STRING[32] _I_TENV
N109000 DEF STRING[128] _STR_PROT
N109010 IF ($AN_NCK_VERSION<990000)
N109020   GOTOF _AL11
N109030 ENDIF
N109040 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N109050   RET
N109060 ENDIF
N109070 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N109080 _MWBILD: _I_K=_I_K MOD 100
N109090 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N109100 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N109110 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N109120 GOTOF _FINMW_1
N109130 _PA2A: _OVR[20]=_OVR[20]/_I_K
N109140 _FINMW_1: RET
N109150 _FINMW_2: _I_CH_6=1
N109160 RET
N109170 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N109180 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N109190   RET
N109200 ENDIF
N109210 IF (_OVI[6]==0) GOTOF _MT1
N109220 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N109230 _MT1: _I_MA=_MA
N109240 IF (_OVI[2]==974) OR (_OVI[2]==994)
N109250   _I_MA=(_I_MA MOD 10)
N109260   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N109270     _I_MA=2
N109280   ENDIF
N109290 ENDIF
N109300 IF (_KNUM==0)
N109310   RET
N109320 ENDIF
N109330 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N109340   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N109350   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N109360 ELSE
N109370   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N109380 ENDIF
N109390 _OVI[0]=_T_7
N109400 IF (_DFLACH)
N109410   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N109420 ELSE
N109430   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N109440 ENDIF
N109450 _SD42950=$SC_TOOL_LENGTH_TYPE
N109460 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N109470   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N109480     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N109490       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N109500     ENDIF
N109510     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N109520       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N109530       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N109540         IF (_T_4==0)
N109550           _T_4=1
N109560         ELSE
N109570           _T_4=0
N109580         ENDIF
N109590       ENDIF
N109600     ENDIF
N109610   ENDIF
N109620   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N109630     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N109640       IF ($SC_TOOL_LENGTH_CONST_T==19)
N109650         _I_PROT=1
N109660         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N109670           IF (_T_3==3)
N109680             _T_3=1 _H_T_3=3
N109690           ELSE
N109700             IF (_T_3==1)
N109710               _T_3=3 _H_T_3=1
N109720             ELSE
N109730               _T_3=2 _H_T_3=2
N109740             ENDIF
N109750           ENDIF
N109760         ENDIF
N109770         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N109780           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N109790         ENDIF
N109800         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N109810           _T_6=0 _T_3=1 _H_T_3=3
N109820         ENDIF
N109830         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N109840           IF (_T_4==0)
N109850             _T_4=1
N109860           ELSE
N109870             _T_4=0
N109880           ENDIF
N109890         ENDIF
N109900       ENDIF
N109910     ENDIF
N109920   ENDIF
N109930 ENDIF
N109940 IF (_T_2>1)
N109950   IF (_TENV=="")
N109960     GOTOF _AL21
N109970   ENDIF
N109980   _I_TENV=_TENV
N109990   IF (_DFLACH)
N110000     _TCOR=0
N110010   ENDIF
N110020   IF (_TCOR<0)
N110030     GOTOF _AL5
N110040   ENDIF
N110050   IF (_TCOR==0)
N110060     _RETW=GETTENV(_I_TENV,_TDDL)
N110070     _TOUT=_TDDL[0]
N110080     IF (_DFLACH) AND (_T_7==0)
N110090       _TOUT=_TDDL[1]
N110100     ENDIF
N110110   ENDIF
N110120 ELSE
N110130   IF (_TCOR<=0)
N110140     GOTOF _AL5
N110150   ENDIF
N110160   IF (_T_7==0)
N110170     GOTOF _AL8
N110180   ENDIF
N110190   _I_TENV=""
N110200 ENDIF
N110210 IF (_T_3==0)
N110220   IF (_T_6<2)
N110230     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N110240     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N110250     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N110260       IF (NOT(_I_PROT))
N110270         _H_T_3=_I_MA
N110280         IF (_I_MA==1)
N110290           _H_T_3=2
N110300         ELSE
N110310           IF (_I_MA==2)
N110320             _H_T_3=1
N110330           ENDIF
N110340         ENDIF
N110350       ELSE
N110360         IF (_I_MA==3)
N110370           _H_T_3=2 _GEOAX=1
N110380         ENDIF
N110390       ENDIF
N110400       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N110410     ENDIF
N110420   ELSE
N110430     IF (_T_6==2)
N110440       _CORCOMP=6
N110450       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N110460     ENDIF
N110470     _H_T_3=_I_MA
N110480   ENDIF
N110490 ELSE
N110500   IF (_T_3==4)
N110510     _CORCOMP=6
N110520     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N110530   ELSE
N110540     IF (_T_2<2)
N110550       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N110560         IF (_H_T_3<>1)
N110570           IF (_H_T_3==2)
N110580             _H_T_3=1
N110590           ELSE
N110600             _H_T_3=0
N110610           ENDIF
N110620         ELSE
N110630           _H_T_3=2
N110640         ENDIF
N110650         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N110660         IF (_HI_GG<0)
N110670           IF (_H_T_3==0)
N110680             _H_T_3=1
N110690           ELSE
N110700             IF (_H_T_3==1)
N110710               _H_T_3=0
N110720             ENDIF
N110730           ENDIF
N110740         ENDIF
N110750         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N110760         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N110770         _H_T_3=_T_3
N110780       ENDIF
N110790       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N110800         IF (NOT(_I_PROT))
N110810           IF (_H_T_3<>1)
N110820             IF (_H_T_3==2)
N110830               _H_T_3=0
N110840             ELSE
N110850               _H_T_3=2
N110860             ENDIF
N110870           ENDIF
N110880           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N110890           IF (_HI_GG<0)
N110900             IF (_H_T_3==0)
N110910               _H_T_3=1
N110920             ELSE
N110930               IF (_H_T_3==1)
N110940                 _H_T_3=0
N110950               ENDIF
N110960             ENDIF
N110970           ENDIF
N110980           _GEOAX=_H_T_3
N110990         ELSE
N111000           _GEOAX=_T_3-1
N111010         ENDIF
N111020         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N111030         IF (NOT(_I_PROT))
N111040           _H_T_3=_T_3
N111050         ENDIF
N111060         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N111070       ENDIF
N111080     ELSE
N111090       _GEOAX=0 _CORCOMP=_T_3+2
N111100     ENDIF
N111110   ENDIF
N111120 ENDIF
N111130 IF ((_T_2==0) OR (_T_2==2))
N111140   IF (_I_CH_6==0)
N111150     _COMP="W" _CORMODE=1 _I_PROT=9
N111160   ELSE
N111170     _COMP="GW" _CORMODE=3 _I_PROT=0
N111180   ENDIF
N111190   IF (_DFLACH)
N111200     IF (_CORCOMP==0)
N111210       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N111220       EXECSTRING(_STR_PROT)
N111230       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N111240       IF (_H_T_3==3)
N111250         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N111260       ELSE
N111270         IF (_H_T_3==2)
N111280           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N111290         ELSE
N111300           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N111310         ENDIF
N111320       ENDIF
N111330     ELSE
N111340       IF (_CORCOMP==6)
N111350         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N111360         EXECSTRING(_STR_PROT)
N111370         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N111380       ENDIF
N111390     ENDIF
N111400   ELSE
N111410     IF (_CORCOMP==0)
N111420       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N111430       EXECSTRING(_STR_PROT)
N111440       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N111450       IF (_H_T_3==3)
N111460         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N111470       ELSE
N111480         IF (_H_T_3==2)
N111490           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N111500         ELSE
N111510           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N111520         ENDIF
N111530       ENDIF
N111540     ELSE
N111550       IF (_CORCOMP==6)
N111560         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N111570         EXECSTRING(_STR_PROT)
N111580         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N111590       ENDIF
N111600     ENDIF
N111610   ENDIF
N111620 ELSE
N111630   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N111640     GOTOF _AL22
N111650   ENDIF
N111660   IF (_DLNUM<0)
N111670     GOTOF _AL22
N111680   ELSE
N111690     IF ((_DLNUM==0) AND (_T_2<2))
N111700       GOTOF _AL22
N111710     ENDIF
N111720   ENDIF
N111730   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N111740     GOTOF _AL24
N111750   ENDIF
N111760   _OVI[13]=_DLNUM
N111770   IF (_I_CH_8==1)
N111780     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N111790       GOTOF _AL25
N111800     ENDIF
N111810     _COMP="E" _CORMODE=1
N111820   ELSE
N111830     IF (_I_CH_6==0)
N111840       _COMP="S" _CORMODE=1
N111850     ELSE
N111860       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N111870         GOTOF _AL25
N111880       ENDIF
N111890       _COMP="ES" _CORMODE=3
N111900     ENDIF
N111910   ENDIF
N111920   IF (_DFLACH)
N111930     IF (_CORCOMP==0)
N111940       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N111950       EXECSTRING(_STR_PROT)
N111960       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N111970       IF (_H_T_3==3)
N111980         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N111990       ELSE
N112000         IF (_H_T_3==2)
N112010           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N112020         ELSE
N112030           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N112040         ENDIF
N112050       ENDIF
N112060     ELSE
N112070       IF (_CORCOMP==6)
N112080         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N112090         EXECSTRING(_STR_PROT)
N112100         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N112110       ENDIF
N112120     ENDIF
N112130   ELSE
N112140     IF (_CORCOMP==0)
N112150       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N112160       EXECSTRING(_STR_PROT)
N112170       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N112180       IF (_H_T_3==3)
N112190         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N112200       ELSE
N112210         IF (_H_T_3==2)
N112220           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N112230         ELSE
N112240           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N112250         ENDIF
N112260       ENDIF
N112270     ELSE
N112280       IF (_CORCOMP==6)
N112290         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N112300         EXECSTRING(_STR_PROT)
N112310         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N112320       ENDIF
N112330     ENDIF
N112340   ENDIF
N112350 ENDIF
N112360 _H_TC=$P_TC
N112370 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N112380   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N112390   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N112400   TCARR=0
N112410   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N112420     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N112430   ENDIF
N112440   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N112450     PAROTOF
N112460   ENDIF
N112470   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N112480 ENDIF
N112490 IF (_HI_GG) AND (_T_2<2)
N112500   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N112510   G[6]=_HI_GG
N112520 ENDIF
N112530 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N112540   IF (_T_4==1)
N112550     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N112560   ENDIF
N112570   _CORVAL[0]=_H_OVR20
N112580   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N112590     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N112600   ENDIF
N112610 ELSE
N112620   IF (_T_4==1)
N112630     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N112640   ENDIF
N112650   _CORVAL[0]=_H_OVR20
N112660 ENDIF
N112670 IF ((_DLNUM==0) AND (_T_2==3))
N112680   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N112690 ELSE
N112700   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N112710 ENDIF
N112720 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N112730   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N112740     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N112750   ENDIF
N112760 ENDIF
N112770 IF (_HR_GG AND (_T_2<2))
N112780   G[6]=_HR_GG
N112790 ENDIF
N112800 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N112810   $P_CYCFRAME=CTRANS()
N112820   _T_7=_T_5 MOD 1000
N112830   G[8]=_T_7
N112840   TCARR=_H_TC
N112850   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N112860     _T_7=_T_5 DIV 1000 MOD 100
N112870     G[52]=_T_7
N112880   ENDIF
N112890   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N112900     _T_7=_T_5 DIV 100000 MOD 100
N112910     G[53]=_T_7
N112920   ENDIF
N112930 ENDIF
N112940 IF (_OVI[12]<>0)
N112950   _OVI[11]=0
N112960   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N112970 ENDIF
N112980 _FIN: _OVI[11]=1
N112990 RET
N113000 _AL1: _OVI[9]=61318
N113010 SETAL(_OVI[9])
N113020 RET
N113030 _AL5: _OVI[9]=61320
N113040 SETAL(_OVI[9])
N113050 RET
N113060 _AL7: _OVI[9]=61319
N113070 SETAL(_OVI[9])
N113080 RET
N113090 _AL8: _OVI[9]=61328
N113100 SETAL(_OVI[9])
N113110 RET
N113120 _AL11: _OVI[9]=61342
N113130 SETAL(_OVI[9])
N113140 RET
N113150 _AL12: _OVI[9]=61345
N113160 SETAL(_OVI[9])
N113170 RET
N113180 _AL20: _OVI[9]=61404
N113190 SETAL(_OVI[9])
N113200 RET
N113210 _AL21: _OVI[9]=61405
N113220 SETAL(_OVI[9])
N113230 RET
N113240 _AL22: _OVI[9]=61406
N113250 SETAL(_OVI[9])
N113260 RET
N113270 _AL24: _OVI[9]=61408
N113280 SETAL(_OVI[9])
N113290 RET
N113300 _AL25: _OVI[9]=61409
N113310 SETAL(_OVI[9])
N113320 RET
N113330 _AL26: _OVI[9]=61410
N113340 SETAL(_OVI[9])
N113350 RET
N113360 _AL27: _ALARM=61016
N113370 RET
N113380 _AL28: _OVI[9]=61404
N113390 SETAL(_OVI[9])
N113400 RET
N113410 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N113420 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N113430 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N113440 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N113450 DEF STRING[2] _COMP
N113460 DEF STRING[32] _I_TENV
N113470 DEF STRING[128] _STR_PROT
N113480 IF ($AN_NCK_VERSION<990000)
N113490   GOTOF _AL11
N113500 ENDIF
N113510 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N113520   RET
N113530 ENDIF
N113540 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N113550 _MWBILD: _I_K=_I_K MOD 100
N113560 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N113570 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N113580 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N113590 GOTOF _FINMW_1
N113600 _PA2A: _OVR[20]=_OVR[20]/_I_K
N113610 _FINMW_1: RET
N113620 _FINMW_2: _I_CH_6=1
N113630 RET
N113640 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N113650 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N113660   RET
N113670 ENDIF
N113680 IF (_OVI[6]==0) GOTOF _MT1
N113690 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N113700 _MT1: _I_MA=_MA
N113710 IF (_OVI[2]==974) OR (_OVI[2]==994)
N113720   _I_MA=(_I_MA MOD 10)
N113730   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N113740     _I_MA=2
N113750   ENDIF
N113760 ENDIF
N113770 IF (_KNUM==0)
N113780   RET
N113790 ENDIF
N113800 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N113810   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N113820   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N113830 ELSE
N113840   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N113850 ENDIF
N113860 _OVI[0]=_T_7
N113870 IF (_DFLACH)
N113880   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N113890 ELSE
N113900   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N113910 ENDIF
N113920 _SD42950=$SC_TOOL_LENGTH_TYPE
N113930 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N113940   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N113950     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N113960       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N113970     ENDIF
N113980     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N113990       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N114000       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N114010         IF (_T_4==0)
N114020           _T_4=1
N114030         ELSE
N114040           _T_4=0
N114050         ENDIF
N114060       ENDIF
N114070     ENDIF
N114080   ENDIF
N114090   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N114100     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N114110       IF ($SC_TOOL_LENGTH_CONST_T==19)
N114120         _I_PROT=1
N114130         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N114140           IF (_T_3==3)
N114150             _T_3=1 _H_T_3=3
N114160           ELSE
N114170             IF (_T_3==1)
N114180               _T_3=3 _H_T_3=1
N114190             ELSE
N114200               _T_3=2 _H_T_3=2
N114210             ENDIF
N114220           ENDIF
N114230         ENDIF
N114240         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N114250           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N114260         ENDIF
N114270         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N114280           _T_6=0 _T_3=1 _H_T_3=3
N114290         ENDIF
N114300         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N114310           IF (_T_4==0)
N114320             _T_4=1
N114330           ELSE
N114340             _T_4=0
N114350           ENDIF
N114360         ENDIF
N114370       ENDIF
N114380     ENDIF
N114390   ENDIF
N114400 ENDIF
N114410 IF (_T_2>1)
N114420   IF (_TENV=="")
N114430     GOTOF _AL21
N114440   ENDIF
N114450   _I_TENV=_TENV
N114460   IF (_DFLACH)
N114470     _TCOR=0
N114480   ENDIF
N114490   IF (_TCOR<0)
N114500     GOTOF _AL5
N114510   ENDIF
N114520   IF (_TCOR==0)
N114530     _RETW=GETTENV(_I_TENV,_TDDL)
N114540     _TOUT=_TDDL[0]
N114550     IF (_DFLACH) AND (_T_7==0)
N114560       _TOUT=_TDDL[1]
N114570     ENDIF
N114580   ENDIF
N114590 ELSE
N114600   IF (_TCOR<=0)
N114610     GOTOF _AL5
N114620   ENDIF
N114630   IF (_T_7==0)
N114640     GOTOF _AL8
N114650   ENDIF
N114660   _I_TENV=""
N114670 ENDIF
N114680 IF (_T_3==0)
N114690   IF (_T_6<2)
N114700     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N114710     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N114720     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N114730       IF (NOT(_I_PROT))
N114740         _H_T_3=_I_MA
N114750         IF (_I_MA==1)
N114760           _H_T_3=2
N114770         ELSE
N114780           IF (_I_MA==2)
N114790             _H_T_3=1
N114800           ENDIF
N114810         ENDIF
N114820       ELSE
N114830         IF (_I_MA==3)
N114840           _H_T_3=2 _GEOAX=1
N114850         ENDIF
N114860       ENDIF
N114870       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N114880     ENDIF
N114890   ELSE
N114900     IF (_T_6==2)
N114910       _CORCOMP=6
N114920       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N114930     ENDIF
N114940     _H_T_3=_I_MA
N114950   ENDIF
N114960 ELSE
N114970   IF (_T_3==4)
N114980     _CORCOMP=6
N114990     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N115000   ELSE
N115010     IF (_T_2<2)
N115020       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N115030         IF (_H_T_3<>1)
N115040           IF (_H_T_3==2)
N115050             _H_T_3=1
N115060           ELSE
N115070             _H_T_3=0
N115080           ENDIF
N115090         ELSE
N115100           _H_T_3=2
N115110         ENDIF
N115120         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N115130         IF (_HI_GG<0)
N115140           IF (_H_T_3==0)
N115150             _H_T_3=1
N115160           ELSE
N115170             IF (_H_T_3==1)
N115180               _H_T_3=0
N115190             ENDIF
N115200           ENDIF
N115210         ENDIF
N115220         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N115230         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N115240         _H_T_3=_T_3
N115250       ENDIF
N115260       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N115270         IF (NOT(_I_PROT))
N115280           IF (_H_T_3<>1)
N115290             IF (_H_T_3==2)
N115300               _H_T_3=0
N115310             ELSE
N115320               _H_T_3=2
N115330             ENDIF
N115340           ENDIF
N115350           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N115360           IF (_HI_GG<0)
N115370             IF (_H_T_3==0)
N115380               _H_T_3=1
N115390             ELSE
N115400               IF (_H_T_3==1)
N115410                 _H_T_3=0
N115420               ENDIF
N115430             ENDIF
N115440           ENDIF
N115450           _GEOAX=_H_T_3
N115460         ELSE
N115470           _GEOAX=_T_3-1
N115480         ENDIF
N115490         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N115500         IF (NOT(_I_PROT))
N115510           _H_T_3=_T_3
N115520         ENDIF
N115530         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N115540       ENDIF
N115550     ELSE
N115560       _GEOAX=0 _CORCOMP=_T_3+2
N115570     ENDIF
N115580   ENDIF
N115590 ENDIF
N115600 IF ((_T_2==0) OR (_T_2==2))
N115610   IF (_I_CH_6==0)
N115620     _COMP="W" _CORMODE=1 _I_PROT=9
N115630   ELSE
N115640     _COMP="GW" _CORMODE=3 _I_PROT=0
N115650   ENDIF
N115660   IF (_DFLACH)
N115670     IF (_CORCOMP==0)
N115680       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N115690       EXECSTRING(_STR_PROT)
N115700       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N115710       IF (_H_T_3==3)
N115720         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N115730       ELSE
N115740         IF (_H_T_3==2)
N115750           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N115760         ELSE
N115770           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N115780         ENDIF
N115790       ENDIF
N115800     ELSE
N115810       IF (_CORCOMP==6)
N115820         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N115830         EXECSTRING(_STR_PROT)
N115840         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N115850       ENDIF
N115860     ENDIF
N115870   ELSE
N115880     IF (_CORCOMP==0)
N115890       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N115900       EXECSTRING(_STR_PROT)
N115910       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N115920       IF (_H_T_3==3)
N115930         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N115940       ELSE
N115950         IF (_H_T_3==2)
N115960           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N115970         ELSE
N115980           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N115990         ENDIF
N116000       ENDIF
N116010     ELSE
N116020       IF (_CORCOMP==6)
N116030         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N116040         EXECSTRING(_STR_PROT)
N116050         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N116060       ENDIF
N116070     ENDIF
N116080   ENDIF
N116090 ELSE
N116100   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N116110     GOTOF _AL22
N116120   ENDIF
N116130   IF (_DLNUM<0)
N116140     GOTOF _AL22
N116150   ELSE
N116160     IF ((_DLNUM==0) AND (_T_2<2))
N116170       GOTOF _AL22
N116180     ENDIF
N116190   ENDIF
N116200   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N116210     GOTOF _AL24
N116220   ENDIF
N116230   _OVI[13]=_DLNUM
N116240   IF (_I_CH_8==1)
N116250     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N116260       GOTOF _AL25
N116270     ENDIF
N116280     _COMP="E" _CORMODE=1
N116290   ELSE
N116300     IF (_I_CH_6==0)
N116310       _COMP="S" _CORMODE=1
N116320     ELSE
N116330       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N116340         GOTOF _AL25
N116350       ENDIF
N116360       _COMP="ES" _CORMODE=3
N116370     ENDIF
N116380   ENDIF
N116390   IF (_DFLACH)
N116400     IF (_CORCOMP==0)
N116410       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N116420       EXECSTRING(_STR_PROT)
N116430       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N116440       IF (_H_T_3==3)
N116450         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N116460       ELSE
N116470         IF (_H_T_3==2)
N116480           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N116490         ELSE
N116500           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N116510         ENDIF
N116520       ENDIF
N116530     ELSE
N116540       IF (_CORCOMP==6)
N116550         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N116560         EXECSTRING(_STR_PROT)
N116570         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N116580       ENDIF
N116590     ENDIF
N116600   ELSE
N116610     IF (_CORCOMP==0)
N116620       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N116630       EXECSTRING(_STR_PROT)
N116640       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N116650       IF (_H_T_3==3)
N116660         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N116670       ELSE
N116680         IF (_H_T_3==2)
N116690           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N116700         ELSE
N116710           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N116720         ENDIF
N116730       ENDIF
N116740     ELSE
N116750       IF (_CORCOMP==6)
N116760         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N116770         EXECSTRING(_STR_PROT)
N116780         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N116790       ENDIF
N116800     ENDIF
N116810   ENDIF
N116820 ENDIF
N116830 _H_TC=$P_TC
N116840 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N116850   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N116860   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N116870   TCARR=0
N116880   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N116890     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N116900   ENDIF
N116910   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N116920     PAROTOF
N116930   ENDIF
N116940   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N116950 ENDIF
N116960 IF (_HI_GG) AND (_T_2<2)
N116970   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N116980   G[6]=_HI_GG
N116990 ENDIF
N117000 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N117010   IF (_T_4==1)
N117020     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N117030   ENDIF
N117040   _CORVAL[0]=_H_OVR20
N117050   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N117060     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N117070   ENDIF
N117080 ELSE
N117090   IF (_T_4==1)
N117100     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N117110   ENDIF
N117120   _CORVAL[0]=_H_OVR20
N117130 ENDIF
N117140 IF ((_DLNUM==0) AND (_T_2==3))
N117150   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N117160 ELSE
N117170   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N117180 ENDIF
N117190 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N117200   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N117210     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N117220   ENDIF
N117230 ENDIF
N117240 IF (_HR_GG AND (_T_2<2))
N117250   G[6]=_HR_GG
N117260 ENDIF
N117270 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N117280   $P_CYCFRAME=CTRANS()
N117290   _T_7=_T_5 MOD 1000
N117300   G[8]=_T_7
N117310   TCARR=_H_TC
N117320   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N117330     _T_7=_T_5 DIV 1000 MOD 100
N117340     G[52]=_T_7
N117350   ENDIF
N117360   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N117370     _T_7=_T_5 DIV 100000 MOD 100
N117380     G[53]=_T_7
N117390   ENDIF
N117400 ENDIF
N117410 IF (_OVI[12]<>0)
N117420   _OVI[11]=0
N117430   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N117440 ENDIF
N117450 _FIN: _OVI[11]=1
N117460 RET
N117470 _AL1: _OVI[9]=61318
N117480 SETAL(_OVI[9])
N117490 RET
N117500 _AL5: _OVI[9]=61320
N117510 SETAL(_OVI[9])
N117520 RET
N117530 _AL7: _OVI[9]=61319
N117540 SETAL(_OVI[9])
N117550 RET
N117560 _AL8: _OVI[9]=61328
N117570 SETAL(_OVI[9])
N117580 RET
N117590 _AL11: _OVI[9]=61342
N117600 SETAL(_OVI[9])
N117610 RET
N117620 _AL12: _OVI[9]=61345
N117630 SETAL(_OVI[9])
N117640 RET
N117650 _AL20: _OVI[9]=61404
N117660 SETAL(_OVI[9])
N117670 RET
N117680 _AL21: _OVI[9]=61405
N117690 SETAL(_OVI[9])
N117700 RET
N117710 _AL22: _OVI[9]=61406
N117720 SETAL(_OVI[9])
N117730 RET
N117740 _AL24: _OVI[9]=61408
N117750 SETAL(_OVI[9])
N117760 RET
N117770 _AL25: _OVI[9]=61409
N117780 SETAL(_OVI[9])
N117790 RET
N117800 _AL26: _OVI[9]=61410
N117810 SETAL(_OVI[9])
N117820 RET
N117830 _AL27: _ALARM=61016
N117840 RET
N117850 _AL28: _OVI[9]=61404
N117860 SETAL(_OVI[9])
N117870 RET
N117880 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N117890 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N117900 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N117910 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N117920 DEF STRING[2] _COMP
N117930 DEF STRING[32] _I_TENV
N117940 DEF STRING[128] _STR_PROT
N117950 IF ($AN_NCK_VERSION<990000)
N117960   GOTOF _AL11
N117970 ENDIF
N117980 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N117990   RET
N118000 ENDIF
N118010 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N118020 _MWBILD: _I_K=_I_K MOD 100
N118030 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N118040 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N118050 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N118060 GOTOF _FINMW_1
N118070 _PA2A: _OVR[20]=_OVR[20]/_I_K
N118080 _FINMW_1: RET
N118090 _FINMW_2: _I_CH_6=1
N118100 RET
N118110 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N118120 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N118130   RET
N118140 ENDIF
N118150 IF (_OVI[6]==0) GOTOF _MT1
N118160 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N118170 _MT1: _I_MA=_MA
N118180 IF (_OVI[2]==974) OR (_OVI[2]==994)
N118190   _I_MA=(_I_MA MOD 10)
N118200   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N118210     _I_MA=2
N118220   ENDIF
N118230 ENDIF
N118240 IF (_KNUM==0)
N118250   RET
N118260 ENDIF
N118270 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N118280   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N118290   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N118300 ELSE
N118310   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N118320 ENDIF
N118330 _OVI[0]=_T_7
N118340 IF (_DFLACH)
N118350   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N118360 ELSE
N118370   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N118380 ENDIF
N118390 _SD42950=$SC_TOOL_LENGTH_TYPE
N118400 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N118410   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N118420     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N118430       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N118440     ENDIF
N118450     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N118460       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N118470       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N118480         IF (_T_4==0)
N118490           _T_4=1
N118500         ELSE
N118510           _T_4=0
N118520         ENDIF
N118530       ENDIF
N118540     ENDIF
N118550   ENDIF
N118560   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N118570     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N118580       IF ($SC_TOOL_LENGTH_CONST_T==19)
N118590         _I_PROT=1
N118600         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N118610           IF (_T_3==3)
N118620             _T_3=1 _H_T_3=3
N118630           ELSE
N118640             IF (_T_3==1)
N118650               _T_3=3 _H_T_3=1
N118660             ELSE
N118670               _T_3=2 _H_T_3=2
N118680             ENDIF
N118690           ENDIF
N118700         ENDIF
N118710         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N118720           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N118730         ENDIF
N118740         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N118750           _T_6=0 _T_3=1 _H_T_3=3
N118760         ENDIF
N118770         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N118780           IF (_T_4==0)
N118790             _T_4=1
N118800           ELSE
N118810             _T_4=0
N118820           ENDIF
N118830         ENDIF
N118840       ENDIF
N118850     ENDIF
N118860   ENDIF
N118870 ENDIF
N118880 IF (_T_2>1)
N118890   IF (_TENV=="")
N118900     GOTOF _AL21
N118910   ENDIF
N118920   _I_TENV=_TENV
N118930   IF (_DFLACH)
N118940     _TCOR=0
N118950   ENDIF
N118960   IF (_TCOR<0)
N118970     GOTOF _AL5
N118980   ENDIF
N118990   IF (_TCOR==0)
N119000     _RETW=GETTENV(_I_TENV,_TDDL)
N119010     _TOUT=_TDDL[0]
N119020     IF (_DFLACH) AND (_T_7==0)
N119030       _TOUT=_TDDL[1]
N119040     ENDIF
N119050   ENDIF
N119060 ELSE
N119070   IF (_TCOR<=0)
N119080     GOTOF _AL5
N119090   ENDIF
N119100   IF (_T_7==0)
N119110     GOTOF _AL8
N119120   ENDIF
N119130   _I_TENV=""
N119140 ENDIF
N119150 IF (_T_3==0)
N119160   IF (_T_6<2)
N119170     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N119180     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N119190     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N119200       IF (NOT(_I_PROT))
N119210         _H_T_3=_I_MA
N119220         IF (_I_MA==1)
N119230           _H_T_3=2
N119240         ELSE
N119250           IF (_I_MA==2)
N119260             _H_T_3=1
N119270           ENDIF
N119280         ENDIF
N119290       ELSE
N119300         IF (_I_MA==3)
N119310           _H_T_3=2 _GEOAX=1
N119320         ENDIF
N119330       ENDIF
N119340       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N119350     ENDIF
N119360   ELSE
N119370     IF (_T_6==2)
N119380       _CORCOMP=6
N119390       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N119400     ENDIF
N119410     _H_T_3=_I_MA
N119420   ENDIF
N119430 ELSE
N119440   IF (_T_3==4)
N119450     _CORCOMP=6
N119460     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N119470   ELSE
N119480     IF (_T_2<2)
N119490       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N119500         IF (_H_T_3<>1)
N119510           IF (_H_T_3==2)
N119520             _H_T_3=1
N119530           ELSE
N119540             _H_T_3=0
N119550           ENDIF
N119560         ELSE
N119570           _H_T_3=2
N119580         ENDIF
N119590         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N119600         IF (_HI_GG<0)
N119610           IF (_H_T_3==0)
N119620             _H_T_3=1
N119630           ELSE
N119640             IF (_H_T_3==1)
N119650               _H_T_3=0
N119660             ENDIF
N119670           ENDIF
N119680         ENDIF
N119690         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N119700         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N119710         _H_T_3=_T_3
N119720       ENDIF
N119730       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N119740         IF (NOT(_I_PROT))
N119750           IF (_H_T_3<>1)
N119760             IF (_H_T_3==2)
N119770               _H_T_3=0
N119780             ELSE
N119790               _H_T_3=2
N119800             ENDIF
N119810           ENDIF
N119820           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N119830           IF (_HI_GG<0)
N119840             IF (_H_T_3==0)
N119850               _H_T_3=1
N119860             ELSE
N119870               IF (_H_T_3==1)
N119880                 _H_T_3=0
N119890               ENDIF
N119900             ENDIF
N119910           ENDIF
N119920           _GEOAX=_H_T_3
N119930         ELSE
N119940           _GEOAX=_T_3-1
N119950         ENDIF
N119960         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N119970         IF (NOT(_I_PROT))
N119980           _H_T_3=_T_3
N119990         ENDIF
N120000         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N120010       ENDIF
N120020     ELSE
N120030       _GEOAX=0 _CORCOMP=_T_3+2
N120040     ENDIF
N120050   ENDIF
N120060 ENDIF
N120070 IF ((_T_2==0) OR (_T_2==2))
N120080   IF (_I_CH_6==0)
N120090     _COMP="W" _CORMODE=1 _I_PROT=9
N120100   ELSE
N120110     _COMP="GW" _CORMODE=3 _I_PROT=0
N120120   ENDIF
N120130   IF (_DFLACH)
N120140     IF (_CORCOMP==0)
N120150       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N120160       EXECSTRING(_STR_PROT)
N120170       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N120180       IF (_H_T_3==3)
N120190         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N120200       ELSE
N120210         IF (_H_T_3==2)
N120220           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N120230         ELSE
N120240           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N120250         ENDIF
N120260       ENDIF
N120270     ELSE
N120280       IF (_CORCOMP==6)
N120290         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N120300         EXECSTRING(_STR_PROT)
N120310         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N120320       ENDIF
N120330     ENDIF
N120340   ELSE
N120350     IF (_CORCOMP==0)
N120360       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N120370       EXECSTRING(_STR_PROT)
N120380       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N120390       IF (_H_T_3==3)
N120400         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N120410       ELSE
N120420         IF (_H_T_3==2)
N120430           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N120440         ELSE
N120450           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N120460         ENDIF
N120470       ENDIF
N120480     ELSE
N120490       IF (_CORCOMP==6)
N120500         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N120510         EXECSTRING(_STR_PROT)
N120520         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N120530       ENDIF
N120540     ENDIF
N120550   ENDIF
N120560 ELSE
N120570   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N120580     GOTOF _AL22
N120590   ENDIF
N120600   IF (_DLNUM<0)
N120610     GOTOF _AL22
N120620   ELSE
N120630     IF ((_DLNUM==0) AND (_T_2<2))
N120640       GOTOF _AL22
N120650     ENDIF
N120660   ENDIF
N120670   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N120680     GOTOF _AL24
N120690   ENDIF
N120700   _OVI[13]=_DLNUM
N120710   IF (_I_CH_8==1)
N120720     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N120730       GOTOF _AL25
N120740     ENDIF
N120750     _COMP="E" _CORMODE=1
N120760   ELSE
N120770     IF (_I_CH_6==0)
N120780       _COMP="S" _CORMODE=1
N120790     ELSE
N120800       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N120810         GOTOF _AL25
N120820       ENDIF
N120830       _COMP="ES" _CORMODE=3
N120840     ENDIF
N120850   ENDIF
N120860   IF (_DFLACH)
N120870     IF (_CORCOMP==0)
N120880       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N120890       EXECSTRING(_STR_PROT)
N120900       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N120910       IF (_H_T_3==3)
N120920         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N120930       ELSE
N120940         IF (_H_T_3==2)
N120950           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N120960         ELSE
N120970           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N120980         ENDIF
N120990       ENDIF
N121000     ELSE
N121010       IF (_CORCOMP==6)
N121020         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N121030         EXECSTRING(_STR_PROT)
N121040         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N121050       ENDIF
N121060     ENDIF
N121070   ELSE
N121080     IF (_CORCOMP==0)
N121090       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N121100       EXECSTRING(_STR_PROT)
N121110       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N121120       IF (_H_T_3==3)
N121130         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N121140       ELSE
N121150         IF (_H_T_3==2)
N121160           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N121170         ELSE
N121180           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N121190         ENDIF
N121200       ENDIF
N121210     ELSE
N121220       IF (_CORCOMP==6)
N121230         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N121240         EXECSTRING(_STR_PROT)
N121250         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N121260       ENDIF
N121270     ENDIF
N121280   ENDIF
N121290 ENDIF
N121300 _H_TC=$P_TC
N121310 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N121320   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N121330   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N121340   TCARR=0
N121350   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N121360     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N121370   ENDIF
N121380   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N121390     PAROTOF
N121400   ENDIF
N121410   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N121420 ENDIF
N121430 IF (_HI_GG) AND (_T_2<2)
N121440   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N121450   G[6]=_HI_GG
N121460 ENDIF
N121470 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N121480   IF (_T_4==1)
N121490     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N121500   ENDIF
N121510   _CORVAL[0]=_H_OVR20
N121520   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N121530     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N121540   ENDIF
N121550 ELSE
N121560   IF (_T_4==1)
N121570     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N121580   ENDIF
N121590   _CORVAL[0]=_H_OVR20
N121600 ENDIF
N121610 IF ((_DLNUM==0) AND (_T_2==3))
N121620   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N121630 ELSE
N121640   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N121650 ENDIF
N121660 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N121670   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N121680     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N121690   ENDIF
N121700 ENDIF
N121710 IF (_HR_GG AND (_T_2<2))
N121720   G[6]=_HR_GG
N121730 ENDIF
N121740 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N121750   $P_CYCFRAME=CTRANS()
N121760   _T_7=_T_5 MOD 1000
N121770   G[8]=_T_7
N121780   TCARR=_H_TC
N121790   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N121800     _T_7=_T_5 DIV 1000 MOD 100
N121810     G[52]=_T_7
N121820   ENDIF
N121830   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N121840     _T_7=_T_5 DIV 100000 MOD 100
N121850     G[53]=_T_7
N121860   ENDIF
N121870 ENDIF
N121880 IF (_OVI[12]<>0)
N121890   _OVI[11]=0
N121900   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N121910 ENDIF
N121920 _FIN: _OVI[11]=1
N121930 RET
N121940 _AL1: _OVI[9]=61318
N121950 SETAL(_OVI[9])
N121960 RET
N121970 _AL5: _OVI[9]=61320
N121980 SETAL(_OVI[9])
N121990 RET
N122000 _AL7: _OVI[9]=61319
N122010 SETAL(_OVI[9])
N122020 RET
N122030 _AL8: _OVI[9]=61328
N122040 SETAL(_OVI[9])
N122050 RET
N122060 _AL11: _OVI[9]=61342
N122070 SETAL(_OVI[9])
N122080 RET
N122090 _AL12: _OVI[9]=61345
N122100 SETAL(_OVI[9])
N122110 RET
N122120 _AL20: _OVI[9]=61404
N122130 SETAL(_OVI[9])
N122140 RET
N122150 _AL21: _OVI[9]=61405
N122160 SETAL(_OVI[9])
N122170 RET
N122180 _AL22: _OVI[9]=61406
N122190 SETAL(_OVI[9])
N122200 RET
N122210 _AL24: _OVI[9]=61408
N122220 SETAL(_OVI[9])
N122230 RET
N122240 _AL25: _OVI[9]=61409
N122250 SETAL(_OVI[9])
N122260 RET
N122270 _AL26: _OVI[9]=61410
N122280 SETAL(_OVI[9])
N122290 RET
N122300 _AL27: _ALARM=61016
N122310 RET
N122320 _AL28: _OVI[9]=61404
N122330 SETAL(_OVI[9])
N122340 RET
N122350 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N122360 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N122370 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N122380 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N122390 DEF STRING[2] _COMP
N122400 DEF STRING[32] _I_TENV
N122410 DEF STRING[128] _STR_PROT
N122420 IF ($AN_NCK_VERSION<990000)
N122430   GOTOF _AL11
N122440 ENDIF
N122450 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N122460   RET
N122470 ENDIF
N122480 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N122490 _MWBILD: _I_K=_I_K MOD 100
N122500 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N122510 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N122520 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N122530 GOTOF _FINMW_1
N122540 _PA2A: _OVR[20]=_OVR[20]/_I_K
N122550 _FINMW_1: RET
N122560 _FINMW_2: _I_CH_6=1
N122570 RET
N122580 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N122590 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N122600   RET
N122610 ENDIF
N122620 IF (_OVI[6]==0) GOTOF _MT1
N122630 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N122640 _MT1: _I_MA=_MA
N122650 IF (_OVI[2]==974) OR (_OVI[2]==994)
N122660   _I_MA=(_I_MA MOD 10)
N122670   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N122680     _I_MA=2
N122690   ENDIF
N122700 ENDIF
N122710 IF (_KNUM==0)
N122720   RET
N122730 ENDIF
N122740 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N122750   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N122760   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N122770 ELSE
N122780   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N122790 ENDIF
N122800 _OVI[0]=_T_7
N122810 IF (_DFLACH)
N122820   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N122830 ELSE
N122840   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N122850 ENDIF
N122860 _SD42950=$SC_TOOL_LENGTH_TYPE
N122870 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N122880   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N122890     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N122900       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N122910     ENDIF
N122920     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N122930       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N122940       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N122950         IF (_T_4==0)
N122960           _T_4=1
N122970         ELSE
N122980           _T_4=0
N122990         ENDIF
N123000       ENDIF
N123010     ENDIF
N123020   ENDIF
N123030   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N123040     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N123050       IF ($SC_TOOL_LENGTH_CONST_T==19)
N123060         _I_PROT=1
N123070         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N123080           IF (_T_3==3)
N123090             _T_3=1 _H_T_3=3
N123100           ELSE
N123110             IF (_T_3==1)
N123120               _T_3=3 _H_T_3=1
N123130             ELSE
N123140               _T_3=2 _H_T_3=2
N123150             ENDIF
N123160           ENDIF
N123170         ENDIF
N123180         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N123190           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N123200         ENDIF
N123210         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N123220           _T_6=0 _T_3=1 _H_T_3=3
N123230         ENDIF
N123240         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N123250           IF (_T_4==0)
N123260             _T_4=1
N123270           ELSE
N123280             _T_4=0
N123290           ENDIF
N123300         ENDIF
N123310       ENDIF
N123320     ENDIF
N123330   ENDIF
N123340 ENDIF
N123350 IF (_T_2>1)
N123360   IF (_TENV=="")
N123370     GOTOF _AL21
N123380   ENDIF
N123390   _I_TENV=_TENV
N123400   IF (_DFLACH)
N123410     _TCOR=0
N123420   ENDIF
N123430   IF (_TCOR<0)
N123440     GOTOF _AL5
N123450   ENDIF
N123460   IF (_TCOR==0)
N123470     _RETW=GETTENV(_I_TENV,_TDDL)
N123480     _TOUT=_TDDL[0]
N123490     IF (_DFLACH) AND (_T_7==0)
N123500       _TOUT=_TDDL[1]
N123510     ENDIF
N123520   ENDIF
N123530 ELSE
N123540   IF (_TCOR<=0)
N123550     GOTOF _AL5
N123560   ENDIF
N123570   IF (_T_7==0)
N123580     GOTOF _AL8
N123590   ENDIF
N123600   _I_TENV=""
N123610 ENDIF
N123620 IF (_T_3==0)
N123630   IF (_T_6<2)
N123640     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N123650     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N123660     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N123670       IF (NOT(_I_PROT))
N123680         _H_T_3=_I_MA
N123690         IF (_I_MA==1)
N123700           _H_T_3=2
N123710         ELSE
N123720           IF (_I_MA==2)
N123730             _H_T_3=1
N123740           ENDIF
N123750         ENDIF
N123760       ELSE
N123770         IF (_I_MA==3)
N123780           _H_T_3=2 _GEOAX=1
N123790         ENDIF
N123800       ENDIF
N123810       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N123820     ENDIF
N123830   ELSE
N123840     IF (_T_6==2)
N123850       _CORCOMP=6
N123860       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N123870     ENDIF
N123880     _H_T_3=_I_MA
N123890   ENDIF
N123900 ELSE
N123910   IF (_T_3==4)
N123920     _CORCOMP=6
N123930     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N123940   ELSE
N123950     IF (_T_2<2)
N123960       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N123970         IF (_H_T_3<>1)
N123980           IF (_H_T_3==2)
N123990             _H_T_3=1
N124000           ELSE
N124010             _H_T_3=0
N124020           ENDIF
N124030         ELSE
N124040           _H_T_3=2
N124050         ENDIF
N124060         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N124070         IF (_HI_GG<0)
N124080           IF (_H_T_3==0)
N124090             _H_T_3=1
N124100           ELSE
N124110             IF (_H_T_3==1)
N124120               _H_T_3=0
N124130             ENDIF
N124140           ENDIF
N124150         ENDIF
N124160         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N124170         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N124180         _H_T_3=_T_3
N124190       ENDIF
N124200       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N124210         IF (NOT(_I_PROT))
N124220           IF (_H_T_3<>1)
N124230             IF (_H_T_3==2)
N124240               _H_T_3=0
N124250             ELSE
N124260               _H_T_3=2
N124270             ENDIF
N124280           ENDIF
N124290           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N124300           IF (_HI_GG<0)
N124310             IF (_H_T_3==0)
N124320               _H_T_3=1
N124330             ELSE
N124340               IF (_H_T_3==1)
N124350                 _H_T_3=0
N124360               ENDIF
N124370             ENDIF
N124380           ENDIF
N124390           _GEOAX=_H_T_3
N124400         ELSE
N124410           _GEOAX=_T_3-1
N124420         ENDIF
N124430         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N124440         IF (NOT(_I_PROT))
N124450           _H_T_3=_T_3
N124460         ENDIF
N124470         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N124480       ENDIF
N124490     ELSE
N124500       _GEOAX=0 _CORCOMP=_T_3+2
N124510     ENDIF
N124520   ENDIF
N124530 ENDIF
N124540 IF ((_T_2==0) OR (_T_2==2))
N124550   IF (_I_CH_6==0)
N124560     _COMP="W" _CORMODE=1 _I_PROT=9
N124570   ELSE
N124580     _COMP="GW" _CORMODE=3 _I_PROT=0
N124590   ENDIF
N124600   IF (_DFLACH)
N124610     IF (_CORCOMP==0)
N124620       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N124630       EXECSTRING(_STR_PROT)
N124640       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N124650       IF (_H_T_3==3)
N124660         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N124670       ELSE
N124680         IF (_H_T_3==2)
N124690           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N124700         ELSE
N124710           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N124720         ENDIF
N124730       ENDIF
N124740     ELSE
N124750       IF (_CORCOMP==6)
N124760         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N124770         EXECSTRING(_STR_PROT)
N124780         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N124790       ENDIF
N124800     ENDIF
N124810   ELSE
N124820     IF (_CORCOMP==0)
N124830       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N124840       EXECSTRING(_STR_PROT)
N124850       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N124860       IF (_H_T_3==3)
N124870         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N124880       ELSE
N124890         IF (_H_T_3==2)
N124900           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N124910         ELSE
N124920           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N124930         ENDIF
N124940       ENDIF
N124950     ELSE
N124960       IF (_CORCOMP==6)
N124970         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N124980         EXECSTRING(_STR_PROT)
N124990         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N125000       ENDIF
N125010     ENDIF
N125020   ENDIF
N125030 ELSE
N125040   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N125050     GOTOF _AL22
N125060   ENDIF
N125070   IF (_DLNUM<0)
N125080     GOTOF _AL22
N125090   ELSE
N125100     IF ((_DLNUM==0) AND (_T_2<2))
N125110       GOTOF _AL22
N125120     ENDIF
N125130   ENDIF
N125140   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N125150     GOTOF _AL24
N125160   ENDIF
N125170   _OVI[13]=_DLNUM
N125180   IF (_I_CH_8==1)
N125190     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N125200       GOTOF _AL25
N125210     ENDIF
N125220     _COMP="E" _CORMODE=1
N125230   ELSE
N125240     IF (_I_CH_6==0)
N125250       _COMP="S" _CORMODE=1
N125260     ELSE
N125270       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N125280         GOTOF _AL25
N125290       ENDIF
N125300       _COMP="ES" _CORMODE=3
N125310     ENDIF
N125320   ENDIF
N125330   IF (_DFLACH)
N125340     IF (_CORCOMP==0)
N125350       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N125360       EXECSTRING(_STR_PROT)
N125370       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N125380       IF (_H_T_3==3)
N125390         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N125400       ELSE
N125410         IF (_H_T_3==2)
N125420           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N125430         ELSE
N125440           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N125450         ENDIF
N125460       ENDIF
N125470     ELSE
N125480       IF (_CORCOMP==6)
N125490         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N125500         EXECSTRING(_STR_PROT)
N125510         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N125520       ENDIF
N125530     ENDIF
N125540   ELSE
N125550     IF (_CORCOMP==0)
N125560       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N125570       EXECSTRING(_STR_PROT)
N125580       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N125590       IF (_H_T_3==3)
N125600         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N125610       ELSE
N125620         IF (_H_T_3==2)
N125630           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N125640         ELSE
N125650           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N125660         ENDIF
N125670       ENDIF
N125680     ELSE
N125690       IF (_CORCOMP==6)
N125700         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N125710         EXECSTRING(_STR_PROT)
N125720         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N125730       ENDIF
N125740     ENDIF
N125750   ENDIF
N125760 ENDIF
N125770 _H_TC=$P_TC
N125780 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N125790   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N125800   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N125810   TCARR=0
N125820   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N125830     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N125840   ENDIF
N125850   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N125860     PAROTOF
N125870   ENDIF
N125880   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N125890 ENDIF
N125900 IF (_HI_GG) AND (_T_2<2)
N125910   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N125920   G[6]=_HI_GG
N125930 ENDIF
N125940 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N125950   IF (_T_4==1)
N125960     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N125970   ENDIF
N125980   _CORVAL[0]=_H_OVR20
N125990   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N126000     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N126010   ENDIF
N126020 ELSE
N126030   IF (_T_4==1)
N126040     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N126050   ENDIF
N126060   _CORVAL[0]=_H_OVR20
N126070 ENDIF
N126080 IF ((_DLNUM==0) AND (_T_2==3))
N126090   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N126100 ELSE
N126110   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N126120 ENDIF
N126130 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N126140   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N126150     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N126160   ENDIF
N126170 ENDIF
N126180 IF (_HR_GG AND (_T_2<2))
N126190   G[6]=_HR_GG
N126200 ENDIF
N126210 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N126220   $P_CYCFRAME=CTRANS()
N126230   _T_7=_T_5 MOD 1000
N126240   G[8]=_T_7
N126250   TCARR=_H_TC
N126260   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N126270     _T_7=_T_5 DIV 1000 MOD 100
N126280     G[52]=_T_7
N126290   ENDIF
N126300   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N126310     _T_7=_T_5 DIV 100000 MOD 100
N126320     G[53]=_T_7
N126330   ENDIF
N126340 ENDIF
N126350 IF (_OVI[12]<>0)
N126360   _OVI[11]=0
N126370   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N126380 ENDIF
N126390 _FIN: _OVI[11]=1
N126400 RET
N126410 _AL1: _OVI[9]=61318
N126420 SETAL(_OVI[9])
N126430 RET
N126440 _AL5: _OVI[9]=61320
N126450 SETAL(_OVI[9])
N126460 RET
N126470 _AL7: _OVI[9]=61319
N126480 SETAL(_OVI[9])
N126490 RET
N126500 _AL8: _OVI[9]=61328
N126510 SETAL(_OVI[9])
N126520 RET
N126530 _AL11: _OVI[9]=61342
N126540 SETAL(_OVI[9])
N126550 RET
N126560 _AL12: _OVI[9]=61345
N126570 SETAL(_OVI[9])
N126580 RET
N126590 _AL20: _OVI[9]=61404
N126600 SETAL(_OVI[9])
N126610 RET
N126620 _AL21: _OVI[9]=61405
N126630 SETAL(_OVI[9])
N126640 RET
N126650 _AL22: _OVI[9]=61406
N126660 SETAL(_OVI[9])
N126670 RET
N126680 _AL24: _OVI[9]=61408
N126690 SETAL(_OVI[9])
N126700 RET
N126710 _AL25: _OVI[9]=61409
N126720 SETAL(_OVI[9])
N126730 RET
N126740 _AL26: _OVI[9]=61410
N126750 SETAL(_OVI[9])
N126760 RET
N126770 _AL27: _ALARM=61016
N126780 RET
N126790 _AL28: _OVI[9]=61404
N126800 SETAL(_OVI[9])
N126810 RET
N126820 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N126830 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N126840 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N126850 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N126860 DEF STRING[2] _COMP
N126870 DEF STRING[32] _I_TENV
N126880 DEF STRING[128] _STR_PROT
N126890 IF ($AN_NCK_VERSION<990000)
N126900   GOTOF _AL11
N126910 ENDIF
N126920 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N126930   RET
N126940 ENDIF
N126950 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N126960 _MWBILD: _I_K=_I_K MOD 100
N126970 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N126980 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N126990 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N127000 GOTOF _FINMW_1
N127010 _PA2A: _OVR[20]=_OVR[20]/_I_K
N127020 _FINMW_1: RET
N127030 _FINMW_2: _I_CH_6=1
N127040 RET
N127050 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N127060 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N127070   RET
N127080 ENDIF
N127090 IF (_OVI[6]==0) GOTOF _MT1
N127100 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N127110 _MT1: _I_MA=_MA
N127120 IF (_OVI[2]==974) OR (_OVI[2]==994)
N127130   _I_MA=(_I_MA MOD 10)
N127140   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N127150     _I_MA=2
N127160   ENDIF
N127170 ENDIF
N127180 IF (_KNUM==0)
N127190   RET
N127200 ENDIF
N127210 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N127220   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N127230   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N127240 ELSE
N127250   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N127260 ENDIF
N127270 _OVI[0]=_T_7
N127280 IF (_DFLACH)
N127290   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N127300 ELSE
N127310   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N127320 ENDIF
N127330 _SD42950=$SC_TOOL_LENGTH_TYPE
N127340 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N127350   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N127360     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N127370       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N127380     ENDIF
N127390     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N127400       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N127410       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N127420         IF (_T_4==0)
N127430           _T_4=1
N127440         ELSE
N127450           _T_4=0
N127460         ENDIF
N127470       ENDIF
N127480     ENDIF
N127490   ENDIF
N127500   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N127510     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N127520       IF ($SC_TOOL_LENGTH_CONST_T==19)
N127530         _I_PROT=1
N127540         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N127550           IF (_T_3==3)
N127560             _T_3=1 _H_T_3=3
N127570           ELSE
N127580             IF (_T_3==1)
N127590               _T_3=3 _H_T_3=1
N127600             ELSE
N127610               _T_3=2 _H_T_3=2
N127620             ENDIF
N127630           ENDIF
N127640         ENDIF
N127650         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N127660           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N127670         ENDIF
N127680         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N127690           _T_6=0 _T_3=1 _H_T_3=3
N127700         ENDIF
N127710         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N127720           IF (_T_4==0)
N127730             _T_4=1
N127740           ELSE
N127750             _T_4=0
N127760           ENDIF
N127770         ENDIF
N127780       ENDIF
N127790     ENDIF
N127800   ENDIF
N127810 ENDIF
N127820 IF (_T_2>1)
N127830   IF (_TENV=="")
N127840     GOTOF _AL21
N127850   ENDIF
N127860   _I_TENV=_TENV
N127870   IF (_DFLACH)
N127880     _TCOR=0
N127890   ENDIF
N127900   IF (_TCOR<0)
N127910     GOTOF _AL5
N127920   ENDIF
N127930   IF (_TCOR==0)
N127940     _RETW=GETTENV(_I_TENV,_TDDL)
N127950     _TOUT=_TDDL[0]
N127960     IF (_DFLACH) AND (_T_7==0)
N127970       _TOUT=_TDDL[1]
N127980     ENDIF
N127990   ENDIF
N128000 ELSE
N128010   IF (_TCOR<=0)
N128020     GOTOF _AL5
N128030   ENDIF
N128040   IF (_T_7==0)
N128050     GOTOF _AL8
N128060   ENDIF
N128070   _I_TENV=""
N128080 ENDIF
N128090 IF (_T_3==0)
N128100   IF (_T_6<2)
N128110     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N128120     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N128130     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N128140       IF (NOT(_I_PROT))
N128150         _H_T_3=_I_MA
N128160         IF (_I_MA==1)
N128170           _H_T_3=2
N128180         ELSE
N128190           IF (_I_MA==2)
N128200             _H_T_3=1
N128210           ENDIF
N128220         ENDIF
N128230       ELSE
N128240         IF (_I_MA==3)
N128250           _H_T_3=2 _GEOAX=1
N128260         ENDIF
N128270       ENDIF
N128280       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N128290     ENDIF
N128300   ELSE
N128310     IF (_T_6==2)
N128320       _CORCOMP=6
N128330       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N128340     ENDIF
N128350     _H_T_3=_I_MA
N128360   ENDIF
N128370 ELSE
N128380   IF (_T_3==4)
N128390     _CORCOMP=6
N128400     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N128410   ELSE
N128420     IF (_T_2<2)
N128430       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N128440         IF (_H_T_3<>1)
N128450           IF (_H_T_3==2)
N128460             _H_T_3=1
N128470           ELSE
N128480             _H_T_3=0
N128490           ENDIF
N128500         ELSE
N128510           _H_T_3=2
N128520         ENDIF
N128530         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N128540         IF (_HI_GG<0)
N128550           IF (_H_T_3==0)
N128560             _H_T_3=1
N128570           ELSE
N128580             IF (_H_T_3==1)
N128590               _H_T_3=0
N128600             ENDIF
N128610           ENDIF
N128620         ENDIF
N128630         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N128640         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N128650         _H_T_3=_T_3
N128660       ENDIF
N128670       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N128680         IF (NOT(_I_PROT))
N128690           IF (_H_T_3<>1)
N128700             IF (_H_T_3==2)
N128710               _H_T_3=0
N128720             ELSE
N128730               _H_T_3=2
N128740             ENDIF
N128750           ENDIF
N128760           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N128770           IF (_HI_GG<0)
N128780             IF (_H_T_3==0)
N128790               _H_T_3=1
N128800             ELSE
N128810               IF (_H_T_3==1)
N128820                 _H_T_3=0
N128830               ENDIF
N128840             ENDIF
N128850           ENDIF
N128860           _GEOAX=_H_T_3
N128870         ELSE
N128880           _GEOAX=_T_3-1
N128890         ENDIF
N128900         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N128910         IF (NOT(_I_PROT))
N128920           _H_T_3=_T_3
N128930         ENDIF
N128940         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N128950       ENDIF
N128960     ELSE
N128970       _GEOAX=0 _CORCOMP=_T_3+2
N128980     ENDIF
N128990   ENDIF
N129000 ENDIF
N129010 IF ((_T_2==0) OR (_T_2==2))
N129020   IF (_I_CH_6==0)
N129030     _COMP="W" _CORMODE=1 _I_PROT=9
N129040   ELSE
N129050     _COMP="GW" _CORMODE=3 _I_PROT=0
N129060   ENDIF
N129070   IF (_DFLACH)
N129080     IF (_CORCOMP==0)
N129090       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N129100       EXECSTRING(_STR_PROT)
N129110       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N129120       IF (_H_T_3==3)
N129130         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N129140       ELSE
N129150         IF (_H_T_3==2)
N129160           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N129170         ELSE
N129180           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N129190         ENDIF
N129200       ENDIF
N129210     ELSE
N129220       IF (_CORCOMP==6)
N129230         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N129240         EXECSTRING(_STR_PROT)
N129250         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N129260       ENDIF
N129270     ENDIF
N129280   ELSE
N129290     IF (_CORCOMP==0)
N129300       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N129310       EXECSTRING(_STR_PROT)
N129320       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N129330       IF (_H_T_3==3)
N129340         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N129350       ELSE
N129360         IF (_H_T_3==2)
N129370           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N129380         ELSE
N129390           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N129400         ENDIF
N129410       ENDIF
N129420     ELSE
N129430       IF (_CORCOMP==6)
N129440         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N129450         EXECSTRING(_STR_PROT)
N129460         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N129470       ENDIF
N129480     ENDIF
N129490   ENDIF
N129500 ELSE
N129510   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N129520     GOTOF _AL22
N129530   ENDIF
N129540   IF (_DLNUM<0)
N129550     GOTOF _AL22
N129560   ELSE
N129570     IF ((_DLNUM==0) AND (_T_2<2))
N129580       GOTOF _AL22
N129590     ENDIF
N129600   ENDIF
N129610   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N129620     GOTOF _AL24
N129630   ENDIF
N129640   _OVI[13]=_DLNUM
N129650   IF (_I_CH_8==1)
N129660     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N129670       GOTOF _AL25
N129680     ENDIF
N129690     _COMP="E" _CORMODE=1
N129700   ELSE
N129710     IF (_I_CH_6==0)
N129720       _COMP="S" _CORMODE=1
N129730     ELSE
N129740       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N129750         GOTOF _AL25
N129760       ENDIF
N129770       _COMP="ES" _CORMODE=3
N129780     ENDIF
N129790   ENDIF
N129800   IF (_DFLACH)
N129810     IF (_CORCOMP==0)
N129820       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N129830       EXECSTRING(_STR_PROT)
N129840       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N129850       IF (_H_T_3==3)
N129860         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N129870       ELSE
N129880         IF (_H_T_3==2)
N129890           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N129900         ELSE
N129910           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N129920         ENDIF
N129930       ENDIF
N129940     ELSE
N129950       IF (_CORCOMP==6)
N129960         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N129970         EXECSTRING(_STR_PROT)
N129980         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N129990       ENDIF
N130000     ENDIF
N130010   ELSE
N130020     IF (_CORCOMP==0)
N130030       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N130040       EXECSTRING(_STR_PROT)
N130050       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N130060       IF (_H_T_3==3)
N130070         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N130080       ELSE
N130090         IF (_H_T_3==2)
N130100           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N130110         ELSE
N130120           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N130130         ENDIF
N130140       ENDIF
N130150     ELSE
N130160       IF (_CORCOMP==6)
N130170         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N130180         EXECSTRING(_STR_PROT)
N130190         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N130200       ENDIF
N130210     ENDIF
N130220   ENDIF
N130230 ENDIF
N130240 _H_TC=$P_TC
N130250 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N130260   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N130270   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N130280   TCARR=0
N130290   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N130300     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N130310   ENDIF
N130320   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N130330     PAROTOF
N130340   ENDIF
N130350   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N130360 ENDIF
N130370 IF (_HI_GG) AND (_T_2<2)
N130380   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N130390   G[6]=_HI_GG
N130400 ENDIF
N130410 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N130420   IF (_T_4==1)
N130430     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N130440   ENDIF
N130450   _CORVAL[0]=_H_OVR20
N130460   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N130470     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N130480   ENDIF
N130490 ELSE
N130500   IF (_T_4==1)
N130510     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N130520   ENDIF
N130530   _CORVAL[0]=_H_OVR20
N130540 ENDIF
N130550 IF ((_DLNUM==0) AND (_T_2==3))
N130560   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N130570 ELSE
N130580   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N130590 ENDIF
N130600 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N130610   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N130620     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N130630   ENDIF
N130640 ENDIF
N130650 IF (_HR_GG AND (_T_2<2))
N130660   G[6]=_HR_GG
N130670 ENDIF
N130680 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N130690   $P_CYCFRAME=CTRANS()
N130700   _T_7=_T_5 MOD 1000
N130710   G[8]=_T_7
N130720   TCARR=_H_TC
N130730   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N130740     _T_7=_T_5 DIV 1000 MOD 100
N130750     G[52]=_T_7
N130760   ENDIF
N130770   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N130780     _T_7=_T_5 DIV 100000 MOD 100
N130790     G[53]=_T_7
N130800   ENDIF
N130810 ENDIF
N130820 IF (_OVI[12]<>0)
N130830   _OVI[11]=0
N130840   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N130850 ENDIF
N130860 _FIN: _OVI[11]=1
N130870 RET
N130880 _AL1: _OVI[9]=61318
N130890 SETAL(_OVI[9])
N130900 RET
N130910 _AL5: _OVI[9]=61320
N130920 SETAL(_OVI[9])
N130930 RET
N130940 _AL7: _OVI[9]=61319
N130950 SETAL(_OVI[9])
N130960 RET
N130970 _AL8: _OVI[9]=61328
N130980 SETAL(_OVI[9])
N130990 RET
N131000 _AL11: _OVI[9]=61342
N131010 SETAL(_OVI[9])
N131020 RET
N131030 _AL12: _OVI[9]=61345
N131040 SETAL(_OVI[9])
N131050 RET
N131060 _AL20: _OVI[9]=61404
N131070 SETAL(_OVI[9])
N131080 RET
N131090 _AL21: _OVI[9]=61405
N131100 SETAL(_OVI[9])
N131110 RET
N131120 _AL22: _OVI[9]=61406
N131130 SETAL(_OVI[9])
N131140 RET
N131150 _AL24: _OVI[9]=61408
N131160 SETAL(_OVI[9])
N131170 RET
N131180 _AL25: _OVI[9]=61409
N131190 SETAL(_OVI[9])
N131200 RET
N131210 _AL26: _OVI[9]=61410
N131220 SETAL(_OVI[9])
N131230 RET
N131240 _AL27: _ALARM=61016
N131250 RET
N131260 _AL28: _OVI[9]=61404
N131270 SETAL(_OVI[9])
N131280 RET
N131290 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N131300 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N131310 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N131320 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N131330 DEF STRING[2] _COMP
N131340 DEF STRING[32] _I_TENV
N131350 DEF STRING[128] _STR_PROT
N131360 IF ($AN_NCK_VERSION<990000)
N131370   GOTOF _AL11
N131380 ENDIF
N131390 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N131400   RET
N131410 ENDIF
N131420 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N131430 _MWBILD: _I_K=_I_K MOD 100
N131440 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N131450 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N131460 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N131470 GOTOF _FINMW_1
N131480 _PA2A: _OVR[20]=_OVR[20]/_I_K
N131490 _FINMW_1: RET
N131500 _FINMW_2: _I_CH_6=1
N131510 RET
N131520 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N131530 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N131540   RET
N131550 ENDIF
N131560 IF (_OVI[6]==0) GOTOF _MT1
N131570 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N131580 _MT1: _I_MA=_MA
N131590 IF (_OVI[2]==974) OR (_OVI[2]==994)
N131600   _I_MA=(_I_MA MOD 10)
N131610   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N131620     _I_MA=2
N131630   ENDIF
N131640 ENDIF
N131650 IF (_KNUM==0)
N131660   RET
N131670 ENDIF
N131680 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N131690   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N131700   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N131710 ELSE
N131720   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N131730 ENDIF
N131740 _OVI[0]=_T_7
N131750 IF (_DFLACH)
N131760   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N131770 ELSE
N131780   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N131790 ENDIF
N131800 _SD42950=$SC_TOOL_LENGTH_TYPE
N131810 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N131820   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N131830     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N131840       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N131850     ENDIF
N131860     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N131870       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N131880       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N131890         IF (_T_4==0)
N131900           _T_4=1
N131910         ELSE
N131920           _T_4=0
N131930         ENDIF
N131940       ENDIF
N131950     ENDIF
N131960   ENDIF
N131970   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N131980     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N131990       IF ($SC_TOOL_LENGTH_CONST_T==19)
N132000         _I_PROT=1
N132010         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N132020           IF (_T_3==3)
N132030             _T_3=1 _H_T_3=3
N132040           ELSE
N132050             IF (_T_3==1)
N132060               _T_3=3 _H_T_3=1
N132070             ELSE
N132080               _T_3=2 _H_T_3=2
N132090             ENDIF
N132100           ENDIF
N132110         ENDIF
N132120         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N132130           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N132140         ENDIF
N132150         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N132160           _T_6=0 _T_3=1 _H_T_3=3
N132170         ENDIF
N132180         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N132190           IF (_T_4==0)
N132200             _T_4=1
N132210           ELSE
N132220             _T_4=0
N132230           ENDIF
N132240         ENDIF
N132250       ENDIF
N132260     ENDIF
N132270   ENDIF
N132280 ENDIF
N132290 IF (_T_2>1)
N132300   IF (_TENV=="")
N132310     GOTOF _AL21
N132320   ENDIF
N132330   _I_TENV=_TENV
N132340   IF (_DFLACH)
N132350     _TCOR=0
N132360   ENDIF
N132370   IF (_TCOR<0)
N132380     GOTOF _AL5
N132390   ENDIF
N132400   IF (_TCOR==0)
N132410     _RETW=GETTENV(_I_TENV,_TDDL)
N132420     _TOUT=_TDDL[0]
N132430     IF (_DFLACH) AND (_T_7==0)
N132440       _TOUT=_TDDL[1]
N132450     ENDIF
N132460   ENDIF
N132470 ELSE
N132480   IF (_TCOR<=0)
N132490     GOTOF _AL5
N132500   ENDIF
N132510   IF (_T_7==0)
N132520     GOTOF _AL8
N132530   ENDIF
N132540   _I_TENV=""
N132550 ENDIF
N132560 IF (_T_3==0)
N132570   IF (_T_6<2)
N132580     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N132590     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N132600     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N132610       IF (NOT(_I_PROT))
N132620         _H_T_3=_I_MA
N132630         IF (_I_MA==1)
N132640           _H_T_3=2
N132650         ELSE
N132660           IF (_I_MA==2)
N132670             _H_T_3=1
N132680           ENDIF
N132690         ENDIF
N132700       ELSE
N132710         IF (_I_MA==3)
N132720           _H_T_3=2 _GEOAX=1
N132730         ENDIF
N132740       ENDIF
N132750       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N132760     ENDIF
N132770   ELSE
N132780     IF (_T_6==2)
N132790       _CORCOMP=6
N132800       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N132810     ENDIF
N132820     _H_T_3=_I_MA
N132830   ENDIF
N132840 ELSE
N132850   IF (_T_3==4)
N132860     _CORCOMP=6
N132870     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N132880   ELSE
N132890     IF (_T_2<2)
N132900       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N132910         IF (_H_T_3<>1)
N132920           IF (_H_T_3==2)
N132930             _H_T_3=1
N132940           ELSE
N132950             _H_T_3=0
N132960           ENDIF
N132970         ELSE
N132980           _H_T_3=2
N132990         ENDIF
N133000         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N133010         IF (_HI_GG<0)
N133020           IF (_H_T_3==0)
N133030             _H_T_3=1
N133040           ELSE
N133050             IF (_H_T_3==1)
N133060               _H_T_3=0
N133070             ENDIF
N133080           ENDIF
N133090         ENDIF
N133100         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N133110         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N133120         _H_T_3=_T_3
N133130       ENDIF
N133140       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N133150         IF (NOT(_I_PROT))
N133160           IF (_H_T_3<>1)
N133170             IF (_H_T_3==2)
N133180               _H_T_3=0
N133190             ELSE
N133200               _H_T_3=2
N133210             ENDIF
N133220           ENDIF
N133230           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N133240           IF (_HI_GG<0)
N133250             IF (_H_T_3==0)
N133260               _H_T_3=1
N133270             ELSE
N133280               IF (_H_T_3==1)
N133290                 _H_T_3=0
N133300               ENDIF
N133310             ENDIF
N133320           ENDIF
N133330           _GEOAX=_H_T_3
N133340         ELSE
N133350           _GEOAX=_T_3-1
N133360         ENDIF
N133370         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N133380         IF (NOT(_I_PROT))
N133390           _H_T_3=_T_3
N133400         ENDIF
N133410         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N133420       ENDIF
N133430     ELSE
N133440       _GEOAX=0 _CORCOMP=_T_3+2
N133450     ENDIF
N133460   ENDIF
N133470 ENDIF
N133480 IF ((_T_2==0) OR (_T_2==2))
N133490   IF (_I_CH_6==0)
N133500     _COMP="W" _CORMODE=1 _I_PROT=9
N133510   ELSE
N133520     _COMP="GW" _CORMODE=3 _I_PROT=0
N133530   ENDIF
N133540   IF (_DFLACH)
N133550     IF (_CORCOMP==0)
N133560       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N133570       EXECSTRING(_STR_PROT)
N133580       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N133590       IF (_H_T_3==3)
N133600         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N133610       ELSE
N133620         IF (_H_T_3==2)
N133630           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N133640         ELSE
N133650           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N133660         ENDIF
N133670       ENDIF
N133680     ELSE
N133690       IF (_CORCOMP==6)
N133700         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N133710         EXECSTRING(_STR_PROT)
N133720         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N133730       ENDIF
N133740     ENDIF
N133750   ELSE
N133760     IF (_CORCOMP==0)
N133770       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N133780       EXECSTRING(_STR_PROT)
N133790       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N133800       IF (_H_T_3==3)
N133810         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N133820       ELSE
N133830         IF (_H_T_3==2)
N133840           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N133850         ELSE
N133860           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N133870         ENDIF
N133880       ENDIF
N133890     ELSE
N133900       IF (_CORCOMP==6)
N133910         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N133920         EXECSTRING(_STR_PROT)
N133930         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N133940       ENDIF
N133950     ENDIF
N133960   ENDIF
N133970 ELSE
N133980   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N133990     GOTOF _AL22
N134000   ENDIF
N134010   IF (_DLNUM<0)
N134020     GOTOF _AL22
N134030   ELSE
N134040     IF ((_DLNUM==0) AND (_T_2<2))
N134050       GOTOF _AL22
N134060     ENDIF
N134070   ENDIF
N134080   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N134090     GOTOF _AL24
N134100   ENDIF
N134110   _OVI[13]=_DLNUM
N134120   IF (_I_CH_8==1)
N134130     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N134140       GOTOF _AL25
N134150     ENDIF
N134160     _COMP="E" _CORMODE=1
N134170   ELSE
N134180     IF (_I_CH_6==0)
N134190       _COMP="S" _CORMODE=1
N134200     ELSE
N134210       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N134220         GOTOF _AL25
N134230       ENDIF
N134240       _COMP="ES" _CORMODE=3
N134250     ENDIF
N134260   ENDIF
N134270   IF (_DFLACH)
N134280     IF (_CORCOMP==0)
N134290       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N134300       EXECSTRING(_STR_PROT)
N134310       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N134320       IF (_H_T_3==3)
N134330         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N134340       ELSE
N134350         IF (_H_T_3==2)
N134360           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N134370         ELSE
N134380           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N134390         ENDIF
N134400       ENDIF
N134410     ELSE
N134420       IF (_CORCOMP==6)
N134430         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N134440         EXECSTRING(_STR_PROT)
N134450         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N134460       ENDIF
N134470     ENDIF
N134480   ELSE
N134490     IF (_CORCOMP==0)
N134500       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N134510       EXECSTRING(_STR_PROT)
N134520       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N134530       IF (_H_T_3==3)
N134540         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N134550       ELSE
N134560         IF (_H_T_3==2)
N134570           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N134580         ELSE
N134590           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N134600         ENDIF
N134610       ENDIF
N134620     ELSE
N134630       IF (_CORCOMP==6)
N134640         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N134650         EXECSTRING(_STR_PROT)
N134660         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N134670       ENDIF
N134680     ENDIF
N134690   ENDIF
N134700 ENDIF
N134710 _H_TC=$P_TC
N134720 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N134730   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N134740   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N134750   TCARR=0
N134760   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N134770     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N134780   ENDIF
N134790   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N134800     PAROTOF
N134810   ENDIF
N134820   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N134830 ENDIF
N134840 IF (_HI_GG) AND (_T_2<2)
N134850   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N134860   G[6]=_HI_GG
N134870 ENDIF
N134880 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N134890   IF (_T_4==1)
N134900     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N134910   ENDIF
N134920   _CORVAL[0]=_H_OVR20
N134930   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N134940     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N134950   ENDIF
N134960 ELSE
N134970   IF (_T_4==1)
N134980     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N134990   ENDIF
N135000   _CORVAL[0]=_H_OVR20
N135010 ENDIF
N135020 IF ((_DLNUM==0) AND (_T_2==3))
N135030   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N135040 ELSE
N135050   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N135060 ENDIF
N135070 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N135080   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N135090     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N135100   ENDIF
N135110 ENDIF
N135120 IF (_HR_GG AND (_T_2<2))
N135130   G[6]=_HR_GG
N135140 ENDIF
N135150 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N135160   $P_CYCFRAME=CTRANS()
N135170   _T_7=_T_5 MOD 1000
N135180   G[8]=_T_7
N135190   TCARR=_H_TC
N135200   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N135210     _T_7=_T_5 DIV 1000 MOD 100
N135220     G[52]=_T_7
N135230   ENDIF
N135240   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N135250     _T_7=_T_5 DIV 100000 MOD 100
N135260     G[53]=_T_7
N135270   ENDIF
N135280 ENDIF
N135290 IF (_OVI[12]<>0)
N135300   _OVI[11]=0
N135310   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N135320 ENDIF
N135330 _FIN: _OVI[11]=1
N135340 RET
N135350 _AL1: _OVI[9]=61318
N135360 SETAL(_OVI[9])
N135370 RET
N135380 _AL5: _OVI[9]=61320
N135390 SETAL(_OVI[9])
N135400 RET
N135410 _AL7: _OVI[9]=61319
N135420 SETAL(_OVI[9])
N135430 RET
N135440 _AL8: _OVI[9]=61328
N135450 SETAL(_OVI[9])
N135460 RET
N135470 _AL11: _OVI[9]=61342
N135480 SETAL(_OVI[9])
N135490 RET
N135500 _AL12: _OVI[9]=61345
N135510 SETAL(_OVI[9])
N135520 RET
N135530 _AL20: _OVI[9]=61404
N135540 SETAL(_OVI[9])
N135550 RET
N135560 _AL21: _OVI[9]=61405
N135570 SETAL(_OVI[9])
N135580 RET
N135590 _AL22: _OVI[9]=61406
N135600 SETAL(_OVI[9])
N135610 RET
N135620 _AL24: _OVI[9]=61408
N135630 SETAL(_OVI[9])
N135640 RET
N135650 _AL25: _OVI[9]=61409
N135660 SETAL(_OVI[9])
N135670 RET
N135680 _AL26: _OVI[9]=61410
N135690 SETAL(_OVI[9])
N135700 RET
N135710 _AL27: _ALARM=61016
N135720 RET
N135730 _AL28: _OVI[9]=61404
N135740 SETAL(_OVI[9])
N135750 RET
N135760 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N135770 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N135780 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N135790 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N135800 DEF STRING[2] _COMP
N135810 DEF STRING[32] _I_TENV
N135820 DEF STRING[128] _STR_PROT
N135830 IF ($AN_NCK_VERSION<990000)
N135840   GOTOF _AL11
N135850 ENDIF
N135860 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N135870   RET
N135880 ENDIF
N135890 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N135900 _MWBILD: _I_K=_I_K MOD 100
N135910 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N135920 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N135930 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N135940 GOTOF _FINMW_1
N135950 _PA2A: _OVR[20]=_OVR[20]/_I_K
N135960 _FINMW_1: RET
N135970 _FINMW_2: _I_CH_6=1
N135980 RET
N135990 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N136000 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N136010   RET
N136020 ENDIF
N136030 IF (_OVI[6]==0) GOTOF _MT1
N136040 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N136050 _MT1: _I_MA=_MA
N136060 IF (_OVI[2]==974) OR (_OVI[2]==994)
N136070   _I_MA=(_I_MA MOD 10)
N136080   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N136090     _I_MA=2
N136100   ENDIF
N136110 ENDIF
N136120 IF (_KNUM==0)
N136130   RET
N136140 ENDIF
N136150 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N136160   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N136170   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N136180 ELSE
N136190   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N136200 ENDIF
N136210 _OVI[0]=_T_7
N136220 IF (_DFLACH)
N136230   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N136240 ELSE
N136250   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N136260 ENDIF
N136270 _SD42950=$SC_TOOL_LENGTH_TYPE
N136280 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N136290   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N136300     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N136310       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N136320     ENDIF
N136330     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N136340       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N136350       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N136360         IF (_T_4==0)
N136370           _T_4=1
N136380         ELSE
N136390           _T_4=0
N136400         ENDIF
N136410       ENDIF
N136420     ENDIF
N136430   ENDIF
N136440   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N136450     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N136460       IF ($SC_TOOL_LENGTH_CONST_T==19)
N136470         _I_PROT=1
N136480         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N136490           IF (_T_3==3)
N136500             _T_3=1 _H_T_3=3
N136510           ELSE
N136520             IF (_T_3==1)
N136530               _T_3=3 _H_T_3=1
N136540             ELSE
N136550               _T_3=2 _H_T_3=2
N136560             ENDIF
N136570           ENDIF
N136580         ENDIF
N136590         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N136600           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N136610         ENDIF
N136620         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N136630           _T_6=0 _T_3=1 _H_T_3=3
N136640         ENDIF
N136650         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N136660           IF (_T_4==0)
N136670             _T_4=1
N136680           ELSE
N136690             _T_4=0
N136700           ENDIF
N136710         ENDIF
N136720       ENDIF
N136730     ENDIF
N136740   ENDIF
N136750 ENDIF
N136760 IF (_T_2>1)
N136770   IF (_TENV=="")
N136780     GOTOF _AL21
N136790   ENDIF
N136800   _I_TENV=_TENV
N136810   IF (_DFLACH)
N136820     _TCOR=0
N136830   ENDIF
N136840   IF (_TCOR<0)
N136850     GOTOF _AL5
N136860   ENDIF
N136870   IF (_TCOR==0)
N136880     _RETW=GETTENV(_I_TENV,_TDDL)
N136890     _TOUT=_TDDL[0]
N136900     IF (_DFLACH) AND (_T_7==0)
N136910       _TOUT=_TDDL[1]
N136920     ENDIF
N136930   ENDIF
N136940 ELSE
N136950   IF (_TCOR<=0)
N136960     GOTOF _AL5
N136970   ENDIF
N136980   IF (_T_7==0)
N136990     GOTOF _AL8
N137000   ENDIF
N137010   _I_TENV=""
N137020 ENDIF
N137030 IF (_T_3==0)
N137040   IF (_T_6<2)
N137050     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N137060     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N137070     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N137080       IF (NOT(_I_PROT))
N137090         _H_T_3=_I_MA
N137100         IF (_I_MA==1)
N137110           _H_T_3=2
N137120         ELSE
N137130           IF (_I_MA==2)
N137140             _H_T_3=1
N137150           ENDIF
N137160         ENDIF
N137170       ELSE
N137180         IF (_I_MA==3)
N137190           _H_T_3=2 _GEOAX=1
N137200         ENDIF
N137210       ENDIF
N137220       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N137230     ENDIF
N137240   ELSE
N137250     IF (_T_6==2)
N137260       _CORCOMP=6
N137270       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N137280     ENDIF
N137290     _H_T_3=_I_MA
N137300   ENDIF
N137310 ELSE
N137320   IF (_T_3==4)
N137330     _CORCOMP=6
N137340     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N137350   ELSE
N137360     IF (_T_2<2)
N137370       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N137380         IF (_H_T_3<>1)
N137390           IF (_H_T_3==2)
N137400             _H_T_3=1
N137410           ELSE
N137420             _H_T_3=0
N137430           ENDIF
N137440         ELSE
N137450           _H_T_3=2
N137460         ENDIF
N137470         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N137480         IF (_HI_GG<0)
N137490           IF (_H_T_3==0)
N137500             _H_T_3=1
N137510           ELSE
N137520             IF (_H_T_3==1)
N137530               _H_T_3=0
N137540             ENDIF
N137550           ENDIF
N137560         ENDIF
N137570         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N137580         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N137590         _H_T_3=_T_3
N137600       ENDIF
N137610       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N137620         IF (NOT(_I_PROT))
N137630           IF (_H_T_3<>1)
N137640             IF (_H_T_3==2)
N137650               _H_T_3=0
N137660             ELSE
N137670               _H_T_3=2
N137680             ENDIF
N137690           ENDIF
N137700           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N137710           IF (_HI_GG<0)
N137720             IF (_H_T_3==0)
N137730               _H_T_3=1
N137740             ELSE
N137750               IF (_H_T_3==1)
N137760                 _H_T_3=0
N137770               ENDIF
N137780             ENDIF
N137790           ENDIF
N137800           _GEOAX=_H_T_3
N137810         ELSE
N137820           _GEOAX=_T_3-1
N137830         ENDIF
N137840         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N137850         IF (NOT(_I_PROT))
N137860           _H_T_3=_T_3
N137870         ENDIF
N137880         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N137890       ENDIF
N137900     ELSE
N137910       _GEOAX=0 _CORCOMP=_T_3+2
N137920     ENDIF
N137930   ENDIF
N137940 ENDIF
N137950 IF ((_T_2==0) OR (_T_2==2))
N137960   IF (_I_CH_6==0)
N137970     _COMP="W" _CORMODE=1 _I_PROT=9
N137980   ELSE
N137990     _COMP="GW" _CORMODE=3 _I_PROT=0
N138000   ENDIF
N138010   IF (_DFLACH)
N138020     IF (_CORCOMP==0)
N138030       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N138040       EXECSTRING(_STR_PROT)
N138050       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N138060       IF (_H_T_3==3)
N138070         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N138080       ELSE
N138090         IF (_H_T_3==2)
N138100           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N138110         ELSE
N138120           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N138130         ENDIF
N138140       ENDIF
N138150     ELSE
N138160       IF (_CORCOMP==6)
N138170         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N138180         EXECSTRING(_STR_PROT)
N138190         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N138200       ENDIF
N138210     ENDIF
N138220   ELSE
N138230     IF (_CORCOMP==0)
N138240       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N138250       EXECSTRING(_STR_PROT)
N138260       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N138270       IF (_H_T_3==3)
N138280         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N138290       ELSE
N138300         IF (_H_T_3==2)
N138310           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N138320         ELSE
N138330           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N138340         ENDIF
N138350       ENDIF
N138360     ELSE
N138370       IF (_CORCOMP==6)
N138380         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N138390         EXECSTRING(_STR_PROT)
N138400         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N138410       ENDIF
N138420     ENDIF
N138430   ENDIF
N138440 ELSE
N138450   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N138460     GOTOF _AL22
N138470   ENDIF
N138480   IF (_DLNUM<0)
N138490     GOTOF _AL22
N138500   ELSE
N138510     IF ((_DLNUM==0) AND (_T_2<2))
N138520       GOTOF _AL22
N138530     ENDIF
N138540   ENDIF
N138550   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N138560     GOTOF _AL24
N138570   ENDIF
N138580   _OVI[13]=_DLNUM
N138590   IF (_I_CH_8==1)
N138600     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N138610       GOTOF _AL25
N138620     ENDIF
N138630     _COMP="E" _CORMODE=1
N138640   ELSE
N138650     IF (_I_CH_6==0)
N138660       _COMP="S" _CORMODE=1
N138670     ELSE
N138680       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N138690         GOTOF _AL25
N138700       ENDIF
N138710       _COMP="ES" _CORMODE=3
N138720     ENDIF
N138730   ENDIF
N138740   IF (_DFLACH)
N138750     IF (_CORCOMP==0)
N138760       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N138770       EXECSTRING(_STR_PROT)
N138780       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N138790       IF (_H_T_3==3)
N138800         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N138810       ELSE
N138820         IF (_H_T_3==2)
N138830           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N138840         ELSE
N138850           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N138860         ENDIF
N138870       ENDIF
N138880     ELSE
N138890       IF (_CORCOMP==6)
N138900         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N138910         EXECSTRING(_STR_PROT)
N138920         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N138930       ENDIF
N138940     ENDIF
N138950   ELSE
N138960     IF (_CORCOMP==0)
N138970       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N138980       EXECSTRING(_STR_PROT)
N138990       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N139000       IF (_H_T_3==3)
N139010         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N139020       ELSE
N139030         IF (_H_T_3==2)
N139040           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N139050         ELSE
N139060           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N139070         ENDIF
N139080       ENDIF
N139090     ELSE
N139100       IF (_CORCOMP==6)
N139110         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N139120         EXECSTRING(_STR_PROT)
N139130         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N139140       ENDIF
N139150     ENDIF
N139160   ENDIF
N139170 ENDIF
N139180 _H_TC=$P_TC
N139190 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N139200   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N139210   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N139220   TCARR=0
N139230   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N139240     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N139250   ENDIF
N139260   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N139270     PAROTOF
N139280   ENDIF
N139290   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N139300 ENDIF
N139310 IF (_HI_GG) AND (_T_2<2)
N139320   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N139330   G[6]=_HI_GG
N139340 ENDIF
N139350 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N139360   IF (_T_4==1)
N139370     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N139380   ENDIF
N139390   _CORVAL[0]=_H_OVR20
N139400   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N139410     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N139420   ENDIF
N139430 ELSE
N139440   IF (_T_4==1)
N139450     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N139460   ENDIF
N139470   _CORVAL[0]=_H_OVR20
N139480 ENDIF
N139490 IF ((_DLNUM==0) AND (_T_2==3))
N139500   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N139510 ELSE
N139520   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N139530 ENDIF
N139540 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N139550   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N139560     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N139570   ENDIF
N139580 ENDIF
N139590 IF (_HR_GG AND (_T_2<2))
N139600   G[6]=_HR_GG
N139610 ENDIF
N139620 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N139630   $P_CYCFRAME=CTRANS()
N139640   _T_7=_T_5 MOD 1000
N139650   G[8]=_T_7
N139660   TCARR=_H_TC
N139670   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N139680     _T_7=_T_5 DIV 1000 MOD 100
N139690     G[52]=_T_7
N139700   ENDIF
N139710   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N139720     _T_7=_T_5 DIV 100000 MOD 100
N139730     G[53]=_T_7
N139740   ENDIF
N139750 ENDIF
N139760 IF (_OVI[12]<>0)
N139770   _OVI[11]=0
N139780   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N139790 ENDIF
N139800 _FIN: _OVI[11]=1
N139810 RET
N139820 _AL1: _OVI[9]=61318
N139830 SETAL(_OVI[9])
N139840 RET
N139850 _AL5: _OVI[9]=61320
N139860 SETAL(_OVI[9])
N139870 RET
N139880 _AL7: _OVI[9]=61319
N139890 SETAL(_OVI[9])
N139900 RET
N139910 _AL8: _OVI[9]=61328
N139920 SETAL(_OVI[9])
N139930 RET
N139940 _AL11: _OVI[9]=61342
N139950 SETAL(_OVI[9])
N139960 RET
N139970 _AL12: _OVI[9]=61345
N139980 SETAL(_OVI[9])
N139990 RET
N140000 _AL20: _OVI[9]=61404
N140010 SETAL(_OVI[9])
N140020 RET
N140030 _AL21: _OVI[9]=61405
N140040 SETAL(_OVI[9])
N140050 RET
N140060 _AL22: _OVI[9]=61406
N140070 SETAL(_OVI[9])
N140080 RET
N140090 _AL24: _OVI[9]=61408
N140100 SETAL(_OVI[9])
N140110 RET
N140120 _AL25: _OVI[9]=61409
N140130 SETAL(_OVI[9])
N140140 RET
N140150 _AL26: _OVI[9]=61410
N140160 SETAL(_OVI[9])
N140170 RET
N140180 _AL27: _ALARM=61016
N140190 RET
N140200 _AL28: _OVI[9]=61404
N140210 SETAL(_OVI[9])
N140220 RET
N140230 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N140240 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N140250 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N140260 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N140270 DEF STRING[2] _COMP
N140280 DEF STRING[32] _I_TENV
N140290 DEF STRING[128] _STR_PROT
N140300 IF ($AN_NCK_VERSION<990000)
N140310   GOTOF _AL11
N140320 ENDIF
N140330 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N140340   RET
N140350 ENDIF
N140360 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N140370 _MWBILD: _I_K=_I_K MOD 100
N140380 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N140390 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N140400 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N140410 GOTOF _FINMW_1
N140420 _PA2A: _OVR[20]=_OVR[20]/_I_K
N140430 _FINMW_1: RET
N140440 _FINMW_2: _I_CH_6=1
N140450 RET
N140460 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N140470 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N140480   RET
N140490 ENDIF
N140500 IF (_OVI[6]==0) GOTOF _MT1
N140510 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N140520 _MT1: _I_MA=_MA
N140530 IF (_OVI[2]==974) OR (_OVI[2]==994)
N140540   _I_MA=(_I_MA MOD 10)
N140550   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N140560     _I_MA=2
N140570   ENDIF
N140580 ENDIF
N140590 IF (_KNUM==0)
N140600   RET
N140610 ENDIF
N140620 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N140630   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N140640   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N140650 ELSE
N140660   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N140670 ENDIF
N140680 _OVI[0]=_T_7
N140690 IF (_DFLACH)
N140700   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N140710 ELSE
N140720   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N140730 ENDIF
N140740 _SD42950=$SC_TOOL_LENGTH_TYPE
N140750 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N140760   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N140770     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N140780       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N140790     ENDIF
N140800     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N140810       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N140820       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N140830         IF (_T_4==0)
N140840           _T_4=1
N140850         ELSE
N140860           _T_4=0
N140870         ENDIF
N140880       ENDIF
N140890     ENDIF
N140900   ENDIF
N140910   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N140920     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N140930       IF ($SC_TOOL_LENGTH_CONST_T==19)
N140940         _I_PROT=1
N140950         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N140960           IF (_T_3==3)
N140970             _T_3=1 _H_T_3=3
N140980           ELSE
N140990             IF (_T_3==1)
N141000               _T_3=3 _H_T_3=1
N141010             ELSE
N141020               _T_3=2 _H_T_3=2
N141030             ENDIF
N141040           ENDIF
N141050         ENDIF
N141060         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N141070           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N141080         ENDIF
N141090         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N141100           _T_6=0 _T_3=1 _H_T_3=3
N141110         ENDIF
N141120         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N141130           IF (_T_4==0)
N141140             _T_4=1
N141150           ELSE
N141160             _T_4=0
N141170           ENDIF
N141180         ENDIF
N141190       ENDIF
N141200     ENDIF
N141210   ENDIF
N141220 ENDIF
N141230 IF (_T_2>1)
N141240   IF (_TENV=="")
N141250     GOTOF _AL21
N141260   ENDIF
N141270   _I_TENV=_TENV
N141280   IF (_DFLACH)
N141290     _TCOR=0
N141300   ENDIF
N141310   IF (_TCOR<0)
N141320     GOTOF _AL5
N141330   ENDIF
N141340   IF (_TCOR==0)
N141350     _RETW=GETTENV(_I_TENV,_TDDL)
N141360     _TOUT=_TDDL[0]
N141370     IF (_DFLACH) AND (_T_7==0)
N141380       _TOUT=_TDDL[1]
N141390     ENDIF
N141400   ENDIF
N141410 ELSE
N141420   IF (_TCOR<=0)
N141430     GOTOF _AL5
N141440   ENDIF
N141450   IF (_T_7==0)
N141460     GOTOF _AL8
N141470   ENDIF
N141480   _I_TENV=""
N141490 ENDIF
N141500 IF (_T_3==0)
N141510   IF (_T_6<2)
N141520     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N141530     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N141540     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N141550       IF (NOT(_I_PROT))
N141560         _H_T_3=_I_MA
N141570         IF (_I_MA==1)
N141580           _H_T_3=2
N141590         ELSE
N141600           IF (_I_MA==2)
N141610             _H_T_3=1
N141620           ENDIF
N141630         ENDIF
N141640       ELSE
N141650         IF (_I_MA==3)
N141660           _H_T_3=2 _GEOAX=1
N141670         ENDIF
N141680       ENDIF
N141690       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N141700     ENDIF
N141710   ELSE
N141720     IF (_T_6==2)
N141730       _CORCOMP=6
N141740       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N141750     ENDIF
N141760     _H_T_3=_I_MA
N141770   ENDIF
N141780 ELSE
N141790   IF (_T_3==4)
N141800     _CORCOMP=6
N141810     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N141820   ELSE
N141830     IF (_T_2<2)
N141840       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N141850         IF (_H_T_3<>1)
N141860           IF (_H_T_3==2)
N141870             _H_T_3=1
N141880           ELSE
N141890             _H_T_3=0
N141900           ENDIF
N141910         ELSE
N141920           _H_T_3=2
N141930         ENDIF
N141940         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N141950         IF (_HI_GG<0)
N141960           IF (_H_T_3==0)
N141970             _H_T_3=1
N141980           ELSE
N141990             IF (_H_T_3==1)
N142000               _H_T_3=0
N142010             ENDIF
N142020           ENDIF
N142030         ENDIF
N142040         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N142050         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N142060         _H_T_3=_T_3
N142070       ENDIF
N142080       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N142090         IF (NOT(_I_PROT))
N142100           IF (_H_T_3<>1)
N142110             IF (_H_T_3==2)
N142120               _H_T_3=0
N142130             ELSE
N142140               _H_T_3=2
N142150             ENDIF
N142160           ENDIF
N142170           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N142180           IF (_HI_GG<0)
N142190             IF (_H_T_3==0)
N142200               _H_T_3=1
N142210             ELSE
N142220               IF (_H_T_3==1)
N142230                 _H_T_3=0
N142240               ENDIF
N142250             ENDIF
N142260           ENDIF
N142270           _GEOAX=_H_T_3
N142280         ELSE
N142290           _GEOAX=_T_3-1
N142300         ENDIF
N142310         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N142320         IF (NOT(_I_PROT))
N142330           _H_T_3=_T_3
N142340         ENDIF
N142350         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N142360       ENDIF
N142370     ELSE
N142380       _GEOAX=0 _CORCOMP=_T_3+2
N142390     ENDIF
N142400   ENDIF
N142410 ENDIF
N142420 IF ((_T_2==0) OR (_T_2==2))
N142430   IF (_I_CH_6==0)
N142440     _COMP="W" _CORMODE=1 _I_PROT=9
N142450   ELSE
N142460     _COMP="GW" _CORMODE=3 _I_PROT=0
N142470   ENDIF
N142480   IF (_DFLACH)
N142490     IF (_CORCOMP==0)
N142500       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N142510       EXECSTRING(_STR_PROT)
N142520       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N142530       IF (_H_T_3==3)
N142540         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N142550       ELSE
N142560         IF (_H_T_3==2)
N142570           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N142580         ELSE
N142590           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N142600         ENDIF
N142610       ENDIF
N142620     ELSE
N142630       IF (_CORCOMP==6)
N142640         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N142650         EXECSTRING(_STR_PROT)
N142660         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N142670       ENDIF
N142680     ENDIF
N142690   ELSE
N142700     IF (_CORCOMP==0)
N142710       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N142720       EXECSTRING(_STR_PROT)
N142730       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N142740       IF (_H_T_3==3)
N142750         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N142760       ELSE
N142770         IF (_H_T_3==2)
N142780           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N142790         ELSE
N142800           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N142810         ENDIF
N142820       ENDIF
N142830     ELSE
N142840       IF (_CORCOMP==6)
N142850         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N142860         EXECSTRING(_STR_PROT)
N142870         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N142880       ENDIF
N142890     ENDIF
N142900   ENDIF
N142910 ELSE
N142920   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N142930     GOTOF _AL22
N142940   ENDIF
N142950   IF (_DLNUM<0)
N142960     GOTOF _AL22
N142970   ELSE
N142980     IF ((_DLNUM==0) AND (_T_2<2))
N142990       GOTOF _AL22
N143000     ENDIF
N143010   ENDIF
N143020   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N143030     GOTOF _AL24
N143040   ENDIF
N143050   _OVI[13]=_DLNUM
N143060   IF (_I_CH_8==1)
N143070     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N143080       GOTOF _AL25
N143090     ENDIF
N143100     _COMP="E" _CORMODE=1
N143110   ELSE
N143120     IF (_I_CH_6==0)
N143130       _COMP="S" _CORMODE=1
N143140     ELSE
N143150       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N143160         GOTOF _AL25
N143170       ENDIF
N143180       _COMP="ES" _CORMODE=3
N143190     ENDIF
N143200   ENDIF
N143210   IF (_DFLACH)
N143220     IF (_CORCOMP==0)
N143230       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N143240       EXECSTRING(_STR_PROT)
N143250       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N143260       IF (_H_T_3==3)
N143270         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N143280       ELSE
N143290         IF (_H_T_3==2)
N143300           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N143310         ELSE
N143320           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N143330         ENDIF
N143340       ENDIF
N143350     ELSE
N143360       IF (_CORCOMP==6)
N143370         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N143380         EXECSTRING(_STR_PROT)
N143390         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N143400       ENDIF
N143410     ENDIF
N143420   ELSE
N143430     IF (_CORCOMP==0)
N143440       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N143450       EXECSTRING(_STR_PROT)
N143460       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N143470       IF (_H_T_3==3)
N143480         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N143490       ELSE
N143500         IF (_H_T_3==2)
N143510           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N143520         ELSE
N143530           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N143540         ENDIF
N143550       ENDIF
N143560     ELSE
N143570       IF (_CORCOMP==6)
N143580         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N143590         EXECSTRING(_STR_PROT)
N143600         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N143610       ENDIF
N143620     ENDIF
N143630   ENDIF
N143640 ENDIF
N143650 _H_TC=$P_TC
N143660 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N143670   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N143680   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N143690   TCARR=0
N143700   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N143710     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N143720   ENDIF
N143730   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N143740     PAROTOF
N143750   ENDIF
N143760   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N143770 ENDIF
N143780 IF (_HI_GG) AND (_T_2<2)
N143790   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N143800   G[6]=_HI_GG
N143810 ENDIF
N143820 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N143830   IF (_T_4==1)
N143840     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N143850   ENDIF
N143860   _CORVAL[0]=_H_OVR20
N143870   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N143880     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N143890   ENDIF
N143900 ELSE
N143910   IF (_T_4==1)
N143920     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N143930   ENDIF
N143940   _CORVAL[0]=_H_OVR20
N143950 ENDIF
N143960 IF ((_DLNUM==0) AND (_T_2==3))
N143970   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N143980 ELSE
N143990   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N144000 ENDIF
N144010 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N144020   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N144030     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N144040   ENDIF
N144050 ENDIF
N144060 IF (_HR_GG AND (_T_2<2))
N144070   G[6]=_HR_GG
N144080 ENDIF
N144090 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N144100   $P_CYCFRAME=CTRANS()
N144110   _T_7=_T_5 MOD 1000
N144120   G[8]=_T_7
N144130   TCARR=_H_TC
N144140   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N144150     _T_7=_T_5 DIV 1000 MOD 100
N144160     G[52]=_T_7
N144170   ENDIF
N144180   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N144190     _T_7=_T_5 DIV 100000 MOD 100
N144200     G[53]=_T_7
N144210   ENDIF
N144220 ENDIF
N144230 IF (_OVI[12]<>0)
N144240   _OVI[11]=0
N144250   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N144260 ENDIF
N144270 _FIN: _OVI[11]=1
N144280 RET
N144290 _AL1: _OVI[9]=61318
N144300 SETAL(_OVI[9])
N144310 RET
N144320 _AL5: _OVI[9]=61320
N144330 SETAL(_OVI[9])
N144340 RET
N144350 _AL7: _OVI[9]=61319
N144360 SETAL(_OVI[9])
N144370 RET
N144380 _AL8: _OVI[9]=61328
N144390 SETAL(_OVI[9])
N144400 RET
N144410 _AL11: _OVI[9]=61342
N144420 SETAL(_OVI[9])
N144430 RET
N144440 _AL12: _OVI[9]=61345
N144450 SETAL(_OVI[9])
N144460 RET
N144470 _AL20: _OVI[9]=61404
N144480 SETAL(_OVI[9])
N144490 RET
N144500 _AL21: _OVI[9]=61405
N144510 SETAL(_OVI[9])
N144520 RET
N144530 _AL22: _OVI[9]=61406
N144540 SETAL(_OVI[9])
N144550 RET
N144560 _AL24: _OVI[9]=61408
N144570 SETAL(_OVI[9])
N144580 RET
N144590 _AL25: _OVI[9]=61409
N144600 SETAL(_OVI[9])
N144610 RET
N144620 _AL26: _OVI[9]=61410
N144630 SETAL(_OVI[9])
N144640 RET
N144650 _AL27: _ALARM=61016
N144660 RET
N144670 _AL28: _OVI[9]=61404
N144680 SETAL(_OVI[9])
N144690 RET
N144700 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N144710 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N144720 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N144730 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N144740 DEF STRING[2] _COMP
N144750 DEF STRING[32] _I_TENV
N144760 DEF STRING[128] _STR_PROT
N144770 IF ($AN_NCK_VERSION<990000)
N144780   GOTOF _AL11
N144790 ENDIF
N144800 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N144810   RET
N144820 ENDIF
N144830 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N144840 _MWBILD: _I_K=_I_K MOD 100
N144850 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N144860 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N144870 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N144880 GOTOF _FINMW_1
N144890 _PA2A: _OVR[20]=_OVR[20]/_I_K
N144900 _FINMW_1: RET
N144910 _FINMW_2: _I_CH_6=1
N144920 RET
N144930 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N144940 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N144950   RET
N144960 ENDIF
N144970 IF (_OVI[6]==0) GOTOF _MT1
N144980 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N144990 _MT1: _I_MA=_MA
N145000 IF (_OVI[2]==974) OR (_OVI[2]==994)
N145010   _I_MA=(_I_MA MOD 10)
N145020   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N145030     _I_MA=2
N145040   ENDIF
N145050 ENDIF
N145060 IF (_KNUM==0)
N145070   RET
N145080 ENDIF
N145090 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N145100   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N145110   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N145120 ELSE
N145130   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N145140 ENDIF
N145150 _OVI[0]=_T_7
N145160 IF (_DFLACH)
N145170   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N145180 ELSE
N145190   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N145200 ENDIF
N145210 _SD42950=$SC_TOOL_LENGTH_TYPE
N145220 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N145230   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N145240     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N145250       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N145260     ENDIF
N145270     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N145280       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N145290       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N145300         IF (_T_4==0)
N145310           _T_4=1
N145320         ELSE
N145330           _T_4=0
N145340         ENDIF
N145350       ENDIF
N145360     ENDIF
N145370   ENDIF
N145380   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N145390     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N145400       IF ($SC_TOOL_LENGTH_CONST_T==19)
N145410         _I_PROT=1
N145420         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N145430           IF (_T_3==3)
N145440             _T_3=1 _H_T_3=3
N145450           ELSE
N145460             IF (_T_3==1)
N145470               _T_3=3 _H_T_3=1
N145480             ELSE
N145490               _T_3=2 _H_T_3=2
N145500             ENDIF
N145510           ENDIF
N145520         ENDIF
N145530         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N145540           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N145550         ENDIF
N145560         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N145570           _T_6=0 _T_3=1 _H_T_3=3
N145580         ENDIF
N145590         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N145600           IF (_T_4==0)
N145610             _T_4=1
N145620           ELSE
N145630             _T_4=0
N145640           ENDIF
N145650         ENDIF
N145660       ENDIF
N145670     ENDIF
N145680   ENDIF
N145690 ENDIF
N145700 IF (_T_2>1)
N145710   IF (_TENV=="")
N145720     GOTOF _AL21
N145730   ENDIF
N145740   _I_TENV=_TENV
N145750   IF (_DFLACH)
N145760     _TCOR=0
N145770   ENDIF
N145780   IF (_TCOR<0)
N145790     GOTOF _AL5
N145800   ENDIF
N145810   IF (_TCOR==0)
N145820     _RETW=GETTENV(_I_TENV,_TDDL)
N145830     _TOUT=_TDDL[0]
N145840     IF (_DFLACH) AND (_T_7==0)
N145850       _TOUT=_TDDL[1]
N145860     ENDIF
N145870   ENDIF
N145880 ELSE
N145890   IF (_TCOR<=0)
N145900     GOTOF _AL5
N145910   ENDIF
N145920   IF (_T_7==0)
N145930     GOTOF _AL8
N145940   ENDIF
N145950   _I_TENV=""
N145960 ENDIF
N145970 IF (_T_3==0)
N145980   IF (_T_6<2)
N145990     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N146000     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N146010     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N146020       IF (NOT(_I_PROT))
N146030         _H_T_3=_I_MA
N146040         IF (_I_MA==1)
N146050           _H_T_3=2
N146060         ELSE
N146070           IF (_I_MA==2)
N146080             _H_T_3=1
N146090           ENDIF
N146100         ENDIF
N146110       ELSE
N146120         IF (_I_MA==3)
N146130           _H_T_3=2 _GEOAX=1
N146140         ENDIF
N146150       ENDIF
N146160       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N146170     ENDIF
N146180   ELSE
N146190     IF (_T_6==2)
N146200       _CORCOMP=6
N146210       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N146220     ENDIF
N146230     _H_T_3=_I_MA
N146240   ENDIF
N146250 ELSE
N146260   IF (_T_3==4)
N146270     _CORCOMP=6
N146280     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N146290   ELSE
N146300     IF (_T_2<2)
N146310       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N146320         IF (_H_T_3<>1)
N146330           IF (_H_T_3==2)
N146340             _H_T_3=1
N146350           ELSE
N146360             _H_T_3=0
N146370           ENDIF
N146380         ELSE
N146390           _H_T_3=2
N146400         ENDIF
N146410         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N146420         IF (_HI_GG<0)
N146430           IF (_H_T_3==0)
N146440             _H_T_3=1
N146450           ELSE
N146460             IF (_H_T_3==1)
N146470               _H_T_3=0
N146480             ENDIF
N146490           ENDIF
N146500         ENDIF
N146510         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N146520         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N146530         _H_T_3=_T_3
N146540       ENDIF
N146550       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N146560         IF (NOT(_I_PROT))
N146570           IF (_H_T_3<>1)
N146580             IF (_H_T_3==2)
N146590               _H_T_3=0
N146600             ELSE
N146610               _H_T_3=2
N146620             ENDIF
N146630           ENDIF
N146640           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N146650           IF (_HI_GG<0)
N146660             IF (_H_T_3==0)
N146670               _H_T_3=1
N146680             ELSE
N146690               IF (_H_T_3==1)
N146700                 _H_T_3=0
N146710               ENDIF
N146720             ENDIF
N146730           ENDIF
N146740           _GEOAX=_H_T_3
N146750         ELSE
N146760           _GEOAX=_T_3-1
N146770         ENDIF
N146780         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N146790         IF (NOT(_I_PROT))
N146800           _H_T_3=_T_3
N146810         ENDIF
N146820         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N146830       ENDIF
N146840     ELSE
N146850       _GEOAX=0 _CORCOMP=_T_3+2
N146860     ENDIF
N146870   ENDIF
N146880 ENDIF
N146890 IF ((_T_2==0) OR (_T_2==2))
N146900   IF (_I_CH_6==0)
N146910     _COMP="W" _CORMODE=1 _I_PROT=9
N146920   ELSE
N146930     _COMP="GW" _CORMODE=3 _I_PROT=0
N146940   ENDIF
N146950   IF (_DFLACH)
N146960     IF (_CORCOMP==0)
N146970       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N146980       EXECSTRING(_STR_PROT)
N146990       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N147000       IF (_H_T_3==3)
N147010         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N147020       ELSE
N147030         IF (_H_T_3==2)
N147040           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N147050         ELSE
N147060           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N147070         ENDIF
N147080       ENDIF
N147090     ELSE
N147100       IF (_CORCOMP==6)
N147110         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N147120         EXECSTRING(_STR_PROT)
N147130         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N147140       ENDIF
N147150     ENDIF
N147160   ELSE
N147170     IF (_CORCOMP==0)
N147180       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N147190       EXECSTRING(_STR_PROT)
N147200       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N147210       IF (_H_T_3==3)
N147220         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N147230       ELSE
N147240         IF (_H_T_3==2)
N147250           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N147260         ELSE
N147270           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N147280         ENDIF
N147290       ENDIF
N147300     ELSE
N147310       IF (_CORCOMP==6)
N147320         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N147330         EXECSTRING(_STR_PROT)
N147340         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N147350       ENDIF
N147360     ENDIF
N147370   ENDIF
N147380 ELSE
N147390   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N147400     GOTOF _AL22
N147410   ENDIF
N147420   IF (_DLNUM<0)
N147430     GOTOF _AL22
N147440   ELSE
N147450     IF ((_DLNUM==0) AND (_T_2<2))
N147460       GOTOF _AL22
N147470     ENDIF
N147480   ENDIF
N147490   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N147500     GOTOF _AL24
N147510   ENDIF
N147520   _OVI[13]=_DLNUM
N147530   IF (_I_CH_8==1)
N147540     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N147550       GOTOF _AL25
N147560     ENDIF
N147570     _COMP="E" _CORMODE=1
N147580   ELSE
N147590     IF (_I_CH_6==0)
N147600       _COMP="S" _CORMODE=1
N147610     ELSE
N147620       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N147630         GOTOF _AL25
N147640       ENDIF
N147650       _COMP="ES" _CORMODE=3
N147660     ENDIF
N147670   ENDIF
N147680   IF (_DFLACH)
N147690     IF (_CORCOMP==0)
N147700       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N147710       EXECSTRING(_STR_PROT)
N147720       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N147730       IF (_H_T_3==3)
N147740         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N147750       ELSE
N147760         IF (_H_T_3==2)
N147770           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N147780         ELSE
N147790           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N147800         ENDIF
N147810       ENDIF
N147820     ELSE
N147830       IF (_CORCOMP==6)
N147840         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N147850         EXECSTRING(_STR_PROT)
N147860         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N147870       ENDIF
N147880     ENDIF
N147890   ELSE
N147900     IF (_CORCOMP==0)
N147910       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N147920       EXECSTRING(_STR_PROT)
N147930       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N147940       IF (_H_T_3==3)
N147950         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N147960       ELSE
N147970         IF (_H_T_3==2)
N147980           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N147990         ELSE
N148000           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N148010         ENDIF
N148020       ENDIF
N148030     ELSE
N148040       IF (_CORCOMP==6)
N148050         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N148060         EXECSTRING(_STR_PROT)
N148070         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N148080       ENDIF
N148090     ENDIF
N148100   ENDIF
N148110 ENDIF
N148120 _H_TC=$P_TC
N148130 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N148140   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N148150   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N148160   TCARR=0
N148170   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N148180     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N148190   ENDIF
N148200   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N148210     PAROTOF
N148220   ENDIF
N148230   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N148240 ENDIF
N148250 IF (_HI_GG) AND (_T_2<2)
N148260   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N148270   G[6]=_HI_GG
N148280 ENDIF
N148290 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N148300   IF (_T_4==1)
N148310     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N148320   ENDIF
N148330   _CORVAL[0]=_H_OVR20
N148340   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N148350     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N148360   ENDIF
N148370 ELSE
N148380   IF (_T_4==1)
N148390     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N148400   ENDIF
N148410   _CORVAL[0]=_H_OVR20
N148420 ENDIF
N148430 IF ((_DLNUM==0) AND (_T_2==3))
N148440   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N148450 ELSE
N148460   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N148470 ENDIF
N148480 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N148490   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N148500     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N148510   ENDIF
N148520 ENDIF
N148530 IF (_HR_GG AND (_T_2<2))
N148540   G[6]=_HR_GG
N148550 ENDIF
N148560 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N148570   $P_CYCFRAME=CTRANS()
N148580   _T_7=_T_5 MOD 1000
N148590   G[8]=_T_7
N148600   TCARR=_H_TC
N148610   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N148620     _T_7=_T_5 DIV 1000 MOD 100
N148630     G[52]=_T_7
N148640   ENDIF
N148650   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N148660     _T_7=_T_5 DIV 100000 MOD 100
N148670     G[53]=_T_7
N148680   ENDIF
N148690 ENDIF
N148700 IF (_OVI[12]<>0)
N148710   _OVI[11]=0
N148720   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N148730 ENDIF
N148740 _FIN: _OVI[11]=1
N148750 RET
N148760 _AL1: _OVI[9]=61318
N148770 SETAL(_OVI[9])
N148780 RET
N148790 _AL5: _OVI[9]=61320
N148800 SETAL(_OVI[9])
N148810 RET
N148820 _AL7: _OVI[9]=61319
N148830 SETAL(_OVI[9])
N148840 RET
N148850 _AL8: _OVI[9]=61328
N148860 SETAL(_OVI[9])
N148870 RET
N148880 _AL11: _OVI[9]=61342
N148890 SETAL(_OVI[9])
N148900 RET
N148910 _AL12: _OVI[9]=61345
N148920 SETAL(_OVI[9])
N148930 RET
N148940 _AL20: _OVI[9]=61404
N148950 SETAL(_OVI[9])
N148960 RET
N148970 _AL21: _OVI[9]=61405
N148980 SETAL(_OVI[9])
N148990 RET
N149000 _AL22: _OVI[9]=61406
N149010 SETAL(_OVI[9])
N149020 RET
N149030 _AL24: _OVI[9]=61408
N149040 SETAL(_OVI[9])
N149050 RET
N149060 _AL25: _OVI[9]=61409
N149070 SETAL(_OVI[9])
N149080 RET
N149090 _AL26: _OVI[9]=61410
N149100 SETAL(_OVI[9])
N149110 RET
N149120 _AL27: _ALARM=61016
N149130 RET
N149140 _AL28: _OVI[9]=61404
N149150 SETAL(_OVI[9])
N149160 RET
N149170 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N149180 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N149190 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N149200 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N149210 DEF STRING[2] _COMP
N149220 DEF STRING[32] _I_TENV
N149230 DEF STRING[128] _STR_PROT
N149240 IF ($AN_NCK_VERSION<990000)
N149250   GOTOF _AL11
N149260 ENDIF
N149270 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N149280   RET
N149290 ENDIF
N149300 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N149310 _MWBILD: _I_K=_I_K MOD 100
N149320 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N149330 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N149340 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N149350 GOTOF _FINMW_1
N149360 _PA2A: _OVR[20]=_OVR[20]/_I_K
N149370 _FINMW_1: RET
N149380 _FINMW_2: _I_CH_6=1
N149390 RET
N149400 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N149410 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N149420   RET
N149430 ENDIF
N149440 IF (_OVI[6]==0) GOTOF _MT1
N149450 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N149460 _MT1: _I_MA=_MA
N149470 IF (_OVI[2]==974) OR (_OVI[2]==994)
N149480   _I_MA=(_I_MA MOD 10)
N149490   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N149500     _I_MA=2
N149510   ENDIF
N149520 ENDIF
N149530 IF (_KNUM==0)
N149540   RET
N149550 ENDIF
N149560 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N149570   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N149580   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N149590 ELSE
N149600   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N149610 ENDIF
N149620 _OVI[0]=_T_7
N149630 IF (_DFLACH)
N149640   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N149650 ELSE
N149660   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N149670 ENDIF
N149680 _SD42950=$SC_TOOL_LENGTH_TYPE
N149690 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N149700   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N149710     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N149720       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N149730     ENDIF
N149740     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N149750       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N149760       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N149770         IF (_T_4==0)
N149780           _T_4=1
N149790         ELSE
N149800           _T_4=0
N149810         ENDIF
N149820       ENDIF
N149830     ENDIF
N149840   ENDIF
N149850   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N149860     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N149870       IF ($SC_TOOL_LENGTH_CONST_T==19)
N149880         _I_PROT=1
N149890         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N149900           IF (_T_3==3)
N149910             _T_3=1 _H_T_3=3
N149920           ELSE
N149930             IF (_T_3==1)
N149940               _T_3=3 _H_T_3=1
N149950             ELSE
N149960               _T_3=2 _H_T_3=2
N149970             ENDIF
N149980           ENDIF
N149990         ENDIF
N150000         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N150010           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N150020         ENDIF
N150030         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N150040           _T_6=0 _T_3=1 _H_T_3=3
N150050         ENDIF
N150060         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N150070           IF (_T_4==0)
N150080             _T_4=1
N150090           ELSE
N150100             _T_4=0
N150110           ENDIF
N150120         ENDIF
N150130       ENDIF
N150140     ENDIF
N150150   ENDIF
N150160 ENDIF
N150170 IF (_T_2>1)
N150180   IF (_TENV=="")
N150190     GOTOF _AL21
N150200   ENDIF
N150210   _I_TENV=_TENV
N150220   IF (_DFLACH)
N150230     _TCOR=0
N150240   ENDIF
N150250   IF (_TCOR<0)
N150260     GOTOF _AL5
N150270   ENDIF
N150280   IF (_TCOR==0)
N150290     _RETW=GETTENV(_I_TENV,_TDDL)
N150300     _TOUT=_TDDL[0]
N150310     IF (_DFLACH) AND (_T_7==0)
N150320       _TOUT=_TDDL[1]
N150330     ENDIF
N150340   ENDIF
N150350 ELSE
N150360   IF (_TCOR<=0)
N150370     GOTOF _AL5
N150380   ENDIF
N150390   IF (_T_7==0)
N150400     GOTOF _AL8
N150410   ENDIF
N150420   _I_TENV=""
N150430 ENDIF
N150440 IF (_T_3==0)
N150450   IF (_T_6<2)
N150460     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N150470     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N150480     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N150490       IF (NOT(_I_PROT))
N150500         _H_T_3=_I_MA
N150510         IF (_I_MA==1)
N150520           _H_T_3=2
N150530         ELSE
N150540           IF (_I_MA==2)
N150550             _H_T_3=1
N150560           ENDIF
N150570         ENDIF
N150580       ELSE
N150590         IF (_I_MA==3)
N150600           _H_T_3=2 _GEOAX=1
N150610         ENDIF
N150620       ENDIF
N150630       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N150640     ENDIF
N150650   ELSE
N150660     IF (_T_6==2)
N150670       _CORCOMP=6
N150680       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N150690     ENDIF
N150700     _H_T_3=_I_MA
N150710   ENDIF
N150720 ELSE
N150730   IF (_T_3==4)
N150740     _CORCOMP=6
N150750     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N150760   ELSE
N150770     IF (_T_2<2)
N150780       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N150790         IF (_H_T_3<>1)
N150800           IF (_H_T_3==2)
N150810             _H_T_3=1
N150820           ELSE
N150830             _H_T_3=0
N150840           ENDIF
N150850         ELSE
N150860           _H_T_3=2
N150870         ENDIF
N150880         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N150890         IF (_HI_GG<0)
N150900           IF (_H_T_3==0)
N150910             _H_T_3=1
N150920           ELSE
N150930             IF (_H_T_3==1)
N150940               _H_T_3=0
N150950             ENDIF
N150960           ENDIF
N150970         ENDIF
N150980         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N150990         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N151000         _H_T_3=_T_3
N151010       ENDIF
N151020       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N151030         IF (NOT(_I_PROT))
N151040           IF (_H_T_3<>1)
N151050             IF (_H_T_3==2)
N151060               _H_T_3=0
N151070             ELSE
N151080               _H_T_3=2
N151090             ENDIF
N151100           ENDIF
N151110           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N151120           IF (_HI_GG<0)
N151130             IF (_H_T_3==0)
N151140               _H_T_3=1
N151150             ELSE
N151160               IF (_H_T_3==1)
N151170                 _H_T_3=0
N151180               ENDIF
N151190             ENDIF
N151200           ENDIF
N151210           _GEOAX=_H_T_3
N151220         ELSE
N151230           _GEOAX=_T_3-1
N151240         ENDIF
N151250         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N151260         IF (NOT(_I_PROT))
N151270           _H_T_3=_T_3
N151280         ENDIF
N151290         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N151300       ENDIF
N151310     ELSE
N151320       _GEOAX=0 _CORCOMP=_T_3+2
N151330     ENDIF
N151340   ENDIF
N151350 ENDIF
N151360 IF ((_T_2==0) OR (_T_2==2))
N151370   IF (_I_CH_6==0)
N151380     _COMP="W" _CORMODE=1 _I_PROT=9
N151390   ELSE
N151400     _COMP="GW" _CORMODE=3 _I_PROT=0
N151410   ENDIF
N151420   IF (_DFLACH)
N151430     IF (_CORCOMP==0)
N151440       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N151450       EXECSTRING(_STR_PROT)
N151460       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N151470       IF (_H_T_3==3)
N151480         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N151490       ELSE
N151500         IF (_H_T_3==2)
N151510           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N151520         ELSE
N151530           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N151540         ENDIF
N151550       ENDIF
N151560     ELSE
N151570       IF (_CORCOMP==6)
N151580         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N151590         EXECSTRING(_STR_PROT)
N151600         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N151610       ENDIF
N151620     ENDIF
N151630   ELSE
N151640     IF (_CORCOMP==0)
N151650       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N151660       EXECSTRING(_STR_PROT)
N151670       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N151680       IF (_H_T_3==3)
N151690         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N151700       ELSE
N151710         IF (_H_T_3==2)
N151720           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N151730         ELSE
N151740           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N151750         ENDIF
N151760       ENDIF
N151770     ELSE
N151780       IF (_CORCOMP==6)
N151790         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N151800         EXECSTRING(_STR_PROT)
N151810         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N151820       ENDIF
N151830     ENDIF
N151840   ENDIF
N151850 ELSE
N151860   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N151870     GOTOF _AL22
N151880   ENDIF
N151890   IF (_DLNUM<0)
N151900     GOTOF _AL22
N151910   ELSE
N151920     IF ((_DLNUM==0) AND (_T_2<2))
N151930       GOTOF _AL22
N151940     ENDIF
N151950   ENDIF
N151960   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N151970     GOTOF _AL24
N151980   ENDIF
N151990   _OVI[13]=_DLNUM
N152000   IF (_I_CH_8==1)
N152010     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N152020       GOTOF _AL25
N152030     ENDIF
N152040     _COMP="E" _CORMODE=1
N152050   ELSE
N152060     IF (_I_CH_6==0)
N152070       _COMP="S" _CORMODE=1
N152080     ELSE
N152090       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N152100         GOTOF _AL25
N152110       ENDIF
N152120       _COMP="ES" _CORMODE=3
N152130     ENDIF
N152140   ENDIF
N152150   IF (_DFLACH)
N152160     IF (_CORCOMP==0)
N152170       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N152180       EXECSTRING(_STR_PROT)
N152190       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N152200       IF (_H_T_3==3)
N152210         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N152220       ELSE
N152230         IF (_H_T_3==2)
N152240           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N152250         ELSE
N152260           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N152270         ENDIF
N152280       ENDIF
N152290     ELSE
N152300       IF (_CORCOMP==6)
N152310         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N152320         EXECSTRING(_STR_PROT)
N152330         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N152340       ENDIF
N152350     ENDIF
N152360   ELSE
N152370     IF (_CORCOMP==0)
N152380       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N152390       EXECSTRING(_STR_PROT)
N152400       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N152410       IF (_H_T_3==3)
N152420         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N152430       ELSE
N152440         IF (_H_T_3==2)
N152450           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N152460         ELSE
N152470           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N152480         ENDIF
N152490       ENDIF
N152500     ELSE
N152510       IF (_CORCOMP==6)
N152520         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N152530         EXECSTRING(_STR_PROT)
N152540         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N152550       ENDIF
N152560     ENDIF
N152570   ENDIF
N152580 ENDIF
N152590 _H_TC=$P_TC
N152600 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N152610   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N152620   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N152630   TCARR=0
N152640   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N152650     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N152660   ENDIF
N152670   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N152680     PAROTOF
N152690   ENDIF
N152700   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N152710 ENDIF
N152720 IF (_HI_GG) AND (_T_2<2)
N152730   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N152740   G[6]=_HI_GG
N152750 ENDIF
N152760 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N152770   IF (_T_4==1)
N152780     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N152790   ENDIF
N152800   _CORVAL[0]=_H_OVR20
N152810   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N152820     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N152830   ENDIF
N152840 ELSE
N152850   IF (_T_4==1)
N152860     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N152870   ENDIF
N152880   _CORVAL[0]=_H_OVR20
N152890 ENDIF
N152900 IF ((_DLNUM==0) AND (_T_2==3))
N152910   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N152920 ELSE
N152930   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N152940 ENDIF
N152950 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N152960   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N152970     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N152980   ENDIF
N152990 ENDIF
N153000 IF (_HR_GG AND (_T_2<2))
N153010   G[6]=_HR_GG
N153020 ENDIF
N153030 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N153040   $P_CYCFRAME=CTRANS()
N153050   _T_7=_T_5 MOD 1000
N153060   G[8]=_T_7
N153070   TCARR=_H_TC
N153080   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N153090     _T_7=_T_5 DIV 1000 MOD 100
N153100     G[52]=_T_7
N153110   ENDIF
N153120   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N153130     _T_7=_T_5 DIV 100000 MOD 100
N153140     G[53]=_T_7
N153150   ENDIF
N153160 ENDIF
N153170 IF (_OVI[12]<>0)
N153180   _OVI[11]=0
N153190   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N153200 ENDIF
N153210 _FIN: _OVI[11]=1
N153220 RET
N153230 _AL1: _OVI[9]=61318
N153240 SETAL(_OVI[9])
N153250 RET
N153260 _AL5: _OVI[9]=61320
N153270 SETAL(_OVI[9])
N153280 RET
N153290 _AL7: _OVI[9]=61319
N153300 SETAL(_OVI[9])
N153310 RET
N153320 _AL8: _OVI[9]=61328
N153330 SETAL(_OVI[9])
N153340 RET
N153350 _AL11: _OVI[9]=61342
N153360 SETAL(_OVI[9])
N153370 RET
N153380 _AL12: _OVI[9]=61345
N153390 SETAL(_OVI[9])
N153400 RET
N153410 _AL20: _OVI[9]=61404
N153420 SETAL(_OVI[9])
N153430 RET
N153440 _AL21: _OVI[9]=61405
N153450 SETAL(_OVI[9])
N153460 RET
N153470 _AL22: _OVI[9]=61406
N153480 SETAL(_OVI[9])
N153490 RET
N153500 _AL24: _OVI[9]=61408
N153510 SETAL(_OVI[9])
N153520 RET
N153530 _AL25: _OVI[9]=61409
N153540 SETAL(_OVI[9])
N153550 RET
N153560 _AL26: _OVI[9]=61410
N153570 SETAL(_OVI[9])
N153580 RET
N153590 _AL27: _ALARM=61016
N153600 RET
N153610 _AL28: _OVI[9]=61404
N153620 SETAL(_OVI[9])
N153630 RET
N153640 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N153650 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N153660 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N153670 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N153680 DEF STRING[2] _COMP
N153690 DEF STRING[32] _I_TENV
N153700 DEF STRING[128] _STR_PROT
N153710 IF ($AN_NCK_VERSION<990000)
N153720   GOTOF _AL11
N153730 ENDIF
N153740 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N153750   RET
N153760 ENDIF
N153770 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N153780 _MWBILD: _I_K=_I_K MOD 100
N153790 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N153800 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N153810 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N153820 GOTOF _FINMW_1
N153830 _PA2A: _OVR[20]=_OVR[20]/_I_K
N153840 _FINMW_1: RET
N153850 _FINMW_2: _I_CH_6=1
N153860 RET
N153870 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N153880 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N153890   RET
N153900 ENDIF
N153910 IF (_OVI[6]==0) GOTOF _MT1
N153920 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N153930 _MT1: _I_MA=_MA
N153940 IF (_OVI[2]==974) OR (_OVI[2]==994)
N153950   _I_MA=(_I_MA MOD 10)
N153960   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N153970     _I_MA=2
N153980   ENDIF
N153990 ENDIF
N154000 IF (_KNUM==0)
N154010   RET
N154020 ENDIF
N154030 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N154040   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N154050   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N154060 ELSE
N154070   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N154080 ENDIF
N154090 _OVI[0]=_T_7
N154100 IF (_DFLACH)
N154110   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N154120 ELSE
N154130   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N154140 ENDIF
N154150 _SD42950=$SC_TOOL_LENGTH_TYPE
N154160 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N154170   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N154180     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N154190       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N154200     ENDIF
N154210     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N154220       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N154230       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N154240         IF (_T_4==0)
N154250           _T_4=1
N154260         ELSE
N154270           _T_4=0
N154280         ENDIF
N154290       ENDIF
N154300     ENDIF
N154310   ENDIF
N154320   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N154330     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N154340       IF ($SC_TOOL_LENGTH_CONST_T==19)
N154350         _I_PROT=1
N154360         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N154370           IF (_T_3==3)
N154380             _T_3=1 _H_T_3=3
N154390           ELSE
N154400             IF (_T_3==1)
N154410               _T_3=3 _H_T_3=1
N154420             ELSE
N154430               _T_3=2 _H_T_3=2
N154440             ENDIF
N154450           ENDIF
N154460         ENDIF
N154470         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N154480           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N154490         ENDIF
N154500         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N154510           _T_6=0 _T_3=1 _H_T_3=3
N154520         ENDIF
N154530         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N154540           IF (_T_4==0)
N154550             _T_4=1
N154560           ELSE
N154570             _T_4=0
N154580           ENDIF
N154590         ENDIF
N154600       ENDIF
N154610     ENDIF
N154620   ENDIF
N154630 ENDIF
N154640 IF (_T_2>1)
N154650   IF (_TENV=="")
N154660     GOTOF _AL21
N154670   ENDIF
N154680   _I_TENV=_TENV
N154690   IF (_DFLACH)
N154700     _TCOR=0
N154710   ENDIF
N154720   IF (_TCOR<0)
N154730     GOTOF _AL5
N154740   ENDIF
N154750   IF (_TCOR==0)
N154760     _RETW=GETTENV(_I_TENV,_TDDL)
N154770     _TOUT=_TDDL[0]
N154780     IF (_DFLACH) AND (_T_7==0)
N154790       _TOUT=_TDDL[1]
N154800     ENDIF
N154810   ENDIF
N154820 ELSE
N154830   IF (_TCOR<=0)
N154840     GOTOF _AL5
N154850   ENDIF
N154860   IF (_T_7==0)
N154870     GOTOF _AL8
N154880   ENDIF
N154890   _I_TENV=""
N154900 ENDIF
N154910 IF (_T_3==0)
N154920   IF (_T_6<2)
N154930     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N154940     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N154950     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N154960       IF (NOT(_I_PROT))
N154970         _H_T_3=_I_MA
N154980         IF (_I_MA==1)
N154990           _H_T_3=2
N155000         ELSE
N155010           IF (_I_MA==2)
N155020             _H_T_3=1
N155030           ENDIF
N155040         ENDIF
N155050       ELSE
N155060         IF (_I_MA==3)
N155070           _H_T_3=2 _GEOAX=1
N155080         ENDIF
N155090       ENDIF
N155100       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N155110     ENDIF
N155120   ELSE
N155130     IF (_T_6==2)
N155140       _CORCOMP=6
N155150       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N155160     ENDIF
N155170     _H_T_3=_I_MA
N155180   ENDIF
N155190 ELSE
N155200   IF (_T_3==4)
N155210     _CORCOMP=6
N155220     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N155230   ELSE
N155240     IF (_T_2<2)
N155250       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N155260         IF (_H_T_3<>1)
N155270           IF (_H_T_3==2)
N155280             _H_T_3=1
N155290           ELSE
N155300             _H_T_3=0
N155310           ENDIF
N155320         ELSE
N155330           _H_T_3=2
N155340         ENDIF
N155350         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N155360         IF (_HI_GG<0)
N155370           IF (_H_T_3==0)
N155380             _H_T_3=1
N155390           ELSE
N155400             IF (_H_T_3==1)
N155410               _H_T_3=0
N155420             ENDIF
N155430           ENDIF
N155440         ENDIF
N155450         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N155460         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N155470         _H_T_3=_T_3
N155480       ENDIF
N155490       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N155500         IF (NOT(_I_PROT))
N155510           IF (_H_T_3<>1)
N155520             IF (_H_T_3==2)
N155530               _H_T_3=0
N155540             ELSE
N155550               _H_T_3=2
N155560             ENDIF
N155570           ENDIF
N155580           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N155590           IF (_HI_GG<0)
N155600             IF (_H_T_3==0)
N155610               _H_T_3=1
N155620             ELSE
N155630               IF (_H_T_3==1)
N155640                 _H_T_3=0
N155650               ENDIF
N155660             ENDIF
N155670           ENDIF
N155680           _GEOAX=_H_T_3
N155690         ELSE
N155700           _GEOAX=_T_3-1
N155710         ENDIF
N155720         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N155730         IF (NOT(_I_PROT))
N155740           _H_T_3=_T_3
N155750         ENDIF
N155760         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N155770       ENDIF
N155780     ELSE
N155790       _GEOAX=0 _CORCOMP=_T_3+2
N155800     ENDIF
N155810   ENDIF
N155820 ENDIF
N155830 IF ((_T_2==0) OR (_T_2==2))
N155840   IF (_I_CH_6==0)
N155850     _COMP="W" _CORMODE=1 _I_PROT=9
N155860   ELSE
N155870     _COMP="GW" _CORMODE=3 _I_PROT=0
N155880   ENDIF
N155890   IF (_DFLACH)
N155900     IF (_CORCOMP==0)
N155910       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N155920       EXECSTRING(_STR_PROT)
N155930       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N155940       IF (_H_T_3==3)
N155950         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N155960       ELSE
N155970         IF (_H_T_3==2)
N155980           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N155990         ELSE
N156000           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N156010         ENDIF
N156020       ENDIF
N156030     ELSE
N156040       IF (_CORCOMP==6)
N156050         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N156060         EXECSTRING(_STR_PROT)
N156070         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N156080       ENDIF
N156090     ENDIF
N156100   ELSE
N156110     IF (_CORCOMP==0)
N156120       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N156130       EXECSTRING(_STR_PROT)
N156140       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N156150       IF (_H_T_3==3)
N156160         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N156170       ELSE
N156180         IF (_H_T_3==2)
N156190           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N156200         ELSE
N156210           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N156220         ENDIF
N156230       ENDIF
N156240     ELSE
N156250       IF (_CORCOMP==6)
N156260         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N156270         EXECSTRING(_STR_PROT)
N156280         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N156290       ENDIF
N156300     ENDIF
N156310   ENDIF
N156320 ELSE
N156330   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N156340     GOTOF _AL22
N156350   ENDIF
N156360   IF (_DLNUM<0)
N156370     GOTOF _AL22
N156380   ELSE
N156390     IF ((_DLNUM==0) AND (_T_2<2))
N156400       GOTOF _AL22
N156410     ENDIF
N156420   ENDIF
N156430   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N156440     GOTOF _AL24
N156450   ENDIF
N156460   _OVI[13]=_DLNUM
N156470   IF (_I_CH_8==1)
N156480     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N156490       GOTOF _AL25
N156500     ENDIF
N156510     _COMP="E" _CORMODE=1
N156520   ELSE
N156530     IF (_I_CH_6==0)
N156540       _COMP="S" _CORMODE=1
N156550     ELSE
N156560       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N156570         GOTOF _AL25
N156580       ENDIF
N156590       _COMP="ES" _CORMODE=3
N156600     ENDIF
N156610   ENDIF
N156620   IF (_DFLACH)
N156630     IF (_CORCOMP==0)
N156640       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N156650       EXECSTRING(_STR_PROT)
N156660       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N156670       IF (_H_T_3==3)
N156680         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N156690       ELSE
N156700         IF (_H_T_3==2)
N156710           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N156720         ELSE
N156730           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N156740         ENDIF
N156750       ENDIF
N156760     ELSE
N156770       IF (_CORCOMP==6)
N156780         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N156790         EXECSTRING(_STR_PROT)
N156800         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N156810       ENDIF
N156820     ENDIF
N156830   ELSE
N156840     IF (_CORCOMP==0)
N156850       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N156860       EXECSTRING(_STR_PROT)
N156870       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N156880       IF (_H_T_3==3)
N156890         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N156900       ELSE
N156910         IF (_H_T_3==2)
N156920           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N156930         ELSE
N156940           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N156950         ENDIF
N156960       ENDIF
N156970     ELSE
N156980       IF (_CORCOMP==6)
N156990         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N157000         EXECSTRING(_STR_PROT)
N157010         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N157020       ENDIF
N157030     ENDIF
N157040   ENDIF
N157050 ENDIF
N157060 _H_TC=$P_TC
N157070 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N157080   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N157090   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N157100   TCARR=0
N157110   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N157120     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N157130   ENDIF
N157140   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N157150     PAROTOF
N157160   ENDIF
N157170   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N157180 ENDIF
N157190 IF (_HI_GG) AND (_T_2<2)
N157200   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N157210   G[6]=_HI_GG
N157220 ENDIF
N157230 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N157240   IF (_T_4==1)
N157250     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N157260   ENDIF
N157270   _CORVAL[0]=_H_OVR20
N157280   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N157290     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N157300   ENDIF
N157310 ELSE
N157320   IF (_T_4==1)
N157330     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N157340   ENDIF
N157350   _CORVAL[0]=_H_OVR20
N157360 ENDIF
N157370 IF ((_DLNUM==0) AND (_T_2==3))
N157380   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N157390 ELSE
N157400   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N157410 ENDIF
N157420 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N157430   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N157440     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N157450   ENDIF
N157460 ENDIF
N157470 IF (_HR_GG AND (_T_2<2))
N157480   G[6]=_HR_GG
N157490 ENDIF
N157500 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N157510   $P_CYCFRAME=CTRANS()
N157520   _T_7=_T_5 MOD 1000
N157530   G[8]=_T_7
N157540   TCARR=_H_TC
N157550   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N157560     _T_7=_T_5 DIV 1000 MOD 100
N157570     G[52]=_T_7
N157580   ENDIF
N157590   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N157600     _T_7=_T_5 DIV 100000 MOD 100
N157610     G[53]=_T_7
N157620   ENDIF
N157630 ENDIF
N157640 IF (_OVI[12]<>0)
N157650   _OVI[11]=0
N157660   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N157670 ENDIF
N157680 _FIN: _OVI[11]=1
N157690 RET
N157700 _AL1: _OVI[9]=61318
N157710 SETAL(_OVI[9])
N157720 RET
N157730 _AL5: _OVI[9]=61320
N157740 SETAL(_OVI[9])
N157750 RET
N157760 _AL7: _OVI[9]=61319
N157770 SETAL(_OVI[9])
N157780 RET
N157790 _AL8: _OVI[9]=61328
N157800 SETAL(_OVI[9])
N157810 RET
N157820 _AL11: _OVI[9]=61342
N157830 SETAL(_OVI[9])
N157840 RET
N157850 _AL12: _OVI[9]=61345
N157860 SETAL(_OVI[9])
N157870 RET
N157880 _AL20: _OVI[9]=61404
N157890 SETAL(_OVI[9])
N157900 RET
N157910 _AL21: _OVI[9]=61405
N157920 SETAL(_OVI[9])
N157930 RET
N157940 _AL22: _OVI[9]=61406
N157950 SETAL(_OVI[9])
N157960 RET
N157970 _AL24: _OVI[9]=61408
N157980 SETAL(_OVI[9])
N157990 RET
N158000 _AL25: _OVI[9]=61409
N158010 SETAL(_OVI[9])
N158020 RET
N158030 _AL26: _OVI[9]=61410
N158040 SETAL(_OVI[9])
N158050 RET
N158060 _AL27: _ALARM=61016
N158070 RET
N158080 _AL28: _OVI[9]=61404
N158090 SETAL(_OVI[9])
N158100 RET
N158110 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N158120 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N158130 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N158140 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N158150 DEF STRING[2] _COMP
N158160 DEF STRING[32] _I_TENV
N158170 DEF STRING[128] _STR_PROT
N158180 IF ($AN_NCK_VERSION<990000)
N158190   GOTOF _AL11
N158200 ENDIF
N158210 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N158220   RET
N158230 ENDIF
N158240 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N158250 _MWBILD: _I_K=_I_K MOD 100
N158260 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N158270 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N158280 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N158290 GOTOF _FINMW_1
N158300 _PA2A: _OVR[20]=_OVR[20]/_I_K
N158310 _FINMW_1: RET
N158320 _FINMW_2: _I_CH_6=1
N158330 RET
N158340 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N158350 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N158360   RET
N158370 ENDIF
N158380 IF (_OVI[6]==0) GOTOF _MT1
N158390 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N158400 _MT1: _I_MA=_MA
N158410 IF (_OVI[2]==974) OR (_OVI[2]==994)
N158420   _I_MA=(_I_MA MOD 10)
N158430   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N158440     _I_MA=2
N158450   ENDIF
N158460 ENDIF
N158470 IF (_KNUM==0)
N158480   RET
N158490 ENDIF
N158500 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N158510   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N158520   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N158530 ELSE
N158540   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N158550 ENDIF
N158560 _OVI[0]=_T_7
N158570 IF (_DFLACH)
N158580   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N158590 ELSE
N158600   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N158610 ENDIF
N158620 _SD42950=$SC_TOOL_LENGTH_TYPE
N158630 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N158640   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N158650     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N158660       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N158670     ENDIF
N158680     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N158690       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N158700       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N158710         IF (_T_4==0)
N158720           _T_4=1
N158730         ELSE
N158740           _T_4=0
N158750         ENDIF
N158760       ENDIF
N158770     ENDIF
N158780   ENDIF
N158790   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N158800     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N158810       IF ($SC_TOOL_LENGTH_CONST_T==19)
N158820         _I_PROT=1
N158830         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N158840           IF (_T_3==3)
N158850             _T_3=1 _H_T_3=3
N158860           ELSE
N158870             IF (_T_3==1)
N158880               _T_3=3 _H_T_3=1
N158890             ELSE
N158900               _T_3=2 _H_T_3=2
N158910             ENDIF
N158920           ENDIF
N158930         ENDIF
N158940         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N158950           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N158960         ENDIF
N158970         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N158980           _T_6=0 _T_3=1 _H_T_3=3
N158990         ENDIF
N159000         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N159010           IF (_T_4==0)
N159020             _T_4=1
N159030           ELSE
N159040             _T_4=0
N159050           ENDIF
N159060         ENDIF
N159070       ENDIF
N159080     ENDIF
N159090   ENDIF
N159100 ENDIF
N159110 IF (_T_2>1)
N159120   IF (_TENV=="")
N159130     GOTOF _AL21
N159140   ENDIF
N159150   _I_TENV=_TENV
N159160   IF (_DFLACH)
N159170     _TCOR=0
N159180   ENDIF
N159190   IF (_TCOR<0)
N159200     GOTOF _AL5
N159210   ENDIF
N159220   IF (_TCOR==0)
N159230     _RETW=GETTENV(_I_TENV,_TDDL)
N159240     _TOUT=_TDDL[0]
N159250     IF (_DFLACH) AND (_T_7==0)
N159260       _TOUT=_TDDL[1]
N159270     ENDIF
N159280   ENDIF
N159290 ELSE
N159300   IF (_TCOR<=0)
N159310     GOTOF _AL5
N159320   ENDIF
N159330   IF (_T_7==0)
N159340     GOTOF _AL8
N159350   ENDIF
N159360   _I_TENV=""
N159370 ENDIF
N159380 IF (_T_3==0)
N159390   IF (_T_6<2)
N159400     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N159410     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N159420     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N159430       IF (NOT(_I_PROT))
N159440         _H_T_3=_I_MA
N159450         IF (_I_MA==1)
N159460           _H_T_3=2
N159470         ELSE
N159480           IF (_I_MA==2)
N159490             _H_T_3=1
N159500           ENDIF
N159510         ENDIF
N159520       ELSE
N159530         IF (_I_MA==3)
N159540           _H_T_3=2 _GEOAX=1
N159550         ENDIF
N159560       ENDIF
N159570       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N159580     ENDIF
N159590   ELSE
N159600     IF (_T_6==2)
N159610       _CORCOMP=6
N159620       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N159630     ENDIF
N159640     _H_T_3=_I_MA
N159650   ENDIF
N159660 ELSE
N159670   IF (_T_3==4)
N159680     _CORCOMP=6
N159690     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N159700   ELSE
N159710     IF (_T_2<2)
N159720       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N159730         IF (_H_T_3<>1)
N159740           IF (_H_T_3==2)
N159750             _H_T_3=1
N159760           ELSE
N159770             _H_T_3=0
N159780           ENDIF
N159790         ELSE
N159800           _H_T_3=2
N159810         ENDIF
N159820         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N159830         IF (_HI_GG<0)
N159840           IF (_H_T_3==0)
N159850             _H_T_3=1
N159860           ELSE
N159870             IF (_H_T_3==1)
N159880               _H_T_3=0
N159890             ENDIF
N159900           ENDIF
N159910         ENDIF
N159920         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N159930         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N159940         _H_T_3=_T_3
N159950       ENDIF
N159960       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N159970         IF (NOT(_I_PROT))
N159980           IF (_H_T_3<>1)
N159990             IF (_H_T_3==2)
N160000               _H_T_3=0
N160010             ELSE
N160020               _H_T_3=2
N160030             ENDIF
N160040           ENDIF
N160050           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N160060           IF (_HI_GG<0)
N160070             IF (_H_T_3==0)
N160080               _H_T_3=1
N160090             ELSE
N160100               IF (_H_T_3==1)
N160110                 _H_T_3=0
N160120               ENDIF
N160130             ENDIF
N160140           ENDIF
N160150           _GEOAX=_H_T_3
N160160         ELSE
N160170           _GEOAX=_T_3-1
N160180         ENDIF
N160190         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N160200         IF (NOT(_I_PROT))
N160210           _H_T_3=_T_3
N160220         ENDIF
N160230         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N160240       ENDIF
N160250     ELSE
N160260       _GEOAX=0 _CORCOMP=_T_3+2
N160270     ENDIF
N160280   ENDIF
N160290 ENDIF
N160300 IF ((_T_2==0) OR (_T_2==2))
N160310   IF (_I_CH_6==0)
N160320     _COMP="W" _CORMODE=1 _I_PROT=9
N160330   ELSE
N160340     _COMP="GW" _CORMODE=3 _I_PROT=0
N160350   ENDIF
N160360   IF (_DFLACH)
N160370     IF (_CORCOMP==0)
N160380       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N160390       EXECSTRING(_STR_PROT)
N160400       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N160410       IF (_H_T_3==3)
N160420         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N160430       ELSE
N160440         IF (_H_T_3==2)
N160450           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N160460         ELSE
N160470           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N160480         ENDIF
N160490       ENDIF
N160500     ELSE
N160510       IF (_CORCOMP==6)
N160520         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N160530         EXECSTRING(_STR_PROT)
N160540         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N160550       ENDIF
N160560     ENDIF
N160570   ELSE
N160580     IF (_CORCOMP==0)
N160590       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N160600       EXECSTRING(_STR_PROT)
N160610       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N160620       IF (_H_T_3==3)
N160630         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N160640       ELSE
N160650         IF (_H_T_3==2)
N160660           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N160670         ELSE
N160680           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N160690         ENDIF
N160700       ENDIF
N160710     ELSE
N160720       IF (_CORCOMP==6)
N160730         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N160740         EXECSTRING(_STR_PROT)
N160750         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N160760       ENDIF
N160770     ENDIF
N160780   ENDIF
N160790 ELSE
N160800   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N160810     GOTOF _AL22
N160820   ENDIF
N160830   IF (_DLNUM<0)
N160840     GOTOF _AL22
N160850   ELSE
N160860     IF ((_DLNUM==0) AND (_T_2<2))
N160870       GOTOF _AL22
N160880     ENDIF
N160890   ENDIF
N160900   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N160910     GOTOF _AL24
N160920   ENDIF
N160930   _OVI[13]=_DLNUM
N160940   IF (_I_CH_8==1)
N160950     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N160960       GOTOF _AL25
N160970     ENDIF
N160980     _COMP="E" _CORMODE=1
N160990   ELSE
N161000     IF (_I_CH_6==0)
N161010       _COMP="S" _CORMODE=1
N161020     ELSE
N161030       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N161040         GOTOF _AL25
N161050       ENDIF
N161060       _COMP="ES" _CORMODE=3
N161070     ENDIF
N161080   ENDIF
N161090   IF (_DFLACH)
N161100     IF (_CORCOMP==0)
N161110       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N161120       EXECSTRING(_STR_PROT)
N161130       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N161140       IF (_H_T_3==3)
N161150         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N161160       ELSE
N161170         IF (_H_T_3==2)
N161180           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N161190         ELSE
N161200           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N161210         ENDIF
N161220       ENDIF
N161230     ELSE
N161240       IF (_CORCOMP==6)
N161250         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N161260         EXECSTRING(_STR_PROT)
N161270         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N161280       ENDIF
N161290     ENDIF
N161300   ELSE
N161310     IF (_CORCOMP==0)
N161320       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N161330       EXECSTRING(_STR_PROT)
N161340       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N161350       IF (_H_T_3==3)
N161360         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N161370       ELSE
N161380         IF (_H_T_3==2)
N161390           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N161400         ELSE
N161410           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N161420         ENDIF
N161430       ENDIF
N161440     ELSE
N161450       IF (_CORCOMP==6)
N161460         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N161470         EXECSTRING(_STR_PROT)
N161480         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N161490       ENDIF
N161500     ENDIF
N161510   ENDIF
N161520 ENDIF
N161530 _H_TC=$P_TC
N161540 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N161550   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N161560   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N161570   TCARR=0
N161580   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N161590     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N161600   ENDIF
N161610   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N161620     PAROTOF
N161630   ENDIF
N161640   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N161650 ENDIF
N161660 IF (_HI_GG) AND (_T_2<2)
N161670   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N161680   G[6]=_HI_GG
N161690 ENDIF
N161700 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N161710   IF (_T_4==1)
N161720     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N161730   ENDIF
N161740   _CORVAL[0]=_H_OVR20
N161750   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N161760     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N161770   ENDIF
N161780 ELSE
N161790   IF (_T_4==1)
N161800     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N161810   ENDIF
N161820   _CORVAL[0]=_H_OVR20
N161830 ENDIF
N161840 IF ((_DLNUM==0) AND (_T_2==3))
N161850   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N161860 ELSE
N161870   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N161880 ENDIF
N161890 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N161900   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N161910     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N161920   ENDIF
N161930 ENDIF
N161940 IF (_HR_GG AND (_T_2<2))
N161950   G[6]=_HR_GG
N161960 ENDIF
N161970 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N161980   $P_CYCFRAME=CTRANS()
N161990   _T_7=_T_5 MOD 1000
N162000   G[8]=_T_7
N162010   TCARR=_H_TC
N162020   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N162030     _T_7=_T_5 DIV 1000 MOD 100
N162040     G[52]=_T_7
N162050   ENDIF
N162060   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N162070     _T_7=_T_5 DIV 100000 MOD 100
N162080     G[53]=_T_7
N162090   ENDIF
N162100 ENDIF
N162110 IF (_OVI[12]<>0)
N162120   _OVI[11]=0
N162130   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N162140 ENDIF
N162150 _FIN: _OVI[11]=1
N162160 RET
N162170 _AL1: _OVI[9]=61318
N162180 SETAL(_OVI[9])
N162190 RET
N162200 _AL5: _OVI[9]=61320
N162210 SETAL(_OVI[9])
N162220 RET
N162230 _AL7: _OVI[9]=61319
N162240 SETAL(_OVI[9])
N162250 RET
N162260 _AL8: _OVI[9]=61328
N162270 SETAL(_OVI[9])
N162280 RET
N162290 _AL11: _OVI[9]=61342
N162300 SETAL(_OVI[9])
N162310 RET
N162320 _AL12: _OVI[9]=61345
N162330 SETAL(_OVI[9])
N162340 RET
N162350 _AL20: _OVI[9]=61404
N162360 SETAL(_OVI[9])
N162370 RET
N162380 _AL21: _OVI[9]=61405
N162390 SETAL(_OVI[9])
N162400 RET
N162410 _AL22: _OVI[9]=61406
N162420 SETAL(_OVI[9])
N162430 RET
N162440 _AL24: _OVI[9]=61408
N162450 SETAL(_OVI[9])
N162460 RET
N162470 _AL25: _OVI[9]=61409
N162480 SETAL(_OVI[9])
N162490 RET
N162500 _AL26: _OVI[9]=61410
N162510 SETAL(_OVI[9])
N162520 RET
N162530 _AL27: _ALARM=61016
N162540 RET
N162550 _AL28: _OVI[9]=61404
N162560 SETAL(_OVI[9])
N162570 RET
N162580 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N162590 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N162600 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N162610 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N162620 DEF STRING[2] _COMP
N162630 DEF STRING[32] _I_TENV
N162640 DEF STRING[128] _STR_PROT
N162650 IF ($AN_NCK_VERSION<990000)
N162660   GOTOF _AL11
N162670 ENDIF
N162680 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N162690   RET
N162700 ENDIF
N162710 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N162720 _MWBILD: _I_K=_I_K MOD 100
N162730 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N162740 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N162750 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N162760 GOTOF _FINMW_1
N162770 _PA2A: _OVR[20]=_OVR[20]/_I_K
N162780 _FINMW_1: RET
N162790 _FINMW_2: _I_CH_6=1
N162800 RET
N162810 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N162820 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N162830   RET
N162840 ENDIF
N162850 IF (_OVI[6]==0) GOTOF _MT1
N162860 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N162870 _MT1: _I_MA=_MA
N162880 IF (_OVI[2]==974) OR (_OVI[2]==994)
N162890   _I_MA=(_I_MA MOD 10)
N162900   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N162910     _I_MA=2
N162920   ENDIF
N162930 ENDIF
N162940 IF (_KNUM==0)
N162950   RET
N162960 ENDIF
N162970 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N162980   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N162990   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N163000 ELSE
N163010   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N163020 ENDIF
N163030 _OVI[0]=_T_7
N163040 IF (_DFLACH)
N163050   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N163060 ELSE
N163070   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N163080 ENDIF
N163090 _SD42950=$SC_TOOL_LENGTH_TYPE
N163100 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N163110   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N163120     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N163130       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N163140     ENDIF
N163150     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N163160       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N163170       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N163180         IF (_T_4==0)
N163190           _T_4=1
N163200         ELSE
N163210           _T_4=0
N163220         ENDIF
N163230       ENDIF
N163240     ENDIF
N163250   ENDIF
N163260   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N163270     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N163280       IF ($SC_TOOL_LENGTH_CONST_T==19)
N163290         _I_PROT=1
N163300         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N163310           IF (_T_3==3)
N163320             _T_3=1 _H_T_3=3
N163330           ELSE
N163340             IF (_T_3==1)
N163350               _T_3=3 _H_T_3=1
N163360             ELSE
N163370               _T_3=2 _H_T_3=2
N163380             ENDIF
N163390           ENDIF
N163400         ENDIF
N163410         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N163420           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N163430         ENDIF
N163440         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N163450           _T_6=0 _T_3=1 _H_T_3=3
N163460         ENDIF
N163470         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N163480           IF (_T_4==0)
N163490             _T_4=1
N163500           ELSE
N163510             _T_4=0
N163520           ENDIF
N163530         ENDIF
N163540       ENDIF
N163550     ENDIF
N163560   ENDIF
N163570 ENDIF
N163580 IF (_T_2>1)
N163590   IF (_TENV=="")
N163600     GOTOF _AL21
N163610   ENDIF
N163620   _I_TENV=_TENV
N163630   IF (_DFLACH)
N163640     _TCOR=0
N163650   ENDIF
N163660   IF (_TCOR<0)
N163670     GOTOF _AL5
N163680   ENDIF
N163690   IF (_TCOR==0)
N163700     _RETW=GETTENV(_I_TENV,_TDDL)
N163710     _TOUT=_TDDL[0]
N163720     IF (_DFLACH) AND (_T_7==0)
N163730       _TOUT=_TDDL[1]
N163740     ENDIF
N163750   ENDIF
N163760 ELSE
N163770   IF (_TCOR<=0)
N163780     GOTOF _AL5
N163790   ENDIF
N163800   IF (_T_7==0)
N163810     GOTOF _AL8
N163820   ENDIF
N163830   _I_TENV=""
N163840 ENDIF
N163850 IF (_T_3==0)
N163860   IF (_T_6<2)
N163870     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N163880     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N163890     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N163900       IF (NOT(_I_PROT))
N163910         _H_T_3=_I_MA
N163920         IF (_I_MA==1)
N163930           _H_T_3=2
N163940         ELSE
N163950           IF (_I_MA==2)
N163960             _H_T_3=1
N163970           ENDIF
N163980         ENDIF
N163990       ELSE
N164000         IF (_I_MA==3)
N164010           _H_T_3=2 _GEOAX=1
N164020         ENDIF
N164030       ENDIF
N164040       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N164050     ENDIF
N164060   ELSE
N164070     IF (_T_6==2)
N164080       _CORCOMP=6
N164090       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N164100     ENDIF
N164110     _H_T_3=_I_MA
N164120   ENDIF
N164130 ELSE
N164140   IF (_T_3==4)
N164150     _CORCOMP=6
N164160     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N164170   ELSE
N164180     IF (_T_2<2)
N164190       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N164200         IF (_H_T_3<>1)
N164210           IF (_H_T_3==2)
N164220             _H_T_3=1
N164230           ELSE
N164240             _H_T_3=0
N164250           ENDIF
N164260         ELSE
N164270           _H_T_3=2
N164280         ENDIF
N164290         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N164300         IF (_HI_GG<0)
N164310           IF (_H_T_3==0)
N164320             _H_T_3=1
N164330           ELSE
N164340             IF (_H_T_3==1)
N164350               _H_T_3=0
N164360             ENDIF
N164370           ENDIF
N164380         ENDIF
N164390         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N164400         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N164410         _H_T_3=_T_3
N164420       ENDIF
N164430       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N164440         IF (NOT(_I_PROT))
N164450           IF (_H_T_3<>1)
N164460             IF (_H_T_3==2)
N164470               _H_T_3=0
N164480             ELSE
N164490               _H_T_3=2
N164500             ENDIF
N164510           ENDIF
N164520           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N164530           IF (_HI_GG<0)
N164540             IF (_H_T_3==0)
N164550               _H_T_3=1
N164560             ELSE
N164570               IF (_H_T_3==1)
N164580                 _H_T_3=0
N164590               ENDIF
N164600             ENDIF
N164610           ENDIF
N164620           _GEOAX=_H_T_3
N164630         ELSE
N164640           _GEOAX=_T_3-1
N164650         ENDIF
N164660         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N164670         IF (NOT(_I_PROT))
N164680           _H_T_3=_T_3
N164690         ENDIF
N164700         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N164710       ENDIF
N164720     ELSE
N164730       _GEOAX=0 _CORCOMP=_T_3+2
N164740     ENDIF
N164750   ENDIF
N164760 ENDIF
N164770 IF ((_T_2==0) OR (_T_2==2))
N164780   IF (_I_CH_6==0)
N164790     _COMP="W" _CORMODE=1 _I_PROT=9
N164800   ELSE
N164810     _COMP="GW" _CORMODE=3 _I_PROT=0
N164820   ENDIF
N164830   IF (_DFLACH)
N164840     IF (_CORCOMP==0)
N164850       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N164860       EXECSTRING(_STR_PROT)
N164870       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N164880       IF (_H_T_3==3)
N164890         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N164900       ELSE
N164910         IF (_H_T_3==2)
N164920           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N164930         ELSE
N164940           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N164950         ENDIF
N164960       ENDIF
N164970     ELSE
N164980       IF (_CORCOMP==6)
N164990         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N165000         EXECSTRING(_STR_PROT)
N165010         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N165020       ENDIF
N165030     ENDIF
N165040   ELSE
N165050     IF (_CORCOMP==0)
N165060       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N165070       EXECSTRING(_STR_PROT)
N165080       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N165090       IF (_H_T_3==3)
N165100         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N165110       ELSE
N165120         IF (_H_T_3==2)
N165130           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N165140         ELSE
N165150           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N165160         ENDIF
N165170       ENDIF
N165180     ELSE
N165190       IF (_CORCOMP==6)
N165200         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N165210         EXECSTRING(_STR_PROT)
N165220         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N165230       ENDIF
N165240     ENDIF
N165250   ENDIF
N165260 ELSE
N165270   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N165280     GOTOF _AL22
N165290   ENDIF
N165300   IF (_DLNUM<0)
N165310     GOTOF _AL22
N165320   ELSE
N165330     IF ((_DLNUM==0) AND (_T_2<2))
N165340       GOTOF _AL22
N165350     ENDIF
N165360   ENDIF
N165370   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N165380     GOTOF _AL24
N165390   ENDIF
N165400   _OVI[13]=_DLNUM
N165410   IF (_I_CH_8==1)
N165420     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N165430       GOTOF _AL25
N165440     ENDIF
N165450     _COMP="E" _CORMODE=1
N165460   ELSE
N165470     IF (_I_CH_6==0)
N165480       _COMP="S" _CORMODE=1
N165490     ELSE
N165500       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N165510         GOTOF _AL25
N165520       ENDIF
N165530       _COMP="ES" _CORMODE=3
N165540     ENDIF
N165550   ENDIF
N165560   IF (_DFLACH)
N165570     IF (_CORCOMP==0)
N165580       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N165590       EXECSTRING(_STR_PROT)
N165600       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N165610       IF (_H_T_3==3)
N165620         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N165630       ELSE
N165640         IF (_H_T_3==2)
N165650           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N165660         ELSE
N165670           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N165680         ENDIF
N165690       ENDIF
N165700     ELSE
N165710       IF (_CORCOMP==6)
N165720         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N165730         EXECSTRING(_STR_PROT)
N165740         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N165750       ENDIF
N165760     ENDIF
N165770   ELSE
N165780     IF (_CORCOMP==0)
N165790       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N165800       EXECSTRING(_STR_PROT)
N165810       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N165820       IF (_H_T_3==3)
N165830         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N165840       ELSE
N165850         IF (_H_T_3==2)
N165860           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N165870         ELSE
N165880           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N165890         ENDIF
N165900       ENDIF
N165910     ELSE
N165920       IF (_CORCOMP==6)
N165930         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N165940         EXECSTRING(_STR_PROT)
N165950         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N165960       ENDIF
N165970     ENDIF
N165980   ENDIF
N165990 ENDIF
N166000 _H_TC=$P_TC
N166010 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N166020   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N166030   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N166040   TCARR=0
N166050   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N166060     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N166070   ENDIF
N166080   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N166090     PAROTOF
N166100   ENDIF
N166110   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N166120 ENDIF
N166130 IF (_HI_GG) AND (_T_2<2)
N166140   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N166150   G[6]=_HI_GG
N166160 ENDIF
N166170 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N166180   IF (_T_4==1)
N166190     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N166200   ENDIF
N166210   _CORVAL[0]=_H_OVR20
N166220   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N166230     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N166240   ENDIF
N166250 ELSE
N166260   IF (_T_4==1)
N166270     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N166280   ENDIF
N166290   _CORVAL[0]=_H_OVR20
N166300 ENDIF
N166310 IF ((_DLNUM==0) AND (_T_2==3))
N166320   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N166330 ELSE
N166340   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N166350 ENDIF
N166360 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N166370   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N166380     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N166390   ENDIF
N166400 ENDIF
N166410 IF (_HR_GG AND (_T_2<2))
N166420   G[6]=_HR_GG
N166430 ENDIF
N166440 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N166450   $P_CYCFRAME=CTRANS()
N166460   _T_7=_T_5 MOD 1000
N166470   G[8]=_T_7
N166480   TCARR=_H_TC
N166490   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N166500     _T_7=_T_5 DIV 1000 MOD 100
N166510     G[52]=_T_7
N166520   ENDIF
N166530   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N166540     _T_7=_T_5 DIV 100000 MOD 100
N166550     G[53]=_T_7
N166560   ENDIF
N166570 ENDIF
N166580 IF (_OVI[12]<>0)
N166590   _OVI[11]=0
N166600   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N166610 ENDIF
N166620 _FIN: _OVI[11]=1
N166630 RET
N166640 _AL1: _OVI[9]=61318
N166650 SETAL(_OVI[9])
N166660 RET
N166670 _AL5: _OVI[9]=61320
N166680 SETAL(_OVI[9])
N166690 RET
N166700 _AL7: _OVI[9]=61319
N166710 SETAL(_OVI[9])
N166720 RET
N166730 _AL8: _OVI[9]=61328
N166740 SETAL(_OVI[9])
N166750 RET
N166760 _AL11: _OVI[9]=61342
N166770 SETAL(_OVI[9])
N166780 RET
N166790 _AL12: _OVI[9]=61345
N166800 SETAL(_OVI[9])
N166810 RET
N166820 _AL20: _OVI[9]=61404
N166830 SETAL(_OVI[9])
N166840 RET
N166850 _AL21: _OVI[9]=61405
N166860 SETAL(_OVI[9])
N166870 RET
N166880 _AL22: _OVI[9]=61406
N166890 SETAL(_OVI[9])
N166900 RET
N166910 _AL24: _OVI[9]=61408
N166920 SETAL(_OVI[9])
N166930 RET
N166940 _AL25: _OVI[9]=61409
N166950 SETAL(_OVI[9])
N166960 RET
N166970 _AL26: _OVI[9]=61410
N166980 SETAL(_OVI[9])
N166990 RET
N167000 _AL27: _ALARM=61016
N167010 RET
N167020 _AL28: _OVI[9]=61404
N167030 SETAL(_OVI[9])
N167040 RET
N167050 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N167060 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N167070 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N167080 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N167090 DEF STRING[2] _COMP
N167100 DEF STRING[32] _I_TENV
N167110 DEF STRING[128] _STR_PROT
N167120 IF ($AN_NCK_VERSION<990000)
N167130   GOTOF _AL11
N167140 ENDIF
N167150 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N167160   RET
N167170 ENDIF
N167180 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N167190 _MWBILD: _I_K=_I_K MOD 100
N167200 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N167210 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N167220 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N167230 GOTOF _FINMW_1
N167240 _PA2A: _OVR[20]=_OVR[20]/_I_K
N167250 _FINMW_1: RET
N167260 _FINMW_2: _I_CH_6=1
N167270 RET
N167280 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N167290 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N167300   RET
N167310 ENDIF
N167320 IF (_OVI[6]==0) GOTOF _MT1
N167330 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N167340 _MT1: _I_MA=_MA
N167350 IF (_OVI[2]==974) OR (_OVI[2]==994)
N167360   _I_MA=(_I_MA MOD 10)
N167370   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N167380     _I_MA=2
N167390   ENDIF
N167400 ENDIF
N167410 IF (_KNUM==0)
N167420   RET
N167430 ENDIF
N167440 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N167450   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N167460   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N167470 ELSE
N167480   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N167490 ENDIF
N167500 _OVI[0]=_T_7
N167510 IF (_DFLACH)
N167520   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N167530 ELSE
N167540   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N167550 ENDIF
N167560 _SD42950=$SC_TOOL_LENGTH_TYPE
N167570 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N167580   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N167590     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N167600       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N167610     ENDIF
N167620     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N167630       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N167640       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N167650         IF (_T_4==0)
N167660           _T_4=1
N167670         ELSE
N167680           _T_4=0
N167690         ENDIF
N167700       ENDIF
N167710     ENDIF
N167720   ENDIF
N167730   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N167740     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N167750       IF ($SC_TOOL_LENGTH_CONST_T==19)
N167760         _I_PROT=1
N167770         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N167780           IF (_T_3==3)
N167790             _T_3=1 _H_T_3=3
N167800           ELSE
N167810             IF (_T_3==1)
N167820               _T_3=3 _H_T_3=1
N167830             ELSE
N167840               _T_3=2 _H_T_3=2
N167850             ENDIF
N167860           ENDIF
N167870         ENDIF
N167880         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N167890           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N167900         ENDIF
N167910         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N167920           _T_6=0 _T_3=1 _H_T_3=3
N167930         ENDIF
N167940         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N167950           IF (_T_4==0)
N167960             _T_4=1
N167970           ELSE
N167980             _T_4=0
N167990           ENDIF
N168000         ENDIF
N168010       ENDIF
N168020     ENDIF
N168030   ENDIF
N168040 ENDIF
N168050 IF (_T_2>1)
N168060   IF (_TENV=="")
N168070     GOTOF _AL21
N168080   ENDIF
N168090   _I_TENV=_TENV
N168100   IF (_DFLACH)
N168110     _TCOR=0
N168120   ENDIF
N168130   IF (_TCOR<0)
N168140     GOTOF _AL5
N168150   ENDIF
N168160   IF (_TCOR==0)
N168170     _RETW=GETTENV(_I_TENV,_TDDL)
N168180     _TOUT=_TDDL[0]
N168190     IF (_DFLACH) AND (_T_7==0)
N168200       _TOUT=_TDDL[1]
N168210     ENDIF
N168220   ENDIF
N168230 ELSE
N168240   IF (_TCOR<=0)
N168250     GOTOF _AL5
N168260   ENDIF
N168270   IF (_T_7==0)
N168280     GOTOF _AL8
N168290   ENDIF
N168300   _I_TENV=""
N168310 ENDIF
N168320 IF (_T_3==0)
N168330   IF (_T_6<2)
N168340     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N168350     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N168360     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N168370       IF (NOT(_I_PROT))
N168380         _H_T_3=_I_MA
N168390         IF (_I_MA==1)
N168400           _H_T_3=2
N168410         ELSE
N168420           IF (_I_MA==2)
N168430             _H_T_3=1
N168440           ENDIF
N168450         ENDIF
N168460       ELSE
N168470         IF (_I_MA==3)
N168480           _H_T_3=2 _GEOAX=1
N168490         ENDIF
N168500       ENDIF
N168510       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N168520     ENDIF
N168530   ELSE
N168540     IF (_T_6==2)
N168550       _CORCOMP=6
N168560       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N168570     ENDIF
N168580     _H_T_3=_I_MA
N168590   ENDIF
N168600 ELSE
N168610   IF (_T_3==4)
N168620     _CORCOMP=6
N168630     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N168640   ELSE
N168650     IF (_T_2<2)
N168660       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N168670         IF (_H_T_3<>1)
N168680           IF (_H_T_3==2)
N168690             _H_T_3=1
N168700           ELSE
N168710             _H_T_3=0
N168720           ENDIF
N168730         ELSE
N168740           _H_T_3=2
N168750         ENDIF
N168760         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N168770         IF (_HI_GG<0)
N168780           IF (_H_T_3==0)
N168790             _H_T_3=1
N168800           ELSE
N168810             IF (_H_T_3==1)
N168820               _H_T_3=0
N168830             ENDIF
N168840           ENDIF
N168850         ENDIF
N168860         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N168870         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N168880         _H_T_3=_T_3
N168890       ENDIF
N168900       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N168910         IF (NOT(_I_PROT))
N168920           IF (_H_T_3<>1)
N168930             IF (_H_T_3==2)
N168940               _H_T_3=0
N168950             ELSE
N168960               _H_T_3=2
N168970             ENDIF
N168980           ENDIF
N168990           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N169000           IF (_HI_GG<0)
N169010             IF (_H_T_3==0)
N169020               _H_T_3=1
N169030             ELSE
N169040               IF (_H_T_3==1)
N169050                 _H_T_3=0
N169060               ENDIF
N169070             ENDIF
N169080           ENDIF
N169090           _GEOAX=_H_T_3
N169100         ELSE
N169110           _GEOAX=_T_3-1
N169120         ENDIF
N169130         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N169140         IF (NOT(_I_PROT))
N169150           _H_T_3=_T_3
N169160         ENDIF
N169170         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N169180       ENDIF
N169190     ELSE
N169200       _GEOAX=0 _CORCOMP=_T_3+2
N169210     ENDIF
N169220   ENDIF
N169230 ENDIF
N169240 IF ((_T_2==0) OR (_T_2==2))
N169250   IF (_I_CH_6==0)
N169260     _COMP="W" _CORMODE=1 _I_PROT=9
N169270   ELSE
N169280     _COMP="GW" _CORMODE=3 _I_PROT=0
N169290   ENDIF
N169300   IF (_DFLACH)
N169310     IF (_CORCOMP==0)
N169320       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N169330       EXECSTRING(_STR_PROT)
N169340       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N169350       IF (_H_T_3==3)
N169360         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N169370       ELSE
N169380         IF (_H_T_3==2)
N169390           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N169400         ELSE
N169410           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N169420         ENDIF
N169430       ENDIF
N169440     ELSE
N169450       IF (_CORCOMP==6)
N169460         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N169470         EXECSTRING(_STR_PROT)
N169480         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N169490       ENDIF
N169500     ENDIF
N169510   ELSE
N169520     IF (_CORCOMP==0)
N169530       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N169540       EXECSTRING(_STR_PROT)
N169550       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N169560       IF (_H_T_3==3)
N169570         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N169580       ELSE
N169590         IF (_H_T_3==2)
N169600           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N169610         ELSE
N169620           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N169630         ENDIF
N169640       ENDIF
N169650     ELSE
N169660       IF (_CORCOMP==6)
N169670         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N169680         EXECSTRING(_STR_PROT)
N169690         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N169700       ENDIF
N169710     ENDIF
N169720   ENDIF
N169730 ELSE
N169740   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N169750     GOTOF _AL22
N169760   ENDIF
N169770   IF (_DLNUM<0)
N169780     GOTOF _AL22
N169790   ELSE
N169800     IF ((_DLNUM==0) AND (_T_2<2))
N169810       GOTOF _AL22
N169820     ENDIF
N169830   ENDIF
N169840   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N169850     GOTOF _AL24
N169860   ENDIF
N169870   _OVI[13]=_DLNUM
N169880   IF (_I_CH_8==1)
N169890     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N169900       GOTOF _AL25
N169910     ENDIF
N169920     _COMP="E" _CORMODE=1
N169930   ELSE
N169940     IF (_I_CH_6==0)
N169950       _COMP="S" _CORMODE=1
N169960     ELSE
N169970       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N169980         GOTOF _AL25
N169990       ENDIF
N170000       _COMP="ES" _CORMODE=3
N170010     ENDIF
N170020   ENDIF
N170030   IF (_DFLACH)
N170040     IF (_CORCOMP==0)
N170050       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N170060       EXECSTRING(_STR_PROT)
N170070       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N170080       IF (_H_T_3==3)
N170090         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N170100       ELSE
N170110         IF (_H_T_3==2)
N170120           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N170130         ELSE
N170140           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N170150         ENDIF
N170160       ENDIF
N170170     ELSE
N170180       IF (_CORCOMP==6)
N170190         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N170200         EXECSTRING(_STR_PROT)
N170210         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N170220       ENDIF
N170230     ENDIF
N170240   ELSE
N170250     IF (_CORCOMP==0)
N170260       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N170270       EXECSTRING(_STR_PROT)
N170280       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N170290       IF (_H_T_3==3)
N170300         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N170310       ELSE
N170320         IF (_H_T_3==2)
N170330           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N170340         ELSE
N170350           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N170360         ENDIF
N170370       ENDIF
N170380     ELSE
N170390       IF (_CORCOMP==6)
N170400         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N170410         EXECSTRING(_STR_PROT)
N170420         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N170430       ENDIF
N170440     ENDIF
N170450   ENDIF
N170460 ENDIF
N170470 _H_TC=$P_TC
N170480 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N170490   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N170500   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N170510   TCARR=0
N170520   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N170530     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N170540   ENDIF
N170550   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N170560     PAROTOF
N170570   ENDIF
N170580   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N170590 ENDIF
N170600 IF (_HI_GG) AND (_T_2<2)
N170610   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N170620   G[6]=_HI_GG
N170630 ENDIF
N170640 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N170650   IF (_T_4==1)
N170660     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N170670   ENDIF
N170680   _CORVAL[0]=_H_OVR20
N170690   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N170700     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N170710   ENDIF
N170720 ELSE
N170730   IF (_T_4==1)
N170740     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N170750   ENDIF
N170760   _CORVAL[0]=_H_OVR20
N170770 ENDIF
N170780 IF ((_DLNUM==0) AND (_T_2==3))
N170790   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N170800 ELSE
N170810   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N170820 ENDIF
N170830 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N170840   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N170850     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N170860   ENDIF
N170870 ENDIF
N170880 IF (_HR_GG AND (_T_2<2))
N170890   G[6]=_HR_GG
N170900 ENDIF
N170910 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N170920   $P_CYCFRAME=CTRANS()
N170930   _T_7=_T_5 MOD 1000
N170940   G[8]=_T_7
N170950   TCARR=_H_TC
N170960   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N170970     _T_7=_T_5 DIV 1000 MOD 100
N170980     G[52]=_T_7
N170990   ENDIF
N171000   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N171010     _T_7=_T_5 DIV 100000 MOD 100
N171020     G[53]=_T_7
N171030   ENDIF
N171040 ENDIF
N171050 IF (_OVI[12]<>0)
N171060   _OVI[11]=0
N171070   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N171080 ENDIF
N171090 _FIN: _OVI[11]=1
N171100 RET
N171110 _AL1: _OVI[9]=61318
N171120 SETAL(_OVI[9])
N171130 RET
N171140 _AL5: _OVI[9]=61320
N171150 SETAL(_OVI[9])
N171160 RET
N171170 _AL7: _OVI[9]=61319
N171180 SETAL(_OVI[9])
N171190 RET
N171200 _AL8: _OVI[9]=61328
N171210 SETAL(_OVI[9])
N171220 RET
N171230 _AL11: _OVI[9]=61342
N171240 SETAL(_OVI[9])
N171250 RET
N171260 _AL12: _OVI[9]=61345
N171270 SETAL(_OVI[9])
N171280 RET
N171290 _AL20: _OVI[9]=61404
N171300 SETAL(_OVI[9])
N171310 RET
N171320 _AL21: _OVI[9]=61405
N171330 SETAL(_OVI[9])
N171340 RET
N171350 _AL22: _OVI[9]=61406
N171360 SETAL(_OVI[9])
N171370 RET
N171380 _AL24: _OVI[9]=61408
N171390 SETAL(_OVI[9])
N171400 RET
N171410 _AL25: _OVI[9]=61409
N171420 SETAL(_OVI[9])
N171430 RET
N171440 _AL26: _OVI[9]=61410
N171450 SETAL(_OVI[9])
N171460 RET
N171470 _AL27: _ALARM=61016
N171480 RET
N171490 _AL28: _OVI[9]=61404
N171500 SETAL(_OVI[9])
N171510 RET
N171520 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N171530 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N171540 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N171550 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N171560 DEF STRING[2] _COMP
N171570 DEF STRING[32] _I_TENV
N171580 DEF STRING[128] _STR_PROT
N171590 IF ($AN_NCK_VERSION<990000)
N171600   GOTOF _AL11
N171610 ENDIF
N171620 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N171630   RET
N171640 ENDIF
N171650 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N171660 _MWBILD: _I_K=_I_K MOD 100
N171670 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N171680 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N171690 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N171700 GOTOF _FINMW_1
N171710 _PA2A: _OVR[20]=_OVR[20]/_I_K
N171720 _FINMW_1: RET
N171730 _FINMW_2: _I_CH_6=1
N171740 RET
N171750 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N171760 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N171770   RET
N171780 ENDIF
N171790 IF (_OVI[6]==0) GOTOF _MT1
N171800 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N171810 _MT1: _I_MA=_MA
N171820 IF (_OVI[2]==974) OR (_OVI[2]==994)
N171830   _I_MA=(_I_MA MOD 10)
N171840   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N171850     _I_MA=2
N171860   ENDIF
N171870 ENDIF
N171880 IF (_KNUM==0)
N171890   RET
N171900 ENDIF
N171910 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N171920   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N171930   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N171940 ELSE
N171950   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N171960 ENDIF
N171970 _OVI[0]=_T_7
N171980 IF (_DFLACH)
N171990   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N172000 ELSE
N172010   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N172020 ENDIF
N172030 _SD42950=$SC_TOOL_LENGTH_TYPE
N172040 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N172050   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N172060     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N172070       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N172080     ENDIF
N172090     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N172100       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N172110       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N172120         IF (_T_4==0)
N172130           _T_4=1
N172140         ELSE
N172150           _T_4=0
N172160         ENDIF
N172170       ENDIF
N172180     ENDIF
N172190   ENDIF
N172200   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N172210     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N172220       IF ($SC_TOOL_LENGTH_CONST_T==19)
N172230         _I_PROT=1
N172240         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N172250           IF (_T_3==3)
N172260             _T_3=1 _H_T_3=3
N172270           ELSE
N172280             IF (_T_3==1)
N172290               _T_3=3 _H_T_3=1
N172300             ELSE
N172310               _T_3=2 _H_T_3=2
N172320             ENDIF
N172330           ENDIF
N172340         ENDIF
N172350         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N172360           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N172370         ENDIF
N172380         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N172390           _T_6=0 _T_3=1 _H_T_3=3
N172400         ENDIF
N172410         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N172420           IF (_T_4==0)
N172430             _T_4=1
N172440           ELSE
N172450             _T_4=0
N172460           ENDIF
N172470         ENDIF
N172480       ENDIF
N172490     ENDIF
N172500   ENDIF
N172510 ENDIF
N172520 IF (_T_2>1)
N172530   IF (_TENV=="")
N172540     GOTOF _AL21
N172550   ENDIF
N172560   _I_TENV=_TENV
N172570   IF (_DFLACH)
N172580     _TCOR=0
N172590   ENDIF
N172600   IF (_TCOR<0)
N172610     GOTOF _AL5
N172620   ENDIF
N172630   IF (_TCOR==0)
N172640     _RETW=GETTENV(_I_TENV,_TDDL)
N172650     _TOUT=_TDDL[0]
N172660     IF (_DFLACH) AND (_T_7==0)
N172670       _TOUT=_TDDL[1]
N172680     ENDIF
N172690   ENDIF
N172700 ELSE
N172710   IF (_TCOR<=0)
N172720     GOTOF _AL5
N172730   ENDIF
N172740   IF (_T_7==0)
N172750     GOTOF _AL8
N172760   ENDIF
N172770   _I_TENV=""
N172780 ENDIF
N172790 IF (_T_3==0)
N172800   IF (_T_6<2)
N172810     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N172820     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N172830     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N172840       IF (NOT(_I_PROT))
N172850         _H_T_3=_I_MA
N172860         IF (_I_MA==1)
N172870           _H_T_3=2
N172880         ELSE
N172890           IF (_I_MA==2)
N172900             _H_T_3=1
N172910           ENDIF
N172920         ENDIF
N172930       ELSE
N172940         IF (_I_MA==3)
N172950           _H_T_3=2 _GEOAX=1
N172960         ENDIF
N172970       ENDIF
N172980       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N172990     ENDIF
N173000   ELSE
N173010     IF (_T_6==2)
N173020       _CORCOMP=6
N173030       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N173040     ENDIF
N173050     _H_T_3=_I_MA
N173060   ENDIF
N173070 ELSE
N173080   IF (_T_3==4)
N173090     _CORCOMP=6
N173100     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N173110   ELSE
N173120     IF (_T_2<2)
N173130       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N173140         IF (_H_T_3<>1)
N173150           IF (_H_T_3==2)
N173160             _H_T_3=1
N173170           ELSE
N173180             _H_T_3=0
N173190           ENDIF
N173200         ELSE
N173210           _H_T_3=2
N173220         ENDIF
N173230         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N173240         IF (_HI_GG<0)
N173250           IF (_H_T_3==0)
N173260             _H_T_3=1
N173270           ELSE
N173280             IF (_H_T_3==1)
N173290               _H_T_3=0
N173300             ENDIF
N173310           ENDIF
N173320         ENDIF
N173330         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N173340         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N173350         _H_T_3=_T_3
N173360       ENDIF
N173370       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N173380         IF (NOT(_I_PROT))
N173390           IF (_H_T_3<>1)
N173400             IF (_H_T_3==2)
N173410               _H_T_3=0
N173420             ELSE
N173430               _H_T_3=2
N173440             ENDIF
N173450           ENDIF
N173460           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N173470           IF (_HI_GG<0)
N173480             IF (_H_T_3==0)
N173490               _H_T_3=1
N173500             ELSE
N173510               IF (_H_T_3==1)
N173520                 _H_T_3=0
N173530               ENDIF
N173540             ENDIF
N173550           ENDIF
N173560           _GEOAX=_H_T_3
N173570         ELSE
N173580           _GEOAX=_T_3-1
N173590         ENDIF
N173600         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N173610         IF (NOT(_I_PROT))
N173620           _H_T_3=_T_3
N173630         ENDIF
N173640         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N173650       ENDIF
N173660     ELSE
N173670       _GEOAX=0 _CORCOMP=_T_3+2
N173680     ENDIF
N173690   ENDIF
N173700 ENDIF
N173710 IF ((_T_2==0) OR (_T_2==2))
N173720   IF (_I_CH_6==0)
N173730     _COMP="W" _CORMODE=1 _I_PROT=9
N173740   ELSE
N173750     _COMP="GW" _CORMODE=3 _I_PROT=0
N173760   ENDIF
N173770   IF (_DFLACH)
N173780     IF (_CORCOMP==0)
N173790       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N173800       EXECSTRING(_STR_PROT)
N173810       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N173820       IF (_H_T_3==3)
N173830         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N173840       ELSE
N173850         IF (_H_T_3==2)
N173860           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N173870         ELSE
N173880           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N173890         ENDIF
N173900       ENDIF
N173910     ELSE
N173920       IF (_CORCOMP==6)
N173930         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N173940         EXECSTRING(_STR_PROT)
N173950         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N173960       ENDIF
N173970     ENDIF
N173980   ELSE
N173990     IF (_CORCOMP==0)
N174000       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N174010       EXECSTRING(_STR_PROT)
N174020       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N174030       IF (_H_T_3==3)
N174040         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N174050       ELSE
N174060         IF (_H_T_3==2)
N174070           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N174080         ELSE
N174090           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N174100         ENDIF
N174110       ENDIF
N174120     ELSE
N174130       IF (_CORCOMP==6)
N174140         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N174150         EXECSTRING(_STR_PROT)
N174160         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N174170       ENDIF
N174180     ENDIF
N174190   ENDIF
N174200 ELSE
N174210   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N174220     GOTOF _AL22
N174230   ENDIF
N174240   IF (_DLNUM<0)
N174250     GOTOF _AL22
N174260   ELSE
N174270     IF ((_DLNUM==0) AND (_T_2<2))
N174280       GOTOF _AL22
N174290     ENDIF
N174300   ENDIF
N174310   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N174320     GOTOF _AL24
N174330   ENDIF
N174340   _OVI[13]=_DLNUM
N174350   IF (_I_CH_8==1)
N174360     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N174370       GOTOF _AL25
N174380     ENDIF
N174390     _COMP="E" _CORMODE=1
N174400   ELSE
N174410     IF (_I_CH_6==0)
N174420       _COMP="S" _CORMODE=1
N174430     ELSE
N174440       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N174450         GOTOF _AL25
N174460       ENDIF
N174470       _COMP="ES" _CORMODE=3
N174480     ENDIF
N174490   ENDIF
N174500   IF (_DFLACH)
N174510     IF (_CORCOMP==0)
N174520       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N174530       EXECSTRING(_STR_PROT)
N174540       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N174550       IF (_H_T_3==3)
N174560         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N174570       ELSE
N174580         IF (_H_T_3==2)
N174590           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N174600         ELSE
N174610           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N174620         ENDIF
N174630       ENDIF
N174640     ELSE
N174650       IF (_CORCOMP==6)
N174660         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N174670         EXECSTRING(_STR_PROT)
N174680         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N174690       ENDIF
N174700     ENDIF
N174710   ELSE
N174720     IF (_CORCOMP==0)
N174730       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N174740       EXECSTRING(_STR_PROT)
N174750       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N174760       IF (_H_T_3==3)
N174770         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N174780       ELSE
N174790         IF (_H_T_3==2)
N174800           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N174810         ELSE
N174820           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N174830         ENDIF
N174840       ENDIF
N174850     ELSE
N174860       IF (_CORCOMP==6)
N174870         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N174880         EXECSTRING(_STR_PROT)
N174890         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N174900       ENDIF
N174910     ENDIF
N174920   ENDIF
N174930 ENDIF
N174940 _H_TC=$P_TC
N174950 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N174960   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N174970   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N174980   TCARR=0
N174990   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N175000     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N175010   ENDIF
N175020   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N175030     PAROTOF
N175040   ENDIF
N175050   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N175060 ENDIF
N175070 IF (_HI_GG) AND (_T_2<2)
N175080   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N175090   G[6]=_HI_GG
N175100 ENDIF
N175110 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N175120   IF (_T_4==1)
N175130     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N175140   ENDIF
N175150   _CORVAL[0]=_H_OVR20
N175160   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N175170     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N175180   ENDIF
N175190 ELSE
N175200   IF (_T_4==1)
N175210     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N175220   ENDIF
N175230   _CORVAL[0]=_H_OVR20
N175240 ENDIF
N175250 IF ((_DLNUM==0) AND (_T_2==3))
N175260   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N175270 ELSE
N175280   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N175290 ENDIF
N175300 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N175310   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N175320     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N175330   ENDIF
N175340 ENDIF
N175350 IF (_HR_GG AND (_T_2<2))
N175360   G[6]=_HR_GG
N175370 ENDIF
N175380 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N175390   $P_CYCFRAME=CTRANS()
N175400   _T_7=_T_5 MOD 1000
N175410   G[8]=_T_7
N175420   TCARR=_H_TC
N175430   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N175440     _T_7=_T_5 DIV 1000 MOD 100
N175450     G[52]=_T_7
N175460   ENDIF
N175470   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N175480     _T_7=_T_5 DIV 100000 MOD 100
N175490     G[53]=_T_7
N175500   ENDIF
N175510 ENDIF
N175520 IF (_OVI[12]<>0)
N175530   _OVI[11]=0
N175540   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N175550 ENDIF
N175560 _FIN: _OVI[11]=1
N175570 RET
N175580 _AL1: _OVI[9]=61318
N175590 SETAL(_OVI[9])
N175600 RET
N175610 _AL5: _OVI[9]=61320
N175620 SETAL(_OVI[9])
N175630 RET
N175640 _AL7: _OVI[9]=61319
N175650 SETAL(_OVI[9])
N175660 RET
N175670 _AL8: _OVI[9]=61328
N175680 SETAL(_OVI[9])
N175690 RET
N175700 _AL11: _OVI[9]=61342
N175710 SETAL(_OVI[9])
N175720 RET
N175730 _AL12: _OVI[9]=61345
N175740 SETAL(_OVI[9])
N175750 RET
N175760 _AL20: _OVI[9]=61404
N175770 SETAL(_OVI[9])
N175780 RET
N175790 _AL21: _OVI[9]=61405
N175800 SETAL(_OVI[9])
N175810 RET
N175820 _AL22: _OVI[9]=61406
N175830 SETAL(_OVI[9])
N175840 RET
N175850 _AL24: _OVI[9]=61408
N175860 SETAL(_OVI[9])
N175870 RET
N175880 _AL25: _OVI[9]=61409
N175890 SETAL(_OVI[9])
N175900 RET
N175910 _AL26: _OVI[9]=61410
N175920 SETAL(_OVI[9])
N175930 RET
N175940 _AL27: _ALARM=61016
N175950 RET
N175960 _AL28: _OVI[9]=61404
N175970 SETAL(_OVI[9])
N175980 RET
N175990 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N176000 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N176010 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N176020 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N176030 DEF STRING[2] _COMP
N176040 DEF STRING[32] _I_TENV
N176050 DEF STRING[128] _STR_PROT
N176060 IF ($AN_NCK_VERSION<990000)
N176070   GOTOF _AL11
N176080 ENDIF
N176090 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N176100   RET
N176110 ENDIF
N176120 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N176130 _MWBILD: _I_K=_I_K MOD 100
N176140 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N176150 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N176160 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N176170 GOTOF _FINMW_1
N176180 _PA2A: _OVR[20]=_OVR[20]/_I_K
N176190 _FINMW_1: RET
N176200 _FINMW_2: _I_CH_6=1
N176210 RET
N176220 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N176230 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N176240   RET
N176250 ENDIF
N176260 IF (_OVI[6]==0) GOTOF _MT1
N176270 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N176280 _MT1: _I_MA=_MA
N176290 IF (_OVI[2]==974) OR (_OVI[2]==994)
N176300   _I_MA=(_I_MA MOD 10)
N176310   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N176320     _I_MA=2
N176330   ENDIF
N176340 ENDIF
N176350 IF (_KNUM==0)
N176360   RET
N176370 ENDIF
N176380 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N176390   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N176400   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N176410 ELSE
N176420   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N176430 ENDIF
N176440 _OVI[0]=_T_7
N176450 IF (_DFLACH)
N176460   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N176470 ELSE
N176480   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N176490 ENDIF
N176500 _SD42950=$SC_TOOL_LENGTH_TYPE
N176510 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N176520   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N176530     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N176540       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N176550     ENDIF
N176560     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N176570       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N176580       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N176590         IF (_T_4==0)
N176600           _T_4=1
N176610         ELSE
N176620           _T_4=0
N176630         ENDIF
N176640       ENDIF
N176650     ENDIF
N176660   ENDIF
N176670   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N176680     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N176690       IF ($SC_TOOL_LENGTH_CONST_T==19)
N176700         _I_PROT=1
N176710         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N176720           IF (_T_3==3)
N176730             _T_3=1 _H_T_3=3
N176740           ELSE
N176750             IF (_T_3==1)
N176760               _T_3=3 _H_T_3=1
N176770             ELSE
N176780               _T_3=2 _H_T_3=2
N176790             ENDIF
N176800           ENDIF
N176810         ENDIF
N176820         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N176830           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N176840         ENDIF
N176850         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N176860           _T_6=0 _T_3=1 _H_T_3=3
N176870         ENDIF
N176880         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N176890           IF (_T_4==0)
N176900             _T_4=1
N176910           ELSE
N176920             _T_4=0
N176930           ENDIF
N176940         ENDIF
N176950       ENDIF
N176960     ENDIF
N176970   ENDIF
N176980 ENDIF
N176990 IF (_T_2>1)
N177000   IF (_TENV=="")
N177010     GOTOF _AL21
N177020   ENDIF
N177030   _I_TENV=_TENV
N177040   IF (_DFLACH)
N177050     _TCOR=0
N177060   ENDIF
N177070   IF (_TCOR<0)
N177080     GOTOF _AL5
N177090   ENDIF
N177100   IF (_TCOR==0)
N177110     _RETW=GETTENV(_I_TENV,_TDDL)
N177120     _TOUT=_TDDL[0]
N177130     IF (_DFLACH) AND (_T_7==0)
N177140       _TOUT=_TDDL[1]
N177150     ENDIF
N177160   ENDIF
N177170 ELSE
N177180   IF (_TCOR<=0)
N177190     GOTOF _AL5
N177200   ENDIF
N177210   IF (_T_7==0)
N177220     GOTOF _AL8
N177230   ENDIF
N177240   _I_TENV=""
N177250 ENDIF
N177260 IF (_T_3==0)
N177270   IF (_T_6<2)
N177280     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N177290     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N177300     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N177310       IF (NOT(_I_PROT))
N177320         _H_T_3=_I_MA
N177330         IF (_I_MA==1)
N177340           _H_T_3=2
N177350         ELSE
N177360           IF (_I_MA==2)
N177370             _H_T_3=1
N177380           ENDIF
N177390         ENDIF
N177400       ELSE
N177410         IF (_I_MA==3)
N177420           _H_T_3=2 _GEOAX=1
N177430         ENDIF
N177440       ENDIF
N177450       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N177460     ENDIF
N177470   ELSE
N177480     IF (_T_6==2)
N177490       _CORCOMP=6
N177500       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N177510     ENDIF
N177520     _H_T_3=_I_MA
N177530   ENDIF
N177540 ELSE
N177550   IF (_T_3==4)
N177560     _CORCOMP=6
N177570     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N177580   ELSE
N177590     IF (_T_2<2)
N177600       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N177610         IF (_H_T_3<>1)
N177620           IF (_H_T_3==2)
N177630             _H_T_3=1
N177640           ELSE
N177650             _H_T_3=0
N177660           ENDIF
N177670         ELSE
N177680           _H_T_3=2
N177690         ENDIF
N177700         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N177710         IF (_HI_GG<0)
N177720           IF (_H_T_3==0)
N177730             _H_T_3=1
N177740           ELSE
N177750             IF (_H_T_3==1)
N177760               _H_T_3=0
N177770             ENDIF
N177780           ENDIF
N177790         ENDIF
N177800         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N177810         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N177820         _H_T_3=_T_3
N177830       ENDIF
N177840       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N177850         IF (NOT(_I_PROT))
N177860           IF (_H_T_3<>1)
N177870             IF (_H_T_3==2)
N177880               _H_T_3=0
N177890             ELSE
N177900               _H_T_3=2
N177910             ENDIF
N177920           ENDIF
N177930           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N177940           IF (_HI_GG<0)
N177950             IF (_H_T_3==0)
N177960               _H_T_3=1
N177970             ELSE
N177980               IF (_H_T_3==1)
N177990                 _H_T_3=0
N178000               ENDIF
N178010             ENDIF
N178020           ENDIF
N178030           _GEOAX=_H_T_3
N178040         ELSE
N178050           _GEOAX=_T_3-1
N178060         ENDIF
N178070         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N178080         IF (NOT(_I_PROT))
N178090           _H_T_3=_T_3
N178100         ENDIF
N178110         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N178120       ENDIF
N178130     ELSE
N178140       _GEOAX=0 _CORCOMP=_T_3+2
N178150     ENDIF
N178160   ENDIF
N178170 ENDIF
N178180 IF ((_T_2==0) OR (_T_2==2))
N178190   IF (_I_CH_6==0)
N178200     _COMP="W" _CORMODE=1 _I_PROT=9
N178210   ELSE
N178220     _COMP="GW" _CORMODE=3 _I_PROT=0
N178230   ENDIF
N178240   IF (_DFLACH)
N178250     IF (_CORCOMP==0)
N178260       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N178270       EXECSTRING(_STR_PROT)
N178280       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N178290       IF (_H_T_3==3)
N178300         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N178310       ELSE
N178320         IF (_H_T_3==2)
N178330           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N178340         ELSE
N178350           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N178360         ENDIF
N178370       ENDIF
N178380     ELSE
N178390       IF (_CORCOMP==6)
N178400         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N178410         EXECSTRING(_STR_PROT)
N178420         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N178430       ENDIF
N178440     ENDIF
N178450   ELSE
N178460     IF (_CORCOMP==0)
N178470       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N178480       EXECSTRING(_STR_PROT)
N178490       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N178500       IF (_H_T_3==3)
N178510         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N178520       ELSE
N178530         IF (_H_T_3==2)
N178540           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N178550         ELSE
N178560           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N178570         ENDIF
N178580       ENDIF
N178590     ELSE
N178600       IF (_CORCOMP==6)
N178610         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N178620         EXECSTRING(_STR_PROT)
N178630         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N178640       ENDIF
N178650     ENDIF
N178660   ENDIF
N178670 ELSE
N178680   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N178690     GOTOF _AL22
N178700   ENDIF
N178710   IF (_DLNUM<0)
N178720     GOTOF _AL22
N178730   ELSE
N178740     IF ((_DLNUM==0) AND (_T_2<2))
N178750       GOTOF _AL22
N178760     ENDIF
N178770   ENDIF
N178780   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N178790     GOTOF _AL24
N178800   ENDIF
N178810   _OVI[13]=_DLNUM
N178820   IF (_I_CH_8==1)
N178830     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N178840       GOTOF _AL25
N178850     ENDIF
N178860     _COMP="E" _CORMODE=1
N178870   ELSE
N178880     IF (_I_CH_6==0)
N178890       _COMP="S" _CORMODE=1
N178900     ELSE
N178910       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N178920         GOTOF _AL25
N178930       ENDIF
N178940       _COMP="ES" _CORMODE=3
N178950     ENDIF
N178960   ENDIF
N178970   IF (_DFLACH)
N178980     IF (_CORCOMP==0)
N178990       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N179000       EXECSTRING(_STR_PROT)
N179010       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N179020       IF (_H_T_3==3)
N179030         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N179040       ELSE
N179050         IF (_H_T_3==2)
N179060           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N179070         ELSE
N179080           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N179090         ENDIF
N179100       ENDIF
N179110     ELSE
N179120       IF (_CORCOMP==6)
N179130         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N179140         EXECSTRING(_STR_PROT)
N179150         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N179160       ENDIF
N179170     ENDIF
N179180   ELSE
N179190     IF (_CORCOMP==0)
N179200       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N179210       EXECSTRING(_STR_PROT)
N179220       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N179230       IF (_H_T_3==3)
N179240         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N179250       ELSE
N179260         IF (_H_T_3==2)
N179270           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N179280         ELSE
N179290           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N179300         ENDIF
N179310       ENDIF
N179320     ELSE
N179330       IF (_CORCOMP==6)
N179340         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N179350         EXECSTRING(_STR_PROT)
N179360         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N179370       ENDIF
N179380     ENDIF
N179390   ENDIF
N179400 ENDIF
N179410 _H_TC=$P_TC
N179420 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N179430   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N179440   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N179450   TCARR=0
N179460   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N179470     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N179480   ENDIF
N179490   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N179500     PAROTOF
N179510   ENDIF
N179520   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N179530 ENDIF
N179540 IF (_HI_GG) AND (_T_2<2)
N179550   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N179560   G[6]=_HI_GG
N179570 ENDIF
N179580 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N179590   IF (_T_4==1)
N179600     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N179610   ENDIF
N179620   _CORVAL[0]=_H_OVR20
N179630   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N179640     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N179650   ENDIF
N179660 ELSE
N179670   IF (_T_4==1)
N179680     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N179690   ENDIF
N179700   _CORVAL[0]=_H_OVR20
N179710 ENDIF
N179720 IF ((_DLNUM==0) AND (_T_2==3))
N179730   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N179740 ELSE
N179750   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N179760 ENDIF
N179770 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N179780   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N179790     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N179800   ENDIF
N179810 ENDIF
N179820 IF (_HR_GG AND (_T_2<2))
N179830   G[6]=_HR_GG
N179840 ENDIF
N179850 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N179860   $P_CYCFRAME=CTRANS()
N179870   _T_7=_T_5 MOD 1000
N179880   G[8]=_T_7
N179890   TCARR=_H_TC
N179900   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N179910     _T_7=_T_5 DIV 1000 MOD 100
N179920     G[52]=_T_7
N179930   ENDIF
N179940   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N179950     _T_7=_T_5 DIV 100000 MOD 100
N179960     G[53]=_T_7
N179970   ENDIF
N179980 ENDIF
N179990 IF (_OVI[12]<>0)
N180000   _OVI[11]=0
N180010   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N180020 ENDIF
N180030 _FIN: _OVI[11]=1
N180040 RET
N180050 _AL1: _OVI[9]=61318
N180060 SETAL(_OVI[9])
N180070 RET
N180080 _AL5: _OVI[9]=61320
N180090 SETAL(_OVI[9])
N180100 RET
N180110 _AL7: _OVI[9]=61319
N180120 SETAL(_OVI[9])
N180130 RET
N180140 _AL8: _OVI[9]=61328
N180150 SETAL(_OVI[9])
N180160 RET
N180170 _AL11: _OVI[9]=61342
N180180 SETAL(_OVI[9])
N180190 RET
N180200 _AL12: _OVI[9]=61345
N180210 SETAL(_OVI[9])
N180220 RET
N180230 _AL20: _OVI[9]=61404
N180240 SETAL(_OVI[9])
N180250 RET
N180260 _AL21: _OVI[9]=61405
N180270 SETAL(_OVI[9])
N180280 RET
N180290 _AL22: _OVI[9]=61406
N180300 SETAL(_OVI[9])
N180310 RET
N180320 _AL24: _OVI[9]=61408
N180330 SETAL(_OVI[9])
N180340 RET
N180350 _AL25: _OVI[9]=61409
N180360 SETAL(_OVI[9])
N180370 RET
N180380 _AL26: _OVI[9]=61410
N180390 SETAL(_OVI[9])
N180400 RET
N180410 _AL27: _ALARM=61016
N180420 RET
N180430 _AL28: _OVI[9]=61404
N180440 SETAL(_OVI[9])
N180450 RET
N180460 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N180470 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N180480 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N180490 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N180500 DEF STRING[2] _COMP
N180510 DEF STRING[32] _I_TENV
N180520 DEF STRING[128] _STR_PROT
N180530 IF ($AN_NCK_VERSION<990000)
N180540   GOTOF _AL11
N180550 ENDIF
N180560 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N180570   RET
N180580 ENDIF
N180590 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N180600 _MWBILD: _I_K=_I_K MOD 100
N180610 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N180620 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N180630 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N180640 GOTOF _FINMW_1
N180650 _PA2A: _OVR[20]=_OVR[20]/_I_K
N180660 _FINMW_1: RET
N180670 _FINMW_2: _I_CH_6=1
N180680 RET
N180690 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N180700 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N180710   RET
N180720 ENDIF
N180730 IF (_OVI[6]==0) GOTOF _MT1
N180740 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N180750 _MT1: _I_MA=_MA
N180760 IF (_OVI[2]==974) OR (_OVI[2]==994)
N180770   _I_MA=(_I_MA MOD 10)
N180780   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N180790     _I_MA=2
N180800   ENDIF
N180810 ENDIF
N180820 IF (_KNUM==0)
N180830   RET
N180840 ENDIF
N180850 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N180860   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N180870   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N180880 ELSE
N180890   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N180900 ENDIF
N180910 _OVI[0]=_T_7
N180920 IF (_DFLACH)
N180930   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N180940 ELSE
N180950   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N180960 ENDIF
N180970 _SD42950=$SC_TOOL_LENGTH_TYPE
N180980 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N180990   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N181000     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N181010       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N181020     ENDIF
N181030     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N181040       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N181050       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N181060         IF (_T_4==0)
N181070           _T_4=1
N181080         ELSE
N181090           _T_4=0
N181100         ENDIF
N181110       ENDIF
N181120     ENDIF
N181130   ENDIF
N181140   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N181150     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N181160       IF ($SC_TOOL_LENGTH_CONST_T==19)
N181170         _I_PROT=1
N181180         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N181190           IF (_T_3==3)
N181200             _T_3=1 _H_T_3=3
N181210           ELSE
N181220             IF (_T_3==1)
N181230               _T_3=3 _H_T_3=1
N181240             ELSE
N181250               _T_3=2 _H_T_3=2
N181260             ENDIF
N181270           ENDIF
N181280         ENDIF
N181290         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N181300           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N181310         ENDIF
N181320         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N181330           _T_6=0 _T_3=1 _H_T_3=3
N181340         ENDIF
N181350         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N181360           IF (_T_4==0)
N181370             _T_4=1
N181380           ELSE
N181390             _T_4=0
N181400           ENDIF
N181410         ENDIF
N181420       ENDIF
N181430     ENDIF
N181440   ENDIF
N181450 ENDIF
N181460 IF (_T_2>1)
N181470   IF (_TENV=="")
N181480     GOTOF _AL21
N181490   ENDIF
N181500   _I_TENV=_TENV
N181510   IF (_DFLACH)
N181520     _TCOR=0
N181530   ENDIF
N181540   IF (_TCOR<0)
N181550     GOTOF _AL5
N181560   ENDIF
N181570   IF (_TCOR==0)
N181580     _RETW=GETTENV(_I_TENV,_TDDL)
N181590     _TOUT=_TDDL[0]
N181600     IF (_DFLACH) AND (_T_7==0)
N181610       _TOUT=_TDDL[1]
N181620     ENDIF
N181630   ENDIF
N181640 ELSE
N181650   IF (_TCOR<=0)
N181660     GOTOF _AL5
N181670   ENDIF
N181680   IF (_T_7==0)
N181690     GOTOF _AL8
N181700   ENDIF
N181710   _I_TENV=""
N181720 ENDIF
N181730 IF (_T_3==0)
N181740   IF (_T_6<2)
N181750     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N181760     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N181770     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N181780       IF (NOT(_I_PROT))
N181790         _H_T_3=_I_MA
N181800         IF (_I_MA==1)
N181810           _H_T_3=2
N181820         ELSE
N181830           IF (_I_MA==2)
N181840             _H_T_3=1
N181850           ENDIF
N181860         ENDIF
N181870       ELSE
N181880         IF (_I_MA==3)
N181890           _H_T_3=2 _GEOAX=1
N181900         ENDIF
N181910       ENDIF
N181920       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N181930     ENDIF
N181940   ELSE
N181950     IF (_T_6==2)
N181960       _CORCOMP=6
N181970       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N181980     ENDIF
N181990     _H_T_3=_I_MA
N182000   ENDIF
N182010 ELSE
N182020   IF (_T_3==4)
N182030     _CORCOMP=6
N182040     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N182050   ELSE
N182060     IF (_T_2<2)
N182070       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N182080         IF (_H_T_3<>1)
N182090           IF (_H_T_3==2)
N182100             _H_T_3=1
N182110           ELSE
N182120             _H_T_3=0
N182130           ENDIF
N182140         ELSE
N182150           _H_T_3=2
N182160         ENDIF
N182170         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N182180         IF (_HI_GG<0)
N182190           IF (_H_T_3==0)
N182200             _H_T_3=1
N182210           ELSE
N182220             IF (_H_T_3==1)
N182230               _H_T_3=0
N182240             ENDIF
N182250           ENDIF
N182260         ENDIF
N182270         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N182280         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N182290         _H_T_3=_T_3
N182300       ENDIF
N182310       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N182320         IF (NOT(_I_PROT))
N182330           IF (_H_T_3<>1)
N182340             IF (_H_T_3==2)
N182350               _H_T_3=0
N182360             ELSE
N182370               _H_T_3=2
N182380             ENDIF
N182390           ENDIF
N182400           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N182410           IF (_HI_GG<0)
N182420             IF (_H_T_3==0)
N182430               _H_T_3=1
N182440             ELSE
N182450               IF (_H_T_3==1)
N182460                 _H_T_3=0
N182470               ENDIF
N182480             ENDIF
N182490           ENDIF
N182500           _GEOAX=_H_T_3
N182510         ELSE
N182520           _GEOAX=_T_3-1
N182530         ENDIF
N182540         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N182550         IF (NOT(_I_PROT))
N182560           _H_T_3=_T_3
N182570         ENDIF
N182580         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N182590       ENDIF
N182600     ELSE
N182610       _GEOAX=0 _CORCOMP=_T_3+2
N182620     ENDIF
N182630   ENDIF
N182640 ENDIF
N182650 IF ((_T_2==0) OR (_T_2==2))
N182660   IF (_I_CH_6==0)
N182670     _COMP="W" _CORMODE=1 _I_PROT=9
N182680   ELSE
N182690     _COMP="GW" _CORMODE=3 _I_PROT=0
N182700   ENDIF
N182710   IF (_DFLACH)
N182720     IF (_CORCOMP==0)
N182730       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N182740       EXECSTRING(_STR_PROT)
N182750       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N182760       IF (_H_T_3==3)
N182770         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N182780       ELSE
N182790         IF (_H_T_3==2)
N182800           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N182810         ELSE
N182820           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N182830         ENDIF
N182840       ENDIF
N182850     ELSE
N182860       IF (_CORCOMP==6)
N182870         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N182880         EXECSTRING(_STR_PROT)
N182890         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N182900       ENDIF
N182910     ENDIF
N182920   ELSE
N182930     IF (_CORCOMP==0)
N182940       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N182950       EXECSTRING(_STR_PROT)
N182960       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N182970       IF (_H_T_3==3)
N182980         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N182990       ELSE
N183000         IF (_H_T_3==2)
N183010           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N183020         ELSE
N183030           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N183040         ENDIF
N183050       ENDIF
N183060     ELSE
N183070       IF (_CORCOMP==6)
N183080         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N183090         EXECSTRING(_STR_PROT)
N183100         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N183110       ENDIF
N183120     ENDIF
N183130   ENDIF
N183140 ELSE
N183150   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N183160     GOTOF _AL22
N183170   ENDIF
N183180   IF (_DLNUM<0)
N183190     GOTOF _AL22
N183200   ELSE
N183210     IF ((_DLNUM==0) AND (_T_2<2))
N183220       GOTOF _AL22
N183230     ENDIF
N183240   ENDIF
N183250   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N183260     GOTOF _AL24
N183270   ENDIF
N183280   _OVI[13]=_DLNUM
N183290   IF (_I_CH_8==1)
N183300     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N183310       GOTOF _AL25
N183320     ENDIF
N183330     _COMP="E" _CORMODE=1
N183340   ELSE
N183350     IF (_I_CH_6==0)
N183360       _COMP="S" _CORMODE=1
N183370     ELSE
N183380       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N183390         GOTOF _AL25
N183400       ENDIF
N183410       _COMP="ES" _CORMODE=3
N183420     ENDIF
N183430   ENDIF
N183440   IF (_DFLACH)
N183450     IF (_CORCOMP==0)
N183460       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N183470       EXECSTRING(_STR_PROT)
N183480       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N183490       IF (_H_T_3==3)
N183500         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N183510       ELSE
N183520         IF (_H_T_3==2)
N183530           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N183540         ELSE
N183550           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N183560         ENDIF
N183570       ENDIF
N183580     ELSE
N183590       IF (_CORCOMP==6)
N183600         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N183610         EXECSTRING(_STR_PROT)
N183620         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N183630       ENDIF
N183640     ENDIF
N183650   ELSE
N183660     IF (_CORCOMP==0)
N183670       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N183680       EXECSTRING(_STR_PROT)
N183690       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N183700       IF (_H_T_3==3)
N183710         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N183720       ELSE
N183730         IF (_H_T_3==2)
N183740           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N183750         ELSE
N183760           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N183770         ENDIF
N183780       ENDIF
N183790     ELSE
N183800       IF (_CORCOMP==6)
N183810         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N183820         EXECSTRING(_STR_PROT)
N183830         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N183840       ENDIF
N183850     ENDIF
N183860   ENDIF
N183870 ENDIF
N183880 _H_TC=$P_TC
N183890 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N183900   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N183910   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N183920   TCARR=0
N183930   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N183940     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N183950   ENDIF
N183960   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N183970     PAROTOF
N183980   ENDIF
N183990   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N184000 ENDIF
N184010 IF (_HI_GG) AND (_T_2<2)
N184020   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N184030   G[6]=_HI_GG
N184040 ENDIF
N184050 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N184060   IF (_T_4==1)
N184070     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N184080   ENDIF
N184090   _CORVAL[0]=_H_OVR20
N184100   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N184110     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N184120   ENDIF
N184130 ELSE
N184140   IF (_T_4==1)
N184150     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N184160   ENDIF
N184170   _CORVAL[0]=_H_OVR20
N184180 ENDIF
N184190 IF ((_DLNUM==0) AND (_T_2==3))
N184200   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N184210 ELSE
N184220   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N184230 ENDIF
N184240 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N184250   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N184260     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N184270   ENDIF
N184280 ENDIF
N184290 IF (_HR_GG AND (_T_2<2))
N184300   G[6]=_HR_GG
N184310 ENDIF
N184320 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N184330   $P_CYCFRAME=CTRANS()
N184340   _T_7=_T_5 MOD 1000
N184350   G[8]=_T_7
N184360   TCARR=_H_TC
N184370   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N184380     _T_7=_T_5 DIV 1000 MOD 100
N184390     G[52]=_T_7
N184400   ENDIF
N184410   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N184420     _T_7=_T_5 DIV 100000 MOD 100
N184430     G[53]=_T_7
N184440   ENDIF
N184450 ENDIF
N184460 IF (_OVI[12]<>0)
N184470   _OVI[11]=0
N184480   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N184490 ENDIF
N184500 _FIN: _OVI[11]=1
N184510 RET
N184520 _AL1: _OVI[9]=61318
N184530 SETAL(_OVI[9])
N184540 RET
N184550 _AL5: _OVI[9]=61320
N184560 SETAL(_OVI[9])
N184570 RET
N184580 _AL7: _OVI[9]=61319
N184590 SETAL(_OVI[9])
N184600 RET
N184610 _AL8: _OVI[9]=61328
N184620 SETAL(_OVI[9])
N184630 RET
N184640 _AL11: _OVI[9]=61342
N184650 SETAL(_OVI[9])
N184660 RET
N184670 _AL12: _OVI[9]=61345
N184680 SETAL(_OVI[9])
N184690 RET
N184700 _AL20: _OVI[9]=61404
N184710 SETAL(_OVI[9])
N184720 RET
N184730 _AL21: _OVI[9]=61405
N184740 SETAL(_OVI[9])
N184750 RET
N184760 _AL22: _OVI[9]=61406
N184770 SETAL(_OVI[9])
N184780 RET
N184790 _AL24: _OVI[9]=61408
N184800 SETAL(_OVI[9])
N184810 RET
N184820 _AL25: _OVI[9]=61409
N184830 SETAL(_OVI[9])
N184840 RET
N184850 _AL26: _OVI[9]=61410
N184860 SETAL(_OVI[9])
N184870 RET
N184880 _AL27: _ALARM=61016
N184890 RET
N184900 _AL28: _OVI[9]=61404
N184910 SETAL(_OVI[9])
N184920 RET
N184930 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N184940 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N184950 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N184960 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N184970 DEF STRING[2] _COMP
N184980 DEF STRING[32] _I_TENV
N184990 DEF STRING[128] _STR_PROT
N185000 IF ($AN_NCK_VERSION<990000)
N185010   GOTOF _AL11
N185020 ENDIF
N185030 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N185040   RET
N185050 ENDIF
N185060 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N185070 _MWBILD: _I_K=_I_K MOD 100
N185080 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N185090 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N185100 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N185110 GOTOF _FINMW_1
N185120 _PA2A: _OVR[20]=_OVR[20]/_I_K
N185130 _FINMW_1: RET
N185140 _FINMW_2: _I_CH_6=1
N185150 RET
N185160 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N185170 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N185180   RET
N185190 ENDIF
N185200 IF (_OVI[6]==0) GOTOF _MT1
N185210 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N185220 _MT1: _I_MA=_MA
N185230 IF (_OVI[2]==974) OR (_OVI[2]==994)
N185240   _I_MA=(_I_MA MOD 10)
N185250   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N185260     _I_MA=2
N185270   ENDIF
N185280 ENDIF
N185290 IF (_KNUM==0)
N185300   RET
N185310 ENDIF
N185320 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N185330   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N185340   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N185350 ELSE
N185360   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N185370 ENDIF
N185380 _OVI[0]=_T_7
N185390 IF (_DFLACH)
N185400   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N185410 ELSE
N185420   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N185430 ENDIF
N185440 _SD42950=$SC_TOOL_LENGTH_TYPE
N185450 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N185460   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N185470     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N185480       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N185490     ENDIF
N185500     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N185510       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N185520       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N185530         IF (_T_4==0)
N185540           _T_4=1
N185550         ELSE
N185560           _T_4=0
N185570         ENDIF
N185580       ENDIF
N185590     ENDIF
N185600   ENDIF
N185610   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N185620     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N185630       IF ($SC_TOOL_LENGTH_CONST_T==19)
N185640         _I_PROT=1
N185650         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N185660           IF (_T_3==3)
N185670             _T_3=1 _H_T_3=3
N185680           ELSE
N185690             IF (_T_3==1)
N185700               _T_3=3 _H_T_3=1
N185710             ELSE
N185720               _T_3=2 _H_T_3=2
N185730             ENDIF
N185740           ENDIF
N185750         ENDIF
N185760         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N185770           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N185780         ENDIF
N185790         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N185800           _T_6=0 _T_3=1 _H_T_3=3
N185810         ENDIF
N185820         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N185830           IF (_T_4==0)
N185840             _T_4=1
N185850           ELSE
N185860             _T_4=0
N185870           ENDIF
N185880         ENDIF
N185890       ENDIF
N185900     ENDIF
N185910   ENDIF
N185920 ENDIF
N185930 IF (_T_2>1)
N185940   IF (_TENV=="")
N185950     GOTOF _AL21
N185960   ENDIF
N185970   _I_TENV=_TENV
N185980   IF (_DFLACH)
N185990     _TCOR=0
N186000   ENDIF
N186010   IF (_TCOR<0)
N186020     GOTOF _AL5
N186030   ENDIF
N186040   IF (_TCOR==0)
N186050     _RETW=GETTENV(_I_TENV,_TDDL)
N186060     _TOUT=_TDDL[0]
N186070     IF (_DFLACH) AND (_T_7==0)
N186080       _TOUT=_TDDL[1]
N186090     ENDIF
N186100   ENDIF
N186110 ELSE
N186120   IF (_TCOR<=0)
N186130     GOTOF _AL5
N186140   ENDIF
N186150   IF (_T_7==0)
N186160     GOTOF _AL8
N186170   ENDIF
N186180   _I_TENV=""
N186190 ENDIF
N186200 IF (_T_3==0)
N186210   IF (_T_6<2)
N186220     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N186230     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N186240     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N186250       IF (NOT(_I_PROT))
N186260         _H_T_3=_I_MA
N186270         IF (_I_MA==1)
N186280           _H_T_3=2
N186290         ELSE
N186300           IF (_I_MA==2)
N186310             _H_T_3=1
N186320           ENDIF
N186330         ENDIF
N186340       ELSE
N186350         IF (_I_MA==3)
N186360           _H_T_3=2 _GEOAX=1
N186370         ENDIF
N186380       ENDIF
N186390       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N186400     ENDIF
N186410   ELSE
N186420     IF (_T_6==2)
N186430       _CORCOMP=6
N186440       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N186450     ENDIF
N186460     _H_T_3=_I_MA
N186470   ENDIF
N186480 ELSE
N186490   IF (_T_3==4)
N186500     _CORCOMP=6
N186510     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N186520   ELSE
N186530     IF (_T_2<2)
N186540       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N186550         IF (_H_T_3<>1)
N186560           IF (_H_T_3==2)
N186570             _H_T_3=1
N186580           ELSE
N186590             _H_T_3=0
N186600           ENDIF
N186610         ELSE
N186620           _H_T_3=2
N186630         ENDIF
N186640         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N186650         IF (_HI_GG<0)
N186660           IF (_H_T_3==0)
N186670             _H_T_3=1
N186680           ELSE
N186690             IF (_H_T_3==1)
N186700               _H_T_3=0
N186710             ENDIF
N186720           ENDIF
N186730         ENDIF
N186740         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N186750         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N186760         _H_T_3=_T_3
N186770       ENDIF
N186780       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N186790         IF (NOT(_I_PROT))
N186800           IF (_H_T_3<>1)
N186810             IF (_H_T_3==2)
N186820               _H_T_3=0
N186830             ELSE
N186840               _H_T_3=2
N186850             ENDIF
N186860           ENDIF
N186870           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N186880           IF (_HI_GG<0)
N186890             IF (_H_T_3==0)
N186900               _H_T_3=1
N186910             ELSE
N186920               IF (_H_T_3==1)
N186930                 _H_T_3=0
N186940               ENDIF
N186950             ENDIF
N186960           ENDIF
N186970           _GEOAX=_H_T_3
N186980         ELSE
N186990           _GEOAX=_T_3-1
N187000         ENDIF
N187010         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N187020         IF (NOT(_I_PROT))
N187030           _H_T_3=_T_3
N187040         ENDIF
N187050         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N187060       ENDIF
N187070     ELSE
N187080       _GEOAX=0 _CORCOMP=_T_3+2
N187090     ENDIF
N187100   ENDIF
N187110 ENDIF
N187120 IF ((_T_2==0) OR (_T_2==2))
N187130   IF (_I_CH_6==0)
N187140     _COMP="W" _CORMODE=1 _I_PROT=9
N187150   ELSE
N187160     _COMP="GW" _CORMODE=3 _I_PROT=0
N187170   ENDIF
N187180   IF (_DFLACH)
N187190     IF (_CORCOMP==0)
N187200       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N187210       EXECSTRING(_STR_PROT)
N187220       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N187230       IF (_H_T_3==3)
N187240         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N187250       ELSE
N187260         IF (_H_T_3==2)
N187270           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N187280         ELSE
N187290           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N187300         ENDIF
N187310       ENDIF
N187320     ELSE
N187330       IF (_CORCOMP==6)
N187340         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N187350         EXECSTRING(_STR_PROT)
N187360         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N187370       ENDIF
N187380     ENDIF
N187390   ELSE
N187400     IF (_CORCOMP==0)
N187410       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N187420       EXECSTRING(_STR_PROT)
N187430       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N187440       IF (_H_T_3==3)
N187450         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N187460       ELSE
N187470         IF (_H_T_3==2)
N187480           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N187490         ELSE
N187500           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N187510         ENDIF
N187520       ENDIF
N187530     ELSE
N187540       IF (_CORCOMP==6)
N187550         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N187560         EXECSTRING(_STR_PROT)
N187570         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N187580       ENDIF
N187590     ENDIF
N187600   ENDIF
N187610 ELSE
N187620   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N187630     GOTOF _AL22
N187640   ENDIF
N187650   IF (_DLNUM<0)
N187660     GOTOF _AL22
N187670   ELSE
N187680     IF ((_DLNUM==0) AND (_T_2<2))
N187690       GOTOF _AL22
N187700     ENDIF
N187710   ENDIF
N187720   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N187730     GOTOF _AL24
N187740   ENDIF
N187750   _OVI[13]=_DLNUM
N187760   IF (_I_CH_8==1)
N187770     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N187780       GOTOF _AL25
N187790     ENDIF
N187800     _COMP="E" _CORMODE=1
N187810   ELSE
N187820     IF (_I_CH_6==0)
N187830       _COMP="S" _CORMODE=1
N187840     ELSE
N187850       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N187860         GOTOF _AL25
N187870       ENDIF
N187880       _COMP="ES" _CORMODE=3
N187890     ENDIF
N187900   ENDIF
N187910   IF (_DFLACH)
N187920     IF (_CORCOMP==0)
N187930       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N187940       EXECSTRING(_STR_PROT)
N187950       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N187960       IF (_H_T_3==3)
N187970         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N187980       ELSE
N187990         IF (_H_T_3==2)
N188000           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N188010         ELSE
N188020           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N188030         ENDIF
N188040       ENDIF
N188050     ELSE
N188060       IF (_CORCOMP==6)
N188070         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N188080         EXECSTRING(_STR_PROT)
N188090         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N188100       ENDIF
N188110     ENDIF
N188120   ELSE
N188130     IF (_CORCOMP==0)
N188140       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N188150       EXECSTRING(_STR_PROT)
N188160       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N188170       IF (_H_T_3==3)
N188180         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N188190       ELSE
N188200         IF (_H_T_3==2)
N188210           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N188220         ELSE
N188230           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N188240         ENDIF
N188250       ENDIF
N188260     ELSE
N188270       IF (_CORCOMP==6)
N188280         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N188290         EXECSTRING(_STR_PROT)
N188300         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N188310       ENDIF
N188320     ENDIF
N188330   ENDIF
N188340 ENDIF
N188350 _H_TC=$P_TC
N188360 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N188370   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N188380   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N188390   TCARR=0
N188400   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N188410     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N188420   ENDIF
N188430   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N188440     PAROTOF
N188450   ENDIF
N188460   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N188470 ENDIF
N188480 IF (_HI_GG) AND (_T_2<2)
N188490   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N188500   G[6]=_HI_GG
N188510 ENDIF
N188520 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N188530   IF (_T_4==1)
N188540     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N188550   ENDIF
N188560   _CORVAL[0]=_H_OVR20
N188570   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N188580     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N188590   ENDIF
N188600 ELSE
N188610   IF (_T_4==1)
N188620     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N188630   ENDIF
N188640   _CORVAL[0]=_H_OVR20
N188650 ENDIF
N188660 IF ((_DLNUM==0) AND (_T_2==3))
N188670   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N188680 ELSE
N188690   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N188700 ENDIF
N188710 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N188720   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N188730     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N188740   ENDIF
N188750 ENDIF
N188760 IF (_HR_GG AND (_T_2<2))
N188770   G[6]=_HR_GG
N188780 ENDIF
N188790 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N188800   $P_CYCFRAME=CTRANS()
N188810   _T_7=_T_5 MOD 1000
N188820   G[8]=_T_7
N188830   TCARR=_H_TC
N188840   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N188850     _T_7=_T_5 DIV 1000 MOD 100
N188860     G[52]=_T_7
N188870   ENDIF
N188880   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N188890     _T_7=_T_5 DIV 100000 MOD 100
N188900     G[53]=_T_7
N188910   ENDIF
N188920 ENDIF
N188930 IF (_OVI[12]<>0)
N188940   _OVI[11]=0
N188950   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N188960 ENDIF
N188970 _FIN: _OVI[11]=1
N188980 RET
N188990 _AL1: _OVI[9]=61318
N189000 SETAL(_OVI[9])
N189010 RET
N189020 _AL5: _OVI[9]=61320
N189030 SETAL(_OVI[9])
N189040 RET
N189050 _AL7: _OVI[9]=61319
N189060 SETAL(_OVI[9])
N189070 RET
N189080 _AL8: _OVI[9]=61328
N189090 SETAL(_OVI[9])
N189100 RET
N189110 _AL11: _OVI[9]=61342
N189120 SETAL(_OVI[9])
N189130 RET
N189140 _AL12: _OVI[9]=61345
N189150 SETAL(_OVI[9])
N189160 RET
N189170 _AL20: _OVI[9]=61404
N189180 SETAL(_OVI[9])
N189190 RET
N189200 _AL21: _OVI[9]=61405
N189210 SETAL(_OVI[9])
N189220 RET
N189230 _AL22: _OVI[9]=61406
N189240 SETAL(_OVI[9])
N189250 RET
N189260 _AL24: _OVI[9]=61408
N189270 SETAL(_OVI[9])
N189280 RET
N189290 _AL25: _OVI[9]=61409
N189300 SETAL(_OVI[9])
N189310 RET
N189320 _AL26: _OVI[9]=61410
N189330 SETAL(_OVI[9])
N189340 RET
N189350 _AL27: _ALARM=61016
N189360 RET
N189370 _AL28: _OVI[9]=61404
N189380 SETAL(_OVI[9])
N189390 RET
N189400 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N189410 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N189420 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N189430 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N189440 DEF STRING[2] _COMP
N189450 DEF STRING[32] _I_TENV
N189460 DEF STRING[128] _STR_PROT
N189470 IF ($AN_NCK_VERSION<990000)
N189480   GOTOF _AL11
N189490 ENDIF
N189500 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N189510   RET
N189520 ENDIF
N189530 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N189540 _MWBILD: _I_K=_I_K MOD 100
N189550 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N189560 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N189570 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N189580 GOTOF _FINMW_1
N189590 _PA2A: _OVR[20]=_OVR[20]/_I_K
N189600 _FINMW_1: RET
N189610 _FINMW_2: _I_CH_6=1
N189620 RET
N189630 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N189640 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N189650   RET
N189660 ENDIF
N189670 IF (_OVI[6]==0) GOTOF _MT1
N189680 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N189690 _MT1: _I_MA=_MA
N189700 IF (_OVI[2]==974) OR (_OVI[2]==994)
N189710   _I_MA=(_I_MA MOD 10)
N189720   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N189730     _I_MA=2
N189740   ENDIF
N189750 ENDIF
N189760 IF (_KNUM==0)
N189770   RET
N189780 ENDIF
N189790 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N189800   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N189810   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N189820 ELSE
N189830   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N189840 ENDIF
N189850 _OVI[0]=_T_7
N189860 IF (_DFLACH)
N189870   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N189880 ELSE
N189890   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N189900 ENDIF
N189910 _SD42950=$SC_TOOL_LENGTH_TYPE
N189920 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N189930   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N189940     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N189950       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N189960     ENDIF
N189970     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N189980       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N189990       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N190000         IF (_T_4==0)
N190010           _T_4=1
N190020         ELSE
N190030           _T_4=0
N190040         ENDIF
N190050       ENDIF
N190060     ENDIF
N190070   ENDIF
N190080   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N190090     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N190100       IF ($SC_TOOL_LENGTH_CONST_T==19)
N190110         _I_PROT=1
N190120         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N190130           IF (_T_3==3)
N190140             _T_3=1 _H_T_3=3
N190150           ELSE
N190160             IF (_T_3==1)
N190170               _T_3=3 _H_T_3=1
N190180             ELSE
N190190               _T_3=2 _H_T_3=2
N190200             ENDIF
N190210           ENDIF
N190220         ENDIF
N190230         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N190240           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N190250         ENDIF
N190260         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N190270           _T_6=0 _T_3=1 _H_T_3=3
N190280         ENDIF
N190290         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N190300           IF (_T_4==0)
N190310             _T_4=1
N190320           ELSE
N190330             _T_4=0
N190340           ENDIF
N190350         ENDIF
N190360       ENDIF
N190370     ENDIF
N190380   ENDIF
N190390 ENDIF
N190400 IF (_T_2>1)
N190410   IF (_TENV=="")
N190420     GOTOF _AL21
N190430   ENDIF
N190440   _I_TENV=_TENV
N190450   IF (_DFLACH)
N190460     _TCOR=0
N190470   ENDIF
N190480   IF (_TCOR<0)
N190490     GOTOF _AL5
N190500   ENDIF
N190510   IF (_TCOR==0)
N190520     _RETW=GETTENV(_I_TENV,_TDDL)
N190530     _TOUT=_TDDL[0]
N190540     IF (_DFLACH) AND (_T_7==0)
N190550       _TOUT=_TDDL[1]
N190560     ENDIF
N190570   ENDIF
N190580 ELSE
N190590   IF (_TCOR<=0)
N190600     GOTOF _AL5
N190610   ENDIF
N190620   IF (_T_7==0)
N190630     GOTOF _AL8
N190640   ENDIF
N190650   _I_TENV=""
N190660 ENDIF
N190670 IF (_T_3==0)
N190680   IF (_T_6<2)
N190690     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N190700     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N190710     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N190720       IF (NOT(_I_PROT))
N190730         _H_T_3=_I_MA
N190740         IF (_I_MA==1)
N190750           _H_T_3=2
N190760         ELSE
N190770           IF (_I_MA==2)
N190780             _H_T_3=1
N190790           ENDIF
N190800         ENDIF
N190810       ELSE
N190820         IF (_I_MA==3)
N190830           _H_T_3=2 _GEOAX=1
N190840         ENDIF
N190850       ENDIF
N190860       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N190870     ENDIF
N190880   ELSE
N190890     IF (_T_6==2)
N190900       _CORCOMP=6
N190910       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N190920     ENDIF
N190930     _H_T_3=_I_MA
N190940   ENDIF
N190950 ELSE
N190960   IF (_T_3==4)
N190970     _CORCOMP=6
N190980     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N190990   ELSE
N191000     IF (_T_2<2)
N191010       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N191020         IF (_H_T_3<>1)
N191030           IF (_H_T_3==2)
N191040             _H_T_3=1
N191050           ELSE
N191060             _H_T_3=0
N191070           ENDIF
N191080         ELSE
N191090           _H_T_3=2
N191100         ENDIF
N191110         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N191120         IF (_HI_GG<0)
N191130           IF (_H_T_3==0)
N191140             _H_T_3=1
N191150           ELSE
N191160             IF (_H_T_3==1)
N191170               _H_T_3=0
N191180             ENDIF
N191190           ENDIF
N191200         ENDIF
N191210         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N191220         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N191230         _H_T_3=_T_3
N191240       ENDIF
N191250       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N191260         IF (NOT(_I_PROT))
N191270           IF (_H_T_3<>1)
N191280             IF (_H_T_3==2)
N191290               _H_T_3=0
N191300             ELSE
N191310               _H_T_3=2
N191320             ENDIF
N191330           ENDIF
N191340           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N191350           IF (_HI_GG<0)
N191360             IF (_H_T_3==0)
N191370               _H_T_3=1
N191380             ELSE
N191390               IF (_H_T_3==1)
N191400                 _H_T_3=0
N191410               ENDIF
N191420             ENDIF
N191430           ENDIF
N191440           _GEOAX=_H_T_3
N191450         ELSE
N191460           _GEOAX=_T_3-1
N191470         ENDIF
N191480         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N191490         IF (NOT(_I_PROT))
N191500           _H_T_3=_T_3
N191510         ENDIF
N191520         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N191530       ENDIF
N191540     ELSE
N191550       _GEOAX=0 _CORCOMP=_T_3+2
N191560     ENDIF
N191570   ENDIF
N191580 ENDIF
N191590 IF ((_T_2==0) OR (_T_2==2))
N191600   IF (_I_CH_6==0)
N191610     _COMP="W" _CORMODE=1 _I_PROT=9
N191620   ELSE
N191630     _COMP="GW" _CORMODE=3 _I_PROT=0
N191640   ENDIF
N191650   IF (_DFLACH)
N191660     IF (_CORCOMP==0)
N191670       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N191680       EXECSTRING(_STR_PROT)
N191690       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N191700       IF (_H_T_3==3)
N191710         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N191720       ELSE
N191730         IF (_H_T_3==2)
N191740           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N191750         ELSE
N191760           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N191770         ENDIF
N191780       ENDIF
N191790     ELSE
N191800       IF (_CORCOMP==6)
N191810         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N191820         EXECSTRING(_STR_PROT)
N191830         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N191840       ENDIF
N191850     ENDIF
N191860   ELSE
N191870     IF (_CORCOMP==0)
N191880       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N191890       EXECSTRING(_STR_PROT)
N191900       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N191910       IF (_H_T_3==3)
N191920         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N191930       ELSE
N191940         IF (_H_T_3==2)
N191950           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N191960         ELSE
N191970           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N191980         ENDIF
N191990       ENDIF
N192000     ELSE
N192010       IF (_CORCOMP==6)
N192020         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N192030         EXECSTRING(_STR_PROT)
N192040         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N192050       ENDIF
N192060     ENDIF
N192070   ENDIF
N192080 ELSE
N192090   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N192100     GOTOF _AL22
N192110   ENDIF
N192120   IF (_DLNUM<0)
N192130     GOTOF _AL22
N192140   ELSE
N192150     IF ((_DLNUM==0) AND (_T_2<2))
N192160       GOTOF _AL22
N192170     ENDIF
N192180   ENDIF
N192190   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N192200     GOTOF _AL24
N192210   ENDIF
N192220   _OVI[13]=_DLNUM
N192230   IF (_I_CH_8==1)
N192240     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N192250       GOTOF _AL25
N192260     ENDIF
N192270     _COMP="E" _CORMODE=1
N192280   ELSE
N192290     IF (_I_CH_6==0)
N192300       _COMP="S" _CORMODE=1
N192310     ELSE
N192320       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N192330         GOTOF _AL25
N192340       ENDIF
N192350       _COMP="ES" _CORMODE=3
N192360     ENDIF
N192370   ENDIF
N192380   IF (_DFLACH)
N192390     IF (_CORCOMP==0)
N192400       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N192410       EXECSTRING(_STR_PROT)
N192420       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N192430       IF (_H_T_3==3)
N192440         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N192450       ELSE
N192460         IF (_H_T_3==2)
N192470           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N192480         ELSE
N192490           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N192500         ENDIF
N192510       ENDIF
N192520     ELSE
N192530       IF (_CORCOMP==6)
N192540         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N192550         EXECSTRING(_STR_PROT)
N192560         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N192570       ENDIF
N192580     ENDIF
N192590   ELSE
N192600     IF (_CORCOMP==0)
N192610       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N192620       EXECSTRING(_STR_PROT)
N192630       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N192640       IF (_H_T_3==3)
N192650         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N192660       ELSE
N192670         IF (_H_T_3==2)
N192680           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N192690         ELSE
N192700           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N192710         ENDIF
N192720       ENDIF
N192730     ELSE
N192740       IF (_CORCOMP==6)
N192750         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N192760         EXECSTRING(_STR_PROT)
N192770         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N192780       ENDIF
N192790     ENDIF
N192800   ENDIF
N192810 ENDIF
N192820 _H_TC=$P_TC
N192830 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N192840   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N192850   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N192860   TCARR=0
N192870   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N192880     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N192890   ENDIF
N192900   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N192910     PAROTOF
N192920   ENDIF
N192930   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N192940 ENDIF
N192950 IF (_HI_GG) AND (_T_2<2)
N192960   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N192970   G[6]=_HI_GG
N192980 ENDIF
N192990 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N193000   IF (_T_4==1)
N193010     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N193020   ENDIF
N193030   _CORVAL[0]=_H_OVR20
N193040   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N193050     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N193060   ENDIF
N193070 ELSE
N193080   IF (_T_4==1)
N193090     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N193100   ENDIF
N193110   _CORVAL[0]=_H_OVR20
N193120 ENDIF
N193130 IF ((_DLNUM==0) AND (_T_2==3))
N193140   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N193150 ELSE
N193160   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N193170 ENDIF
N193180 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N193190   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N193200     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N193210   ENDIF
N193220 ENDIF
N193230 IF (_HR_GG AND (_T_2<2))
N193240   G[6]=_HR_GG
N193250 ENDIF
N193260 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N193270   $P_CYCFRAME=CTRANS()
N193280   _T_7=_T_5 MOD 1000
N193290   G[8]=_T_7
N193300   TCARR=_H_TC
N193310   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N193320     _T_7=_T_5 DIV 1000 MOD 100
N193330     G[52]=_T_7
N193340   ENDIF
N193350   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N193360     _T_7=_T_5 DIV 100000 MOD 100
N193370     G[53]=_T_7
N193380   ENDIF
N193390 ENDIF
N193400 IF (_OVI[12]<>0)
N193410   _OVI[11]=0
N193420   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N193430 ENDIF
N193440 _FIN: _OVI[11]=1
N193450 RET
N193460 _AL1: _OVI[9]=61318
N193470 SETAL(_OVI[9])
N193480 RET
N193490 _AL5: _OVI[9]=61320
N193500 SETAL(_OVI[9])
N193510 RET
N193520 _AL7: _OVI[9]=61319
N193530 SETAL(_OVI[9])
N193540 RET
N193550 _AL8: _OVI[9]=61328
N193560 SETAL(_OVI[9])
N193570 RET
N193580 _AL11: _OVI[9]=61342
N193590 SETAL(_OVI[9])
N193600 RET
N193610 _AL12: _OVI[9]=61345
N193620 SETAL(_OVI[9])
N193630 RET
N193640 _AL20: _OVI[9]=61404
N193650 SETAL(_OVI[9])
N193660 RET
N193670 _AL21: _OVI[9]=61405
N193680 SETAL(_OVI[9])
N193690 RET
N193700 _AL22: _OVI[9]=61406
N193710 SETAL(_OVI[9])
N193720 RET
N193730 _AL24: _OVI[9]=61408
N193740 SETAL(_OVI[9])
N193750 RET
N193760 _AL25: _OVI[9]=61409
N193770 SETAL(_OVI[9])
N193780 RET
N193790 _AL26: _OVI[9]=61410
N193800 SETAL(_OVI[9])
N193810 RET
N193820 _AL27: _ALARM=61016
N193830 RET
N193840 _AL28: _OVI[9]=61404
N193850 SETAL(_OVI[9])
N193860 RET
N193870 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N193880 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N193890 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N193900 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N193910 DEF STRING[2] _COMP
N193920 DEF STRING[32] _I_TENV
N193930 DEF STRING[128] _STR_PROT
N193940 IF ($AN_NCK_VERSION<990000)
N193950   GOTOF _AL11
N193960 ENDIF
N193970 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N193980   RET
N193990 ENDIF
N194000 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N194010 _MWBILD: _I_K=_I_K MOD 100
N194020 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N194030 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N194040 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N194050 GOTOF _FINMW_1
N194060 _PA2A: _OVR[20]=_OVR[20]/_I_K
N194070 _FINMW_1: RET
N194080 _FINMW_2: _I_CH_6=1
N194090 RET
N194100 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N194110 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N194120   RET
N194130 ENDIF
N194140 IF (_OVI[6]==0) GOTOF _MT1
N194150 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N194160 _MT1: _I_MA=_MA
N194170 IF (_OVI[2]==974) OR (_OVI[2]==994)
N194180   _I_MA=(_I_MA MOD 10)
N194190   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N194200     _I_MA=2
N194210   ENDIF
N194220 ENDIF
N194230 IF (_KNUM==0)
N194240   RET
N194250 ENDIF
N194260 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N194270   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N194280   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N194290 ELSE
N194300   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N194310 ENDIF
N194320 _OVI[0]=_T_7
N194330 IF (_DFLACH)
N194340   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N194350 ELSE
N194360   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N194370 ENDIF
N194380 _SD42950=$SC_TOOL_LENGTH_TYPE
N194390 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N194400   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N194410     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N194420       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N194430     ENDIF
N194440     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N194450       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N194460       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N194470         IF (_T_4==0)
N194480           _T_4=1
N194490         ELSE
N194500           _T_4=0
N194510         ENDIF
N194520       ENDIF
N194530     ENDIF
N194540   ENDIF
N194550   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N194560     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N194570       IF ($SC_TOOL_LENGTH_CONST_T==19)
N194580         _I_PROT=1
N194590         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N194600           IF (_T_3==3)
N194610             _T_3=1 _H_T_3=3
N194620           ELSE
N194630             IF (_T_3==1)
N194640               _T_3=3 _H_T_3=1
N194650             ELSE
N194660               _T_3=2 _H_T_3=2
N194670             ENDIF
N194680           ENDIF
N194690         ENDIF
N194700         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N194710           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N194720         ENDIF
N194730         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N194740           _T_6=0 _T_3=1 _H_T_3=3
N194750         ENDIF
N194760         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N194770           IF (_T_4==0)
N194780             _T_4=1
N194790           ELSE
N194800             _T_4=0
N194810           ENDIF
N194820         ENDIF
N194830       ENDIF
N194840     ENDIF
N194850   ENDIF
N194860 ENDIF
N194870 IF (_T_2>1)
N194880   IF (_TENV=="")
N194890     GOTOF _AL21
N194900   ENDIF
N194910   _I_TENV=_TENV
N194920   IF (_DFLACH)
N194930     _TCOR=0
N194940   ENDIF
N194950   IF (_TCOR<0)
N194960     GOTOF _AL5
N194970   ENDIF
N194980   IF (_TCOR==0)
N194990     _RETW=GETTENV(_I_TENV,_TDDL)
N195000     _TOUT=_TDDL[0]
N195010     IF (_DFLACH) AND (_T_7==0)
N195020       _TOUT=_TDDL[1]
N195030     ENDIF
N195040   ENDIF
N195050 ELSE
N195060   IF (_TCOR<=0)
N195070     GOTOF _AL5
N195080   ENDIF
N195090   IF (_T_7==0)
N195100     GOTOF _AL8
N195110   ENDIF
N195120   _I_TENV=""
N195130 ENDIF
N195140 IF (_T_3==0)
N195150   IF (_T_6<2)
N195160     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N195170     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N195180     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N195190       IF (NOT(_I_PROT))
N195200         _H_T_3=_I_MA
N195210         IF (_I_MA==1)
N195220           _H_T_3=2
N195230         ELSE
N195240           IF (_I_MA==2)
N195250             _H_T_3=1
N195260           ENDIF
N195270         ENDIF
N195280       ELSE
N195290         IF (_I_MA==3)
N195300           _H_T_3=2 _GEOAX=1
N195310         ENDIF
N195320       ENDIF
N195330       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N195340     ENDIF
N195350   ELSE
N195360     IF (_T_6==2)
N195370       _CORCOMP=6
N195380       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N195390     ENDIF
N195400     _H_T_3=_I_MA
N195410   ENDIF
N195420 ELSE
N195430   IF (_T_3==4)
N195440     _CORCOMP=6
N195450     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N195460   ELSE
N195470     IF (_T_2<2)
N195480       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N195490         IF (_H_T_3<>1)
N195500           IF (_H_T_3==2)
N195510             _H_T_3=1
N195520           ELSE
N195530             _H_T_3=0
N195540           ENDIF
N195550         ELSE
N195560           _H_T_3=2
N195570         ENDIF
N195580         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N195590         IF (_HI_GG<0)
N195600           IF (_H_T_3==0)
N195610             _H_T_3=1
N195620           ELSE
N195630             IF (_H_T_3==1)
N195640               _H_T_3=0
N195650             ENDIF
N195660           ENDIF
N195670         ENDIF
N195680         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N195690         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N195700         _H_T_3=_T_3
N195710       ENDIF
N195720       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N195730         IF (NOT(_I_PROT))
N195740           IF (_H_T_3<>1)
N195750             IF (_H_T_3==2)
N195760               _H_T_3=0
N195770             ELSE
N195780               _H_T_3=2
N195790             ENDIF
N195800           ENDIF
N195810           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N195820           IF (_HI_GG<0)
N195830             IF (_H_T_3==0)
N195840               _H_T_3=1
N195850             ELSE
N195860               IF (_H_T_3==1)
N195870                 _H_T_3=0
N195880               ENDIF
N195890             ENDIF
N195900           ENDIF
N195910           _GEOAX=_H_T_3
N195920         ELSE
N195930           _GEOAX=_T_3-1
N195940         ENDIF
N195950         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N195960         IF (NOT(_I_PROT))
N195970           _H_T_3=_T_3
N195980         ENDIF
N195990         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N196000       ENDIF
N196010     ELSE
N196020       _GEOAX=0 _CORCOMP=_T_3+2
N196030     ENDIF
N196040   ENDIF
N196050 ENDIF
N196060 IF ((_T_2==0) OR (_T_2==2))
N196070   IF (_I_CH_6==0)
N196080     _COMP="W" _CORMODE=1 _I_PROT=9
N196090   ELSE
N196100     _COMP="GW" _CORMODE=3 _I_PROT=0
N196110   ENDIF
N196120   IF (_DFLACH)
N196130     IF (_CORCOMP==0)
N196140       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N196150       EXECSTRING(_STR_PROT)
N196160       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N196170       IF (_H_T_3==3)
N196180         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N196190       ELSE
N196200         IF (_H_T_3==2)
N196210           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N196220         ELSE
N196230           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N196240         ENDIF
N196250       ENDIF
N196260     ELSE
N196270       IF (_CORCOMP==6)
N196280         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N196290         EXECSTRING(_STR_PROT)
N196300         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N196310       ENDIF
N196320     ENDIF
N196330   ELSE
N196340     IF (_CORCOMP==0)
N196350       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N196360       EXECSTRING(_STR_PROT)
N196370       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N196380       IF (_H_T_3==3)
N196390         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N196400       ELSE
N196410         IF (_H_T_3==2)
N196420           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N196430         ELSE
N196440           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N196450         ENDIF
N196460       ENDIF
N196470     ELSE
N196480       IF (_CORCOMP==6)
N196490         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N196500         EXECSTRING(_STR_PROT)
N196510         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N196520       ENDIF
N196530     ENDIF
N196540   ENDIF
N196550 ELSE
N196560   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N196570     GOTOF _AL22
N196580   ENDIF
N196590   IF (_DLNUM<0)
N196600     GOTOF _AL22
N196610   ELSE
N196620     IF ((_DLNUM==0) AND (_T_2<2))
N196630       GOTOF _AL22
N196640     ENDIF
N196650   ENDIF
N196660   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N196670     GOTOF _AL24
N196680   ENDIF
N196690   _OVI[13]=_DLNUM
N196700   IF (_I_CH_8==1)
N196710     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N196720       GOTOF _AL25
N196730     ENDIF
N196740     _COMP="E" _CORMODE=1
N196750   ELSE
N196760     IF (_I_CH_6==0)
N196770       _COMP="S" _CORMODE=1
N196780     ELSE
N196790       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N196800         GOTOF _AL25
N196810       ENDIF
N196820       _COMP="ES" _CORMODE=3
N196830     ENDIF
N196840   ENDIF
N196850   IF (_DFLACH)
N196860     IF (_CORCOMP==0)
N196870       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N196880       EXECSTRING(_STR_PROT)
N196890       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N196900       IF (_H_T_3==3)
N196910         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N196920       ELSE
N196930         IF (_H_T_3==2)
N196940           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N196950         ELSE
N196960           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N196970         ENDIF
N196980       ENDIF
N196990     ELSE
N197000       IF (_CORCOMP==6)
N197010         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N197020         EXECSTRING(_STR_PROT)
N197030         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N197040       ENDIF
N197050     ENDIF
N197060   ELSE
N197070     IF (_CORCOMP==0)
N197080       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N197090       EXECSTRING(_STR_PROT)
N197100       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N197110       IF (_H_T_3==3)
N197120         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N197130       ELSE
N197140         IF (_H_T_3==2)
N197150           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N197160         ELSE
N197170           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N197180         ENDIF
N197190       ENDIF
N197200     ELSE
N197210       IF (_CORCOMP==6)
N197220         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N197230         EXECSTRING(_STR_PROT)
N197240         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N197250       ENDIF
N197260     ENDIF
N197270   ENDIF
N197280 ENDIF
N197290 _H_TC=$P_TC
N197300 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N197310   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N197320   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N197330   TCARR=0
N197340   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N197350     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N197360   ENDIF
N197370   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N197380     PAROTOF
N197390   ENDIF
N197400   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N197410 ENDIF
N197420 IF (_HI_GG) AND (_T_2<2)
N197430   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N197440   G[6]=_HI_GG
N197450 ENDIF
N197460 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N197470   IF (_T_4==1)
N197480     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N197490   ENDIF
N197500   _CORVAL[0]=_H_OVR20
N197510   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N197520     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N197530   ENDIF
N197540 ELSE
N197550   IF (_T_4==1)
N197560     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N197570   ENDIF
N197580   _CORVAL[0]=_H_OVR20
N197590 ENDIF
N197600 IF ((_DLNUM==0) AND (_T_2==3))
N197610   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N197620 ELSE
N197630   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N197640 ENDIF
N197650 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N197660   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N197670     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N197680   ENDIF
N197690 ENDIF
N197700 IF (_HR_GG AND (_T_2<2))
N197710   G[6]=_HR_GG
N197720 ENDIF
N197730 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N197740   $P_CYCFRAME=CTRANS()
N197750   _T_7=_T_5 MOD 1000
N197760   G[8]=_T_7
N197770   TCARR=_H_TC
N197780   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N197790     _T_7=_T_5 DIV 1000 MOD 100
N197800     G[52]=_T_7
N197810   ENDIF
N197820   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N197830     _T_7=_T_5 DIV 100000 MOD 100
N197840     G[53]=_T_7
N197850   ENDIF
N197860 ENDIF
N197870 IF (_OVI[12]<>0)
N197880   _OVI[11]=0
N197890   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N197900 ENDIF
N197910 _FIN: _OVI[11]=1
N197920 RET
N197930 _AL1: _OVI[9]=61318
N197940 SETAL(_OVI[9])
N197950 RET
N197960 _AL5: _OVI[9]=61320
N197970 SETAL(_OVI[9])
N197980 RET
N197990 _AL7: _OVI[9]=61319
N198000 SETAL(_OVI[9])
N198010 RET
N198020 _AL8: _OVI[9]=61328
N198030 SETAL(_OVI[9])
N198040 RET
N198050 _AL11: _OVI[9]=61342
N198060 SETAL(_OVI[9])
N198070 RET
N198080 _AL12: _OVI[9]=61345
N198090 SETAL(_OVI[9])
N198100 RET
N198110 _AL20: _OVI[9]=61404
N198120 SETAL(_OVI[9])
N198130 RET
N198140 _AL21: _OVI[9]=61405
N198150 SETAL(_OVI[9])
N198160 RET
N198170 _AL22: _OVI[9]=61406
N198180 SETAL(_OVI[9])
N198190 RET
N198200 _AL24: _OVI[9]=61408
N198210 SETAL(_OVI[9])
N198220 RET
N198230 _AL25: _OVI[9]=61409
N198240 SETAL(_OVI[9])
N198250 RET
N198260 _AL26: _OVI[9]=61410
N198270 SETAL(_OVI[9])
N198280 RET
N198290 _AL27: _ALARM=61016
N198300 RET
N198310 _AL28: _OVI[9]=61404
N198320 SETAL(_OVI[9])
N198330 RET
N198340 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N198350 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N198360 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N198370 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N198380 DEF STRING[2] _COMP
N198390 DEF STRING[32] _I_TENV
N198400 DEF STRING[128] _STR_PROT
N198410 IF ($AN_NCK_VERSION<990000)
N198420   GOTOF _AL11
N198430 ENDIF
N198440 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N198450   RET
N198460 ENDIF
N198470 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N198480 _MWBILD: _I_K=_I_K MOD 100
N198490 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N198500 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N198510 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N198520 GOTOF _FINMW_1
N198530 _PA2A: _OVR[20]=_OVR[20]/_I_K
N198540 _FINMW_1: RET
N198550 _FINMW_2: _I_CH_6=1
N198560 RET
N198570 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N198580 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N198590   RET
N198600 ENDIF
N198610 IF (_OVI[6]==0) GOTOF _MT1
N198620 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N198630 _MT1: _I_MA=_MA
N198640 IF (_OVI[2]==974) OR (_OVI[2]==994)
N198650   _I_MA=(_I_MA MOD 10)
N198660   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N198670     _I_MA=2
N198680   ENDIF
N198690 ENDIF
N198700 IF (_KNUM==0)
N198710   RET
N198720 ENDIF
N198730 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N198740   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N198750   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N198760 ELSE
N198770   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N198780 ENDIF
N198790 _OVI[0]=_T_7
N198800 IF (_DFLACH)
N198810   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N198820 ELSE
N198830   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N198840 ENDIF
N198850 _SD42950=$SC_TOOL_LENGTH_TYPE
N198860 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N198870   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N198880     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N198890       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N198900     ENDIF
N198910     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N198920       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N198930       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N198940         IF (_T_4==0)
N198950           _T_4=1
N198960         ELSE
N198970           _T_4=0
N198980         ENDIF
N198990       ENDIF
N199000     ENDIF
N199010   ENDIF
N199020   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N199030     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N199040       IF ($SC_TOOL_LENGTH_CONST_T==19)
N199050         _I_PROT=1
N199060         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N199070           IF (_T_3==3)
N199080             _T_3=1 _H_T_3=3
N199090           ELSE
N199100             IF (_T_3==1)
N199110               _T_3=3 _H_T_3=1
N199120             ELSE
N199130               _T_3=2 _H_T_3=2
N199140             ENDIF
N199150           ENDIF
N199160         ENDIF
N199170         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N199180           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N199190         ENDIF
N199200         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N199210           _T_6=0 _T_3=1 _H_T_3=3
N199220         ENDIF
N199230         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N199240           IF (_T_4==0)
N199250             _T_4=1
N199260           ELSE
N199270             _T_4=0
N199280           ENDIF
N199290         ENDIF
N199300       ENDIF
N199310     ENDIF
N199320   ENDIF
N199330 ENDIF
N199340 IF (_T_2>1)
N199350   IF (_TENV=="")
N199360     GOTOF _AL21
N199370   ENDIF
N199380   _I_TENV=_TENV
N199390   IF (_DFLACH)
N199400     _TCOR=0
N199410   ENDIF
N199420   IF (_TCOR<0)
N199430     GOTOF _AL5
N199440   ENDIF
N199450   IF (_TCOR==0)
N199460     _RETW=GETTENV(_I_TENV,_TDDL)
N199470     _TOUT=_TDDL[0]
N199480     IF (_DFLACH) AND (_T_7==0)
N199490       _TOUT=_TDDL[1]
N199500     ENDIF
N199510   ENDIF
N199520 ELSE
N199530   IF (_TCOR<=0)
N199540     GOTOF _AL5
N199550   ENDIF
N199560   IF (_T_7==0)
N199570     GOTOF _AL8
N199580   ENDIF
N199590   _I_TENV=""
N199600 ENDIF
N199610 IF (_T_3==0)
N199620   IF (_T_6<2)
N199630     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N199640     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N199650     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N199660       IF (NOT(_I_PROT))
N199670         _H_T_3=_I_MA
N199680         IF (_I_MA==1)
N199690           _H_T_3=2
N199700         ELSE
N199710           IF (_I_MA==2)
N199720             _H_T_3=1
N199730           ENDIF
N199740         ENDIF
N199750       ELSE
N199760         IF (_I_MA==3)
N199770           _H_T_3=2 _GEOAX=1
N199780         ENDIF
N199790       ENDIF
N199800       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N199810     ENDIF
N199820   ELSE
N199830     IF (_T_6==2)
N199840       _CORCOMP=6
N199850       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N199860     ENDIF
N199870     _H_T_3=_I_MA
N199880   ENDIF
N199890 ELSE
N199900   IF (_T_3==4)
N199910     _CORCOMP=6
N199920     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N199930   ELSE
N199940     IF (_T_2<2)
N199950       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N199960         IF (_H_T_3<>1)
N199970           IF (_H_T_3==2)
N199980             _H_T_3=1
N199990           ELSE
N200000             _H_T_3=0
N200010           ENDIF
N200020         ELSE
N200030           _H_T_3=2
N200040         ENDIF
N200050         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N200060         IF (_HI_GG<0)
N200070           IF (_H_T_3==0)
N200080             _H_T_3=1
N200090           ELSE
N200100             IF (_H_T_3==1)
N200110               _H_T_3=0
N200120             ENDIF
N200130           ENDIF
N200140         ENDIF
N200150         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N200160         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N200170         _H_T_3=_T_3
N200180       ENDIF
N200190       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N200200         IF (NOT(_I_PROT))
N200210           IF (_H_T_3<>1)
N200220             IF (_H_T_3==2)
N200230               _H_T_3=0
N200240             ELSE
N200250               _H_T_3=2
N200260             ENDIF
N200270           ENDIF
N200280           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N200290           IF (_HI_GG<0)
N200300             IF (_H_T_3==0)
N200310               _H_T_3=1
N200320             ELSE
N200330               IF (_H_T_3==1)
N200340                 _H_T_3=0
N200350               ENDIF
N200360             ENDIF
N200370           ENDIF
N200380           _GEOAX=_H_T_3
N200390         ELSE
N200400           _GEOAX=_T_3-1
N200410         ENDIF
N200420         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N200430         IF (NOT(_I_PROT))
N200440           _H_T_3=_T_3
N200450         ENDIF
N200460         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N200470       ENDIF
N200480     ELSE
N200490       _GEOAX=0 _CORCOMP=_T_3+2
N200500     ENDIF
N200510   ENDIF
N200520 ENDIF
N200530 IF ((_T_2==0) OR (_T_2==2))
N200540   IF (_I_CH_6==0)
N200550     _COMP="W" _CORMODE=1 _I_PROT=9
N200560   ELSE
N200570     _COMP="GW" _CORMODE=3 _I_PROT=0
N200580   ENDIF
N200590   IF (_DFLACH)
N200600     IF (_CORCOMP==0)
N200610       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N200620       EXECSTRING(_STR_PROT)
N200630       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N200640       IF (_H_T_3==3)
N200650         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N200660       ELSE
N200670         IF (_H_T_3==2)
N200680           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N200690         ELSE
N200700           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N200710         ENDIF
N200720       ENDIF
N200730     ELSE
N200740       IF (_CORCOMP==6)
N200750         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N200760         EXECSTRING(_STR_PROT)
N200770         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N200780       ENDIF
N200790     ENDIF
N200800   ELSE
N200810     IF (_CORCOMP==0)
N200820       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N200830       EXECSTRING(_STR_PROT)
N200840       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N200850       IF (_H_T_3==3)
N200860         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N200870       ELSE
N200880         IF (_H_T_3==2)
N200890           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N200900         ELSE
N200910           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N200920         ENDIF
N200930       ENDIF
N200940     ELSE
N200950       IF (_CORCOMP==6)
N200960         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N200970         EXECSTRING(_STR_PROT)
N200980         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N200990       ENDIF
N201000     ENDIF
N201010   ENDIF
N201020 ELSE
N201030   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N201040     GOTOF _AL22
N201050   ENDIF
N201060   IF (_DLNUM<0)
N201070     GOTOF _AL22
N201080   ELSE
N201090     IF ((_DLNUM==0) AND (_T_2<2))
N201100       GOTOF _AL22
N201110     ENDIF
N201120   ENDIF
N201130   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N201140     GOTOF _AL24
N201150   ENDIF
N201160   _OVI[13]=_DLNUM
N201170   IF (_I_CH_8==1)
N201180     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N201190       GOTOF _AL25
N201200     ENDIF
N201210     _COMP="E" _CORMODE=1
N201220   ELSE
N201230     IF (_I_CH_6==0)
N201240       _COMP="S" _CORMODE=1
N201250     ELSE
N201260       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N201270         GOTOF _AL25
N201280       ENDIF
N201290       _COMP="ES" _CORMODE=3
N201300     ENDIF
N201310   ENDIF
N201320   IF (_DFLACH)
N201330     IF (_CORCOMP==0)
N201340       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N201350       EXECSTRING(_STR_PROT)
N201360       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N201370       IF (_H_T_3==3)
N201380         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N201390       ELSE
N201400         IF (_H_T_3==2)
N201410           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N201420         ELSE
N201430           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N201440         ENDIF
N201450       ENDIF
N201460     ELSE
N201470       IF (_CORCOMP==6)
N201480         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N201490         EXECSTRING(_STR_PROT)
N201500         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N201510       ENDIF
N201520     ENDIF
N201530   ELSE
N201540     IF (_CORCOMP==0)
N201550       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N201560       EXECSTRING(_STR_PROT)
N201570       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N201580       IF (_H_T_3==3)
N201590         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N201600       ELSE
N201610         IF (_H_T_3==2)
N201620           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N201630         ELSE
N201640           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N201650         ENDIF
N201660       ENDIF
N201670     ELSE
N201680       IF (_CORCOMP==6)
N201690         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N201700         EXECSTRING(_STR_PROT)
N201710         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N201720       ENDIF
N201730     ENDIF
N201740   ENDIF
N201750 ENDIF
N201760 _H_TC=$P_TC
N201770 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N201780   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N201790   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N201800   TCARR=0
N201810   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N201820     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N201830   ENDIF
N201840   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N201850     PAROTOF
N201860   ENDIF
N201870   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N201880 ENDIF
N201890 IF (_HI_GG) AND (_T_2<2)
N201900   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N201910   G[6]=_HI_GG
N201920 ENDIF
N201930 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N201940   IF (_T_4==1)
N201950     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N201960   ENDIF
N201970   _CORVAL[0]=_H_OVR20
N201980   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N201990     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N202000   ENDIF
N202010 ELSE
N202020   IF (_T_4==1)
N202030     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N202040   ENDIF
N202050   _CORVAL[0]=_H_OVR20
N202060 ENDIF
N202070 IF ((_DLNUM==0) AND (_T_2==3))
N202080   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N202090 ELSE
N202100   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N202110 ENDIF
N202120 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N202130   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N202140     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N202150   ENDIF
N202160 ENDIF
N202170 IF (_HR_GG AND (_T_2<2))
N202180   G[6]=_HR_GG
N202190 ENDIF
N202200 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N202210   $P_CYCFRAME=CTRANS()
N202220   _T_7=_T_5 MOD 1000
N202230   G[8]=_T_7
N202240   TCARR=_H_TC
N202250   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N202260     _T_7=_T_5 DIV 1000 MOD 100
N202270     G[52]=_T_7
N202280   ENDIF
N202290   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N202300     _T_7=_T_5 DIV 100000 MOD 100
N202310     G[53]=_T_7
N202320   ENDIF
N202330 ENDIF
N202340 IF (_OVI[12]<>0)
N202350   _OVI[11]=0
N202360   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N202370 ENDIF
N202380 _FIN: _OVI[11]=1
N202390 RET
N202400 _AL1: _OVI[9]=61318
N202410 SETAL(_OVI[9])
N202420 RET
N202430 _AL5: _OVI[9]=61320
N202440 SETAL(_OVI[9])
N202450 RET
N202460 _AL7: _OVI[9]=61319
N202470 SETAL(_OVI[9])
N202480 RET
N202490 _AL8: _OVI[9]=61328
N202500 SETAL(_OVI[9])
N202510 RET
N202520 _AL11: _OVI[9]=61342
N202530 SETAL(_OVI[9])
N202540 RET
N202550 _AL12: _OVI[9]=61345
N202560 SETAL(_OVI[9])
N202570 RET
N202580 _AL20: _OVI[9]=61404
N202590 SETAL(_OVI[9])
N202600 RET
N202610 _AL21: _OVI[9]=61405
N202620 SETAL(_OVI[9])
N202630 RET
N202640 _AL22: _OVI[9]=61406
N202650 SETAL(_OVI[9])
N202660 RET
N202670 _AL24: _OVI[9]=61408
N202680 SETAL(_OVI[9])
N202690 RET
N202700 _AL25: _OVI[9]=61409
N202710 SETAL(_OVI[9])
N202720 RET
N202730 _AL26: _OVI[9]=61410
N202740 SETAL(_OVI[9])
N202750 RET
N202760 _AL27: _ALARM=61016
N202770 RET
N202780 _AL28: _OVI[9]=61404
N202790 SETAL(_OVI[9])
N202800 RET
N202810 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N202820 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N202830 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N202840 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N202850 DEF STRING[2] _COMP
N202860 DEF STRING[32] _I_TENV
N202870 DEF STRING[128] _STR_PROT
N202880 IF ($AN_NCK_VERSION<990000)
N202890   GOTOF _AL11
N202900 ENDIF
N202910 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N202920   RET
N202930 ENDIF
N202940 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N202950 _MWBILD: _I_K=_I_K MOD 100
N202960 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N202970 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N202980 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N202990 GOTOF _FINMW_1
N203000 _PA2A: _OVR[20]=_OVR[20]/_I_K
N203010 _FINMW_1: RET
N203020 _FINMW_2: _I_CH_6=1
N203030 RET
N203040 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N203050 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N203060   RET
N203070 ENDIF
N203080 IF (_OVI[6]==0) GOTOF _MT1
N203090 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N203100 _MT1: _I_MA=_MA
N203110 IF (_OVI[2]==974) OR (_OVI[2]==994)
N203120   _I_MA=(_I_MA MOD 10)
N203130   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N203140     _I_MA=2
N203150   ENDIF
N203160 ENDIF
N203170 IF (_KNUM==0)
N203180   RET
N203190 ENDIF
N203200 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N203210   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N203220   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N203230 ELSE
N203240   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N203250 ENDIF
N203260 _OVI[0]=_T_7
N203270 IF (_DFLACH)
N203280   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N203290 ELSE
N203300   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N203310 ENDIF
N203320 _SD42950=$SC_TOOL_LENGTH_TYPE
N203330 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N203340   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N203350     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N203360       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N203370     ENDIF
N203380     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N203390       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N203400       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N203410         IF (_T_4==0)
N203420           _T_4=1
N203430         ELSE
N203440           _T_4=0
N203450         ENDIF
N203460       ENDIF
N203470     ENDIF
N203480   ENDIF
N203490   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N203500     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N203510       IF ($SC_TOOL_LENGTH_CONST_T==19)
N203520         _I_PROT=1
N203530         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N203540           IF (_T_3==3)
N203550             _T_3=1 _H_T_3=3
N203560           ELSE
N203570             IF (_T_3==1)
N203580               _T_3=3 _H_T_3=1
N203590             ELSE
N203600               _T_3=2 _H_T_3=2
N203610             ENDIF
N203620           ENDIF
N203630         ENDIF
N203640         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N203650           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N203660         ENDIF
N203670         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N203680           _T_6=0 _T_3=1 _H_T_3=3
N203690         ENDIF
N203700         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N203710           IF (_T_4==0)
N203720             _T_4=1
N203730           ELSE
N203740             _T_4=0
N203750           ENDIF
N203760         ENDIF
N203770       ENDIF
N203780     ENDIF
N203790   ENDIF
N203800 ENDIF
N203810 IF (_T_2>1)
N203820   IF (_TENV=="")
N203830     GOTOF _AL21
N203840   ENDIF
N203850   _I_TENV=_TENV
N203860   IF (_DFLACH)
N203870     _TCOR=0
N203880   ENDIF
N203890   IF (_TCOR<0)
N203900     GOTOF _AL5
N203910   ENDIF
N203920   IF (_TCOR==0)
N203930     _RETW=GETTENV(_I_TENV,_TDDL)
N203940     _TOUT=_TDDL[0]
N203950     IF (_DFLACH) AND (_T_7==0)
N203960       _TOUT=_TDDL[1]
N203970     ENDIF
N203980   ENDIF
N203990 ELSE
N204000   IF (_TCOR<=0)
N204010     GOTOF _AL5
N204020   ENDIF
N204030   IF (_T_7==0)
N204040     GOTOF _AL8
N204050   ENDIF
N204060   _I_TENV=""
N204070 ENDIF
N204080 IF (_T_3==0)
N204090   IF (_T_6<2)
N204100     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N204110     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N204120     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N204130       IF (NOT(_I_PROT))
N204140         _H_T_3=_I_MA
N204150         IF (_I_MA==1)
N204160           _H_T_3=2
N204170         ELSE
N204180           IF (_I_MA==2)
N204190             _H_T_3=1
N204200           ENDIF
N204210         ENDIF
N204220       ELSE
N204230         IF (_I_MA==3)
N204240           _H_T_3=2 _GEOAX=1
N204250         ENDIF
N204260       ENDIF
N204270       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N204280     ENDIF
N204290   ELSE
N204300     IF (_T_6==2)
N204310       _CORCOMP=6
N204320       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N204330     ENDIF
N204340     _H_T_3=_I_MA
N204350   ENDIF
N204360 ELSE
N204370   IF (_T_3==4)
N204380     _CORCOMP=6
N204390     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N204400   ELSE
N204410     IF (_T_2<2)
N204420       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N204430         IF (_H_T_3<>1)
N204440           IF (_H_T_3==2)
N204450             _H_T_3=1
N204460           ELSE
N204470             _H_T_3=0
N204480           ENDIF
N204490         ELSE
N204500           _H_T_3=2
N204510         ENDIF
N204520         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N204530         IF (_HI_GG<0)
N204540           IF (_H_T_3==0)
N204550             _H_T_3=1
N204560           ELSE
N204570             IF (_H_T_3==1)
N204580               _H_T_3=0
N204590             ENDIF
N204600           ENDIF
N204610         ENDIF
N204620         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N204630         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N204640         _H_T_3=_T_3
N204650       ENDIF
N204660       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N204670         IF (NOT(_I_PROT))
N204680           IF (_H_T_3<>1)
N204690             IF (_H_T_3==2)
N204700               _H_T_3=0
N204710             ELSE
N204720               _H_T_3=2
N204730             ENDIF
N204740           ENDIF
N204750           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N204760           IF (_HI_GG<0)
N204770             IF (_H_T_3==0)
N204780               _H_T_3=1
N204790             ELSE
N204800               IF (_H_T_3==1)
N204810                 _H_T_3=0
N204820               ENDIF
N204830             ENDIF
N204840           ENDIF
N204850           _GEOAX=_H_T_3
N204860         ELSE
N204870           _GEOAX=_T_3-1
N204880         ENDIF
N204890         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N204900         IF (NOT(_I_PROT))
N204910           _H_T_3=_T_3
N204920         ENDIF
N204930         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N204940       ENDIF
N204950     ELSE
N204960       _GEOAX=0 _CORCOMP=_T_3+2
N204970     ENDIF
N204980   ENDIF
N204990 ENDIF
N205000 IF ((_T_2==0) OR (_T_2==2))
N205010   IF (_I_CH_6==0)
N205020     _COMP="W" _CORMODE=1 _I_PROT=9
N205030   ELSE
N205040     _COMP="GW" _CORMODE=3 _I_PROT=0
N205050   ENDIF
N205060   IF (_DFLACH)
N205070     IF (_CORCOMP==0)
N205080       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N205090       EXECSTRING(_STR_PROT)
N205100       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N205110       IF (_H_T_3==3)
N205120         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N205130       ELSE
N205140         IF (_H_T_3==2)
N205150           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N205160         ELSE
N205170           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N205180         ENDIF
N205190       ENDIF
N205200     ELSE
N205210       IF (_CORCOMP==6)
N205220         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N205230         EXECSTRING(_STR_PROT)
N205240         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N205250       ENDIF
N205260     ENDIF
N205270   ELSE
N205280     IF (_CORCOMP==0)
N205290       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N205300       EXECSTRING(_STR_PROT)
N205310       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N205320       IF (_H_T_3==3)
N205330         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N205340       ELSE
N205350         IF (_H_T_3==2)
N205360           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N205370         ELSE
N205380           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N205390         ENDIF
N205400       ENDIF
N205410     ELSE
N205420       IF (_CORCOMP==6)
N205430         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N205440         EXECSTRING(_STR_PROT)
N205450         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N205460       ENDIF
N205470     ENDIF
N205480   ENDIF
N205490 ELSE
N205500   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N205510     GOTOF _AL22
N205520   ENDIF
N205530   IF (_DLNUM<0)
N205540     GOTOF _AL22
N205550   ELSE
N205560     IF ((_DLNUM==0) AND (_T_2<2))
N205570       GOTOF _AL22
N205580     ENDIF
N205590   ENDIF
N205600   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N205610     GOTOF _AL24
N205620   ENDIF
N205630   _OVI[13]=_DLNUM
N205640   IF (_I_CH_8==1)
N205650     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N205660       GOTOF _AL25
N205670     ENDIF
N205680     _COMP="E" _CORMODE=1
N205690   ELSE
N205700     IF (_I_CH_6==0)
N205710       _COMP="S" _CORMODE=1
N205720     ELSE
N205730       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N205740         GOTOF _AL25
N205750       ENDIF
N205760       _COMP="ES" _CORMODE=3
N205770     ENDIF
N205780   ENDIF
N205790   IF (_DFLACH)
N205800     IF (_CORCOMP==0)
N205810       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N205820       EXECSTRING(_STR_PROT)
N205830       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N205840       IF (_H_T_3==3)
N205850         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N205860       ELSE
N205870         IF (_H_T_3==2)
N205880           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N205890         ELSE
N205900           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N205910         ENDIF
N205920       ENDIF
N205930     ELSE
N205940       IF (_CORCOMP==6)
N205950         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N205960         EXECSTRING(_STR_PROT)
N205970         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N205980       ENDIF
N205990     ENDIF
N206000   ELSE
N206010     IF (_CORCOMP==0)
N206020       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N206030       EXECSTRING(_STR_PROT)
N206040       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N206050       IF (_H_T_3==3)
N206060         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N206070       ELSE
N206080         IF (_H_T_3==2)
N206090           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N206100         ELSE
N206110           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N206120         ENDIF
N206130       ENDIF
N206140     ELSE
N206150       IF (_CORCOMP==6)
N206160         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N206170         EXECSTRING(_STR_PROT)
N206180         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N206190       ENDIF
N206200     ENDIF
N206210   ENDIF
N206220 ENDIF
N206230 _H_TC=$P_TC
N206240 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N206250   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N206260   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N206270   TCARR=0
N206280   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N206290     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N206300   ENDIF
N206310   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N206320     PAROTOF
N206330   ENDIF
N206340   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N206350 ENDIF
N206360 IF (_HI_GG) AND (_T_2<2)
N206370   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N206380   G[6]=_HI_GG
N206390 ENDIF
N206400 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N206410   IF (_T_4==1)
N206420     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N206430   ENDIF
N206440   _CORVAL[0]=_H_OVR20
N206450   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N206460     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N206470   ENDIF
N206480 ELSE
N206490   IF (_T_4==1)
N206500     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N206510   ENDIF
N206520   _CORVAL[0]=_H_OVR20
N206530 ENDIF
N206540 IF ((_DLNUM==0) AND (_T_2==3))
N206550   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N206560 ELSE
N206570   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N206580 ENDIF
N206590 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N206600   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N206610     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N206620   ENDIF
N206630 ENDIF
N206640 IF (_HR_GG AND (_T_2<2))
N206650   G[6]=_HR_GG
N206660 ENDIF
N206670 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N206680   $P_CYCFRAME=CTRANS()
N206690   _T_7=_T_5 MOD 1000
N206700   G[8]=_T_7
N206710   TCARR=_H_TC
N206720   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N206730     _T_7=_T_5 DIV 1000 MOD 100
N206740     G[52]=_T_7
N206750   ENDIF
N206760   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N206770     _T_7=_T_5 DIV 100000 MOD 100
N206780     G[53]=_T_7
N206790   ENDIF
N206800 ENDIF
N206810 IF (_OVI[12]<>0)
N206820   _OVI[11]=0
N206830   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N206840 ENDIF
N206850 _FIN: _OVI[11]=1
N206860 RET
N206870 _AL1: _OVI[9]=61318
N206880 SETAL(_OVI[9])
N206890 RET
N206900 _AL5: _OVI[9]=61320
N206910 SETAL(_OVI[9])
N206920 RET
N206930 _AL7: _OVI[9]=61319
N206940 SETAL(_OVI[9])
N206950 RET
N206960 _AL8: _OVI[9]=61328
N206970 SETAL(_OVI[9])
N206980 RET
N206990 _AL11: _OVI[9]=61342
N207000 SETAL(_OVI[9])
N207010 RET
N207020 _AL12: _OVI[9]=61345
N207030 SETAL(_OVI[9])
N207040 RET
N207050 _AL20: _OVI[9]=61404
N207060 SETAL(_OVI[9])
N207070 RET
N207080 _AL21: _OVI[9]=61405
N207090 SETAL(_OVI[9])
N207100 RET
N207110 _AL22: _OVI[9]=61406
N207120 SETAL(_OVI[9])
N207130 RET
N207140 _AL24: _OVI[9]=61408
N207150 SETAL(_OVI[9])
N207160 RET
N207170 _AL25: _OVI[9]=61409
N207180 SETAL(_OVI[9])
N207190 RET
N207200 _AL26: _OVI[9]=61410
N207210 SETAL(_OVI[9])
N207220 RET
N207230 _AL27: _ALARM=61016
N207240 RET
N207250 _AL28: _OVI[9]=61404
N207260 SETAL(_OVI[9])
N207270 RET
N207280 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N207290 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N207300 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N207310 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N207320 DEF STRING[2] _COMP
N207330 DEF STRING[32] _I_TENV
N207340 DEF STRING[128] _STR_PROT
N207350 IF ($AN_NCK_VERSION<990000)
N207360   GOTOF _AL11
N207370 ENDIF
N207380 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N207390   RET
N207400 ENDIF
N207410 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N207420 _MWBILD: _I_K=_I_K MOD 100
N207430 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N207440 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N207450 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N207460 GOTOF _FINMW_1
N207470 _PA2A: _OVR[20]=_OVR[20]/_I_K
N207480 _FINMW_1: RET
N207490 _FINMW_2: _I_CH_6=1
N207500 RET
N207510 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N207520 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N207530   RET
N207540 ENDIF
N207550 IF (_OVI[6]==0) GOTOF _MT1
N207560 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N207570 _MT1: _I_MA=_MA
N207580 IF (_OVI[2]==974) OR (_OVI[2]==994)
N207590   _I_MA=(_I_MA MOD 10)
N207600   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N207610     _I_MA=2
N207620   ENDIF
N207630 ENDIF
N207640 IF (_KNUM==0)
N207650   RET
N207660 ENDIF
N207670 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N207680   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N207690   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N207700 ELSE
N207710   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N207720 ENDIF
N207730 _OVI[0]=_T_7
N207740 IF (_DFLACH)
N207750   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N207760 ELSE
N207770   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N207780 ENDIF
N207790 _SD42950=$SC_TOOL_LENGTH_TYPE
N207800 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N207810   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N207820     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N207830       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N207840     ENDIF
N207850     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N207860       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N207870       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N207880         IF (_T_4==0)
N207890           _T_4=1
N207900         ELSE
N207910           _T_4=0
N207920         ENDIF
N207930       ENDIF
N207940     ENDIF
N207950   ENDIF
N207960   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N207970     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N207980       IF ($SC_TOOL_LENGTH_CONST_T==19)
N207990         _I_PROT=1
N208000         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N208010           IF (_T_3==3)
N208020             _T_3=1 _H_T_3=3
N208030           ELSE
N208040             IF (_T_3==1)
N208050               _T_3=3 _H_T_3=1
N208060             ELSE
N208070               _T_3=2 _H_T_3=2
N208080             ENDIF
N208090           ENDIF
N208100         ENDIF
N208110         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N208120           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N208130         ENDIF
N208140         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N208150           _T_6=0 _T_3=1 _H_T_3=3
N208160         ENDIF
N208170         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N208180           IF (_T_4==0)
N208190             _T_4=1
N208200           ELSE
N208210             _T_4=0
N208220           ENDIF
N208230         ENDIF
N208240       ENDIF
N208250     ENDIF
N208260   ENDIF
N208270 ENDIF
N208280 IF (_T_2>1)
N208290   IF (_TENV=="")
N208300     GOTOF _AL21
N208310   ENDIF
N208320   _I_TENV=_TENV
N208330   IF (_DFLACH)
N208340     _TCOR=0
N208350   ENDIF
N208360   IF (_TCOR<0)
N208370     GOTOF _AL5
N208380   ENDIF
N208390   IF (_TCOR==0)
N208400     _RETW=GETTENV(_I_TENV,_TDDL)
N208410     _TOUT=_TDDL[0]
N208420     IF (_DFLACH) AND (_T_7==0)
N208430       _TOUT=_TDDL[1]
N208440     ENDIF
N208450   ENDIF
N208460 ELSE
N208470   IF (_TCOR<=0)
N208480     GOTOF _AL5
N208490   ENDIF
N208500   IF (_T_7==0)
N208510     GOTOF _AL8
N208520   ENDIF
N208530   _I_TENV=""
N208540 ENDIF
N208550 IF (_T_3==0)
N208560   IF (_T_6<2)
N208570     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N208580     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N208590     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N208600       IF (NOT(_I_PROT))
N208610         _H_T_3=_I_MA
N208620         IF (_I_MA==1)
N208630           _H_T_3=2
N208640         ELSE
N208650           IF (_I_MA==2)
N208660             _H_T_3=1
N208670           ENDIF
N208680         ENDIF
N208690       ELSE
N208700         IF (_I_MA==3)
N208710           _H_T_3=2 _GEOAX=1
N208720         ENDIF
N208730       ENDIF
N208740       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N208750     ENDIF
N208760   ELSE
N208770     IF (_T_6==2)
N208780       _CORCOMP=6
N208790       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N208800     ENDIF
N208810     _H_T_3=_I_MA
N208820   ENDIF
N208830 ELSE
N208840   IF (_T_3==4)
N208850     _CORCOMP=6
N208860     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N208870   ELSE
N208880     IF (_T_2<2)
N208890       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N208900         IF (_H_T_3<>1)
N208910           IF (_H_T_3==2)
N208920             _H_T_3=1
N208930           ELSE
N208940             _H_T_3=0
N208950           ENDIF
N208960         ELSE
N208970           _H_T_3=2
N208980         ENDIF
N208990         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N209000         IF (_HI_GG<0)
N209010           IF (_H_T_3==0)
N209020             _H_T_3=1
N209030           ELSE
N209040             IF (_H_T_3==1)
N209050               _H_T_3=0
N209060             ENDIF
N209070           ENDIF
N209080         ENDIF
N209090         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N209100         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N209110         _H_T_3=_T_3
N209120       ENDIF
N209130       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N209140         IF (NOT(_I_PROT))
N209150           IF (_H_T_3<>1)
N209160             IF (_H_T_3==2)
N209170               _H_T_3=0
N209180             ELSE
N209190               _H_T_3=2
N209200             ENDIF
N209210           ENDIF
N209220           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N209230           IF (_HI_GG<0)
N209240             IF (_H_T_3==0)
N209250               _H_T_3=1
N209260             ELSE
N209270               IF (_H_T_3==1)
N209280                 _H_T_3=0
N209290               ENDIF
N209300             ENDIF
N209310           ENDIF
N209320           _GEOAX=_H_T_3
N209330         ELSE
N209340           _GEOAX=_T_3-1
N209350         ENDIF
N209360         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N209370         IF (NOT(_I_PROT))
N209380           _H_T_3=_T_3
N209390         ENDIF
N209400         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N209410       ENDIF
N209420     ELSE
N209430       _GEOAX=0 _CORCOMP=_T_3+2
N209440     ENDIF
N209450   ENDIF
N209460 ENDIF
N209470 IF ((_T_2==0) OR (_T_2==2))
N209480   IF (_I_CH_6==0)
N209490     _COMP="W" _CORMODE=1 _I_PROT=9
N209500   ELSE
N209510     _COMP="GW" _CORMODE=3 _I_PROT=0
N209520   ENDIF
N209530   IF (_DFLACH)
N209540     IF (_CORCOMP==0)
N209550       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N209560       EXECSTRING(_STR_PROT)
N209570       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N209580       IF (_H_T_3==3)
N209590         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N209600       ELSE
N209610         IF (_H_T_3==2)
N209620           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N209630         ELSE
N209640           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N209650         ENDIF
N209660       ENDIF
N209670     ELSE
N209680       IF (_CORCOMP==6)
N209690         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N209700         EXECSTRING(_STR_PROT)
N209710         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N209720       ENDIF
N209730     ENDIF
N209740   ELSE
N209750     IF (_CORCOMP==0)
N209760       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N209770       EXECSTRING(_STR_PROT)
N209780       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N209790       IF (_H_T_3==3)
N209800         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N209810       ELSE
N209820         IF (_H_T_3==2)
N209830           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N209840         ELSE
N209850           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N209860         ENDIF
N209870       ENDIF
N209880     ELSE
N209890       IF (_CORCOMP==6)
N209900         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N209910         EXECSTRING(_STR_PROT)
N209920         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N209930       ENDIF
N209940     ENDIF
N209950   ENDIF
N209960 ELSE
N209970   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N209980     GOTOF _AL22
N209990   ENDIF
N210000   IF (_DLNUM<0)
N210010     GOTOF _AL22
N210020   ELSE
N210030     IF ((_DLNUM==0) AND (_T_2<2))
N210040       GOTOF _AL22
N210050     ENDIF
N210060   ENDIF
N210070   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N210080     GOTOF _AL24
N210090   ENDIF
N210100   _OVI[13]=_DLNUM
N210110   IF (_I_CH_8==1)
N210120     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N210130       GOTOF _AL25
N210140     ENDIF
N210150     _COMP="E" _CORMODE=1
N210160   ELSE
N210170     IF (_I_CH_6==0)
N210180       _COMP="S" _CORMODE=1
N210190     ELSE
N210200       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N210210         GOTOF _AL25
N210220       ENDIF
N210230       _COMP="ES" _CORMODE=3
N210240     ENDIF
N210250   ENDIF
N210260   IF (_DFLACH)
N210270     IF (_CORCOMP==0)
N210280       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N210290       EXECSTRING(_STR_PROT)
N210300       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N210310       IF (_H_T_3==3)
N210320         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N210330       ELSE
N210340         IF (_H_T_3==2)
N210350           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N210360         ELSE
N210370           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N210380         ENDIF
N210390       ENDIF
N210400     ELSE
N210410       IF (_CORCOMP==6)
N210420         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N210430         EXECSTRING(_STR_PROT)
N210440         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N210450       ENDIF
N210460     ENDIF
N210470   ELSE
N210480     IF (_CORCOMP==0)
N210490       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N210500       EXECSTRING(_STR_PROT)
N210510       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N210520       IF (_H_T_3==3)
N210530         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N210540       ELSE
N210550         IF (_H_T_3==2)
N210560           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N210570         ELSE
N210580           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N210590         ENDIF
N210600       ENDIF
N210610     ELSE
N210620       IF (_CORCOMP==6)
N210630         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N210640         EXECSTRING(_STR_PROT)
N210650         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N210660       ENDIF
N210670     ENDIF
N210680   ENDIF
N210690 ENDIF
N210700 _H_TC=$P_TC
N210710 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N210720   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N210730   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N210740   TCARR=0
N210750   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N210760     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N210770   ENDIF
N210780   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N210790     PAROTOF
N210800   ENDIF
N210810   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N210820 ENDIF
N210830 IF (_HI_GG) AND (_T_2<2)
N210840   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N210850   G[6]=_HI_GG
N210860 ENDIF
N210870 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N210880   IF (_T_4==1)
N210890     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N210900   ENDIF
N210910   _CORVAL[0]=_H_OVR20
N210920   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N210930     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N210940   ENDIF
N210950 ELSE
N210960   IF (_T_4==1)
N210970     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N210980   ENDIF
N210990   _CORVAL[0]=_H_OVR20
N211000 ENDIF
N211010 IF ((_DLNUM==0) AND (_T_2==3))
N211020   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N211030 ELSE
N211040   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N211050 ENDIF
N211060 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N211070   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N211080     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N211090   ENDIF
N211100 ENDIF
N211110 IF (_HR_GG AND (_T_2<2))
N211120   G[6]=_HR_GG
N211130 ENDIF
N211140 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N211150   $P_CYCFRAME=CTRANS()
N211160   _T_7=_T_5 MOD 1000
N211170   G[8]=_T_7
N211180   TCARR=_H_TC
N211190   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N211200     _T_7=_T_5 DIV 1000 MOD 100
N211210     G[52]=_T_7
N211220   ENDIF
N211230   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N211240     _T_7=_T_5 DIV 100000 MOD 100
N211250     G[53]=_T_7
N211260   ENDIF
N211270 ENDIF
N211280 IF (_OVI[12]<>0)
N211290   _OVI[11]=0
N211300   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N211310 ENDIF
N211320 _FIN: _OVI[11]=1
N211330 RET
N211340 _AL1: _OVI[9]=61318
N211350 SETAL(_OVI[9])
N211360 RET
N211370 _AL5: _OVI[9]=61320
N211380 SETAL(_OVI[9])
N211390 RET
N211400 _AL7: _OVI[9]=61319
N211410 SETAL(_OVI[9])
N211420 RET
N211430 _AL8: _OVI[9]=61328
N211440 SETAL(_OVI[9])
N211450 RET
N211460 _AL11: _OVI[9]=61342
N211470 SETAL(_OVI[9])
N211480 RET
N211490 _AL12: _OVI[9]=61345
N211500 SETAL(_OVI[9])
N211510 RET
N211520 _AL20: _OVI[9]=61404
N211530 SETAL(_OVI[9])
N211540 RET
N211550 _AL21: _OVI[9]=61405
N211560 SETAL(_OVI[9])
N211570 RET
N211580 _AL22: _OVI[9]=61406
N211590 SETAL(_OVI[9])
N211600 RET
N211610 _AL24: _OVI[9]=61408
N211620 SETAL(_OVI[9])
N211630 RET
N211640 _AL25: _OVI[9]=61409
N211650 SETAL(_OVI[9])
N211660 RET
N211670 _AL26: _OVI[9]=61410
N211680 SETAL(_OVI[9])
N211690 RET
N211700 _AL27: _ALARM=61016
N211710 RET
N211720 _AL28: _OVI[9]=61404
N211730 SETAL(_OVI[9])
N211740 RET
N211750 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N211760 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N211770 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N211780 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N211790 DEF STRING[2] _COMP
N211800 DEF STRING[32] _I_TENV
N211810 DEF STRING[128] _STR_PROT
N211820 IF ($AN_NCK_VERSION<990000)
N211830   GOTOF _AL11
N211840 ENDIF
N211850 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N211860   RET
N211870 ENDIF
N211880 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N211890 _MWBILD: _I_K=_I_K MOD 100
N211900 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N211910 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N211920 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N211930 GOTOF _FINMW_1
N211940 _PA2A: _OVR[20]=_OVR[20]/_I_K
N211950 _FINMW_1: RET
N211960 _FINMW_2: _I_CH_6=1
N211970 RET
N211980 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N211990 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N212000   RET
N212010 ENDIF
N212020 IF (_OVI[6]==0) GOTOF _MT1
N212030 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N212040 _MT1: _I_MA=_MA
N212050 IF (_OVI[2]==974) OR (_OVI[2]==994)
N212060   _I_MA=(_I_MA MOD 10)
N212070   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N212080     _I_MA=2
N212090   ENDIF
N212100 ENDIF
N212110 IF (_KNUM==0)
N212120   RET
N212130 ENDIF
N212140 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N212150   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N212160   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N212170 ELSE
N212180   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N212190 ENDIF
N212200 _OVI[0]=_T_7
N212210 IF (_DFLACH)
N212220   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N212230 ELSE
N212240   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N212250 ENDIF
N212260 _SD42950=$SC_TOOL_LENGTH_TYPE
N212270 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N212280   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N212290     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N212300       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N212310     ENDIF
N212320     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N212330       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N212340       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N212350         IF (_T_4==0)
N212360           _T_4=1
N212370         ELSE
N212380           _T_4=0
N212390         ENDIF
N212400       ENDIF
N212410     ENDIF
N212420   ENDIF
N212430   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N212440     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N212450       IF ($SC_TOOL_LENGTH_CONST_T==19)
N212460         _I_PROT=1
N212470         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N212480           IF (_T_3==3)
N212490             _T_3=1 _H_T_3=3
N212500           ELSE
N212510             IF (_T_3==1)
N212520               _T_3=3 _H_T_3=1
N212530             ELSE
N212540               _T_3=2 _H_T_3=2
N212550             ENDIF
N212560           ENDIF
N212570         ENDIF
N212580         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N212590           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N212600         ENDIF
N212610         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N212620           _T_6=0 _T_3=1 _H_T_3=3
N212630         ENDIF
N212640         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N212650           IF (_T_4==0)
N212660             _T_4=1
N212670           ELSE
N212680             _T_4=0
N212690           ENDIF
N212700         ENDIF
N212710       ENDIF
N212720     ENDIF
N212730   ENDIF
N212740 ENDIF
N212750 IF (_T_2>1)
N212760   IF (_TENV=="")
N212770     GOTOF _AL21
N212780   ENDIF
N212790   _I_TENV=_TENV
N212800   IF (_DFLACH)
N212810     _TCOR=0
N212820   ENDIF
N212830   IF (_TCOR<0)
N212840     GOTOF _AL5
N212850   ENDIF
N212860   IF (_TCOR==0)
N212870     _RETW=GETTENV(_I_TENV,_TDDL)
N212880     _TOUT=_TDDL[0]
N212890     IF (_DFLACH) AND (_T_7==0)
N212900       _TOUT=_TDDL[1]
N212910     ENDIF
N212920   ENDIF
N212930 ELSE
N212940   IF (_TCOR<=0)
N212950     GOTOF _AL5
N212960   ENDIF
N212970   IF (_T_7==0)
N212980     GOTOF _AL8
N212990   ENDIF
N213000   _I_TENV=""
N213010 ENDIF
N213020 IF (_T_3==0)
N213030   IF (_T_6<2)
N213040     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N213050     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N213060     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N213070       IF (NOT(_I_PROT))
N213080         _H_T_3=_I_MA
N213090         IF (_I_MA==1)
N213100           _H_T_3=2
N213110         ELSE
N213120           IF (_I_MA==2)
N213130             _H_T_3=1
N213140           ENDIF
N213150         ENDIF
N213160       ELSE
N213170         IF (_I_MA==3)
N213180           _H_T_3=2 _GEOAX=1
N213190         ENDIF
N213200       ENDIF
N213210       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N213220     ENDIF
N213230   ELSE
N213240     IF (_T_6==2)
N213250       _CORCOMP=6
N213260       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N213270     ENDIF
N213280     _H_T_3=_I_MA
N213290   ENDIF
N213300 ELSE
N213310   IF (_T_3==4)
N213320     _CORCOMP=6
N213330     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N213340   ELSE
N213350     IF (_T_2<2)
N213360       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N213370         IF (_H_T_3<>1)
N213380           IF (_H_T_3==2)
N213390             _H_T_3=1
N213400           ELSE
N213410             _H_T_3=0
N213420           ENDIF
N213430         ELSE
N213440           _H_T_3=2
N213450         ENDIF
N213460         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N213470         IF (_HI_GG<0)
N213480           IF (_H_T_3==0)
N213490             _H_T_3=1
N213500           ELSE
N213510             IF (_H_T_3==1)
N213520               _H_T_3=0
N213530             ENDIF
N213540           ENDIF
N213550         ENDIF
N213560         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N213570         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N213580         _H_T_3=_T_3
N213590       ENDIF
N213600       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N213610         IF (NOT(_I_PROT))
N213620           IF (_H_T_3<>1)
N213630             IF (_H_T_3==2)
N213640               _H_T_3=0
N213650             ELSE
N213660               _H_T_3=2
N213670             ENDIF
N213680           ENDIF
N213690           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N213700           IF (_HI_GG<0)
N213710             IF (_H_T_3==0)
N213720               _H_T_3=1
N213730             ELSE
N213740               IF (_H_T_3==1)
N213750                 _H_T_3=0
N213760               ENDIF
N213770             ENDIF
N213780           ENDIF
N213790           _GEOAX=_H_T_3
N213800         ELSE
N213810           _GEOAX=_T_3-1
N213820         ENDIF
N213830         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N213840         IF (NOT(_I_PROT))
N213850           _H_T_3=_T_3
N213860         ENDIF
N213870         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N213880       ENDIF
N213890     ELSE
N213900       _GEOAX=0 _CORCOMP=_T_3+2
N213910     ENDIF
N213920   ENDIF
N213930 ENDIF
N213940 IF ((_T_2==0) OR (_T_2==2))
N213950   IF (_I_CH_6==0)
N213960     _COMP="W" _CORMODE=1 _I_PROT=9
N213970   ELSE
N213980     _COMP="GW" _CORMODE=3 _I_PROT=0
N213990   ENDIF
N214000   IF (_DFLACH)
N214010     IF (_CORCOMP==0)
N214020       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N214030       EXECSTRING(_STR_PROT)
N214040       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N214050       IF (_H_T_3==3)
N214060         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N214070       ELSE
N214080         IF (_H_T_3==2)
N214090           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N214100         ELSE
N214110           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N214120         ENDIF
N214130       ENDIF
N214140     ELSE
N214150       IF (_CORCOMP==6)
N214160         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N214170         EXECSTRING(_STR_PROT)
N214180         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N214190       ENDIF
N214200     ENDIF
N214210   ELSE
N214220     IF (_CORCOMP==0)
N214230       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N214240       EXECSTRING(_STR_PROT)
N214250       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N214260       IF (_H_T_3==3)
N214270         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N214280       ELSE
N214290         IF (_H_T_3==2)
N214300           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N214310         ELSE
N214320           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N214330         ENDIF
N214340       ENDIF
N214350     ELSE
N214360       IF (_CORCOMP==6)
N214370         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N214380         EXECSTRING(_STR_PROT)
N214390         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N214400       ENDIF
N214410     ENDIF
N214420   ENDIF
N214430 ELSE
N214440   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N214450     GOTOF _AL22
N214460   ENDIF
N214470   IF (_DLNUM<0)
N214480     GOTOF _AL22
N214490   ELSE
N214500     IF ((_DLNUM==0) AND (_T_2<2))
N214510       GOTOF _AL22
N214520     ENDIF
N214530   ENDIF
N214540   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N214550     GOTOF _AL24
N214560   ENDIF
N214570   _OVI[13]=_DLNUM
N214580   IF (_I_CH_8==1)
N214590     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N214600       GOTOF _AL25
N214610     ENDIF
N214620     _COMP="E" _CORMODE=1
N214630   ELSE
N214640     IF (_I_CH_6==0)
N214650       _COMP="S" _CORMODE=1
N214660     ELSE
N214670       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N214680         GOTOF _AL25
N214690       ENDIF
N214700       _COMP="ES" _CORMODE=3
N214710     ENDIF
N214720   ENDIF
N214730   IF (_DFLACH)
N214740     IF (_CORCOMP==0)
N214750       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N214760       EXECSTRING(_STR_PROT)
N214770       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N214780       IF (_H_T_3==3)
N214790         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N214800       ELSE
N214810         IF (_H_T_3==2)
N214820           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N214830         ELSE
N214840           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N214850         ENDIF
N214860       ENDIF
N214870     ELSE
N214880       IF (_CORCOMP==6)
N214890         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N214900         EXECSTRING(_STR_PROT)
N214910         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N214920       ENDIF
N214930     ENDIF
N214940   ELSE
N214950     IF (_CORCOMP==0)
N214960       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N214970       EXECSTRING(_STR_PROT)
N214980       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N214990       IF (_H_T_3==3)
N215000         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N215010       ELSE
N215020         IF (_H_T_3==2)
N215030           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N215040         ELSE
N215050           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N215060         ENDIF
N215070       ENDIF
N215080     ELSE
N215090       IF (_CORCOMP==6)
N215100         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N215110         EXECSTRING(_STR_PROT)
N215120         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N215130       ENDIF
N215140     ENDIF
N215150   ENDIF
N215160 ENDIF
N215170 _H_TC=$P_TC
N215180 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N215190   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N215200   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N215210   TCARR=0
N215220   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N215230     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N215240   ENDIF
N215250   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N215260     PAROTOF
N215270   ENDIF
N215280   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N215290 ENDIF
N215300 IF (_HI_GG) AND (_T_2<2)
N215310   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N215320   G[6]=_HI_GG
N215330 ENDIF
N215340 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N215350   IF (_T_4==1)
N215360     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N215370   ENDIF
N215380   _CORVAL[0]=_H_OVR20
N215390   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N215400     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N215410   ENDIF
N215420 ELSE
N215430   IF (_T_4==1)
N215440     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N215450   ENDIF
N215460   _CORVAL[0]=_H_OVR20
N215470 ENDIF
N215480 IF ((_DLNUM==0) AND (_T_2==3))
N215490   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N215500 ELSE
N215510   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N215520 ENDIF
N215530 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N215540   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N215550     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N215560   ENDIF
N215570 ENDIF
N215580 IF (_HR_GG AND (_T_2<2))
N215590   G[6]=_HR_GG
N215600 ENDIF
N215610 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N215620   $P_CYCFRAME=CTRANS()
N215630   _T_7=_T_5 MOD 1000
N215640   G[8]=_T_7
N215650   TCARR=_H_TC
N215660   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N215670     _T_7=_T_5 DIV 1000 MOD 100
N215680     G[52]=_T_7
N215690   ENDIF
N215700   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N215710     _T_7=_T_5 DIV 100000 MOD 100
N215720     G[53]=_T_7
N215730   ENDIF
N215740 ENDIF
N215750 IF (_OVI[12]<>0)
N215760   _OVI[11]=0
N215770   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N215780 ENDIF
N215790 _FIN: _OVI[11]=1
N215800 RET
N215810 _AL1: _OVI[9]=61318
N215820 SETAL(_OVI[9])
N215830 RET
N215840 _AL5: _OVI[9]=61320
N215850 SETAL(_OVI[9])
N215860 RET
N215870 _AL7: _OVI[9]=61319
N215880 SETAL(_OVI[9])
N215890 RET
N215900 _AL8: _OVI[9]=61328
N215910 SETAL(_OVI[9])
N215920 RET
N215930 _AL11: _OVI[9]=61342
N215940 SETAL(_OVI[9])
N215950 RET
N215960 _AL12: _OVI[9]=61345
N215970 SETAL(_OVI[9])
N215980 RET
N215990 _AL20: _OVI[9]=61404
N216000 SETAL(_OVI[9])
N216010 RET
N216020 _AL21: _OVI[9]=61405
N216030 SETAL(_OVI[9])
N216040 RET
N216050 _AL22: _OVI[9]=61406
N216060 SETAL(_OVI[9])
N216070 RET
N216080 _AL24: _OVI[9]=61408
N216090 SETAL(_OVI[9])
N216100 RET
N216110 _AL25: _OVI[9]=61409
N216120 SETAL(_OVI[9])
N216130 RET
N216140 _AL26: _OVI[9]=61410
N216150 SETAL(_OVI[9])
N216160 RET
N216170 _AL27: _ALARM=61016
N216180 RET
N216190 _AL28: _OVI[9]=61404
N216200 SETAL(_OVI[9])
N216210 RET
N216220 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N216230 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N216240 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N216250 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N216260 DEF STRING[2] _COMP
N216270 DEF STRING[32] _I_TENV
N216280 DEF STRING[128] _STR_PROT
N216290 IF ($AN_NCK_VERSION<990000)
N216300   GOTOF _AL11
N216310 ENDIF
N216320 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N216330   RET
N216340 ENDIF
N216350 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N216360 _MWBILD: _I_K=_I_K MOD 100
N216370 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N216380 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N216390 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N216400 GOTOF _FINMW_1
N216410 _PA2A: _OVR[20]=_OVR[20]/_I_K
N216420 _FINMW_1: RET
N216430 _FINMW_2: _I_CH_6=1
N216440 RET
N216450 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N216460 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N216470   RET
N216480 ENDIF
N216490 IF (_OVI[6]==0) GOTOF _MT1
N216500 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N216510 _MT1: _I_MA=_MA
N216520 IF (_OVI[2]==974) OR (_OVI[2]==994)
N216530   _I_MA=(_I_MA MOD 10)
N216540   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N216550     _I_MA=2
N216560   ENDIF
N216570 ENDIF
N216580 IF (_KNUM==0)
N216590   RET
N216600 ENDIF
N216610 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N216620   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N216630   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N216640 ELSE
N216650   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N216660 ENDIF
N216670 _OVI[0]=_T_7
N216680 IF (_DFLACH)
N216690   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N216700 ELSE
N216710   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N216720 ENDIF
N216730 _SD42950=$SC_TOOL_LENGTH_TYPE
N216740 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N216750   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N216760     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N216770       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N216780     ENDIF
N216790     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N216800       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N216810       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N216820         IF (_T_4==0)
N216830           _T_4=1
N216840         ELSE
N216850           _T_4=0
N216860         ENDIF
N216870       ENDIF
N216880     ENDIF
N216890   ENDIF
N216900   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N216910     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N216920       IF ($SC_TOOL_LENGTH_CONST_T==19)
N216930         _I_PROT=1
N216940         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N216950           IF (_T_3==3)
N216960             _T_3=1 _H_T_3=3
N216970           ELSE
N216980             IF (_T_3==1)
N216990               _T_3=3 _H_T_3=1
N217000             ELSE
N217010               _T_3=2 _H_T_3=2
N217020             ENDIF
N217030           ENDIF
N217040         ENDIF
N217050         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N217060           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N217070         ENDIF
N217080         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N217090           _T_6=0 _T_3=1 _H_T_3=3
N217100         ENDIF
N217110         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N217120           IF (_T_4==0)
N217130             _T_4=1
N217140           ELSE
N217150             _T_4=0
N217160           ENDIF
N217170         ENDIF
N217180       ENDIF
N217190     ENDIF
N217200   ENDIF
N217210 ENDIF
N217220 IF (_T_2>1)
N217230   IF (_TENV=="")
N217240     GOTOF _AL21
N217250   ENDIF
N217260   _I_TENV=_TENV
N217270   IF (_DFLACH)
N217280     _TCOR=0
N217290   ENDIF
N217300   IF (_TCOR<0)
N217310     GOTOF _AL5
N217320   ENDIF
N217330   IF (_TCOR==0)
N217340     _RETW=GETTENV(_I_TENV,_TDDL)
N217350     _TOUT=_TDDL[0]
N217360     IF (_DFLACH) AND (_T_7==0)
N217370       _TOUT=_TDDL[1]
N217380     ENDIF
N217390   ENDIF
N217400 ELSE
N217410   IF (_TCOR<=0)
N217420     GOTOF _AL5
N217430   ENDIF
N217440   IF (_T_7==0)
N217450     GOTOF _AL8
N217460   ENDIF
N217470   _I_TENV=""
N217480 ENDIF
N217490 IF (_T_3==0)
N217500   IF (_T_6<2)
N217510     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N217520     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N217530     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N217540       IF (NOT(_I_PROT))
N217550         _H_T_3=_I_MA
N217560         IF (_I_MA==1)
N217570           _H_T_3=2
N217580         ELSE
N217590           IF (_I_MA==2)
N217600             _H_T_3=1
N217610           ENDIF
N217620         ENDIF
N217630       ELSE
N217640         IF (_I_MA==3)
N217650           _H_T_3=2 _GEOAX=1
N217660         ENDIF
N217670       ENDIF
N217680       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N217690     ENDIF
N217700   ELSE
N217710     IF (_T_6==2)
N217720       _CORCOMP=6
N217730       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N217740     ENDIF
N217750     _H_T_3=_I_MA
N217760   ENDIF
N217770 ELSE
N217780   IF (_T_3==4)
N217790     _CORCOMP=6
N217800     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N217810   ELSE
N217820     IF (_T_2<2)
N217830       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N217840         IF (_H_T_3<>1)
N217850           IF (_H_T_3==2)
N217860             _H_T_3=1
N217870           ELSE
N217880             _H_T_3=0
N217890           ENDIF
N217900         ELSE
N217910           _H_T_3=2
N217920         ENDIF
N217930         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N217940         IF (_HI_GG<0)
N217950           IF (_H_T_3==0)
N217960             _H_T_3=1
N217970           ELSE
N217980             IF (_H_T_3==1)
N217990               _H_T_3=0
N218000             ENDIF
N218010           ENDIF
N218020         ENDIF
N218030         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N218040         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N218050         _H_T_3=_T_3
N218060       ENDIF
N218070       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N218080         IF (NOT(_I_PROT))
N218090           IF (_H_T_3<>1)
N218100             IF (_H_T_3==2)
N218110               _H_T_3=0
N218120             ELSE
N218130               _H_T_3=2
N218140             ENDIF
N218150           ENDIF
N218160           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N218170           IF (_HI_GG<0)
N218180             IF (_H_T_3==0)
N218190               _H_T_3=1
N218200             ELSE
N218210               IF (_H_T_3==1)
N218220                 _H_T_3=0
N218230               ENDIF
N218240             ENDIF
N218250           ENDIF
N218260           _GEOAX=_H_T_3
N218270         ELSE
N218280           _GEOAX=_T_3-1
N218290         ENDIF
N218300         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N218310         IF (NOT(_I_PROT))
N218320           _H_T_3=_T_3
N218330         ENDIF
N218340         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N218350       ENDIF
N218360     ELSE
N218370       _GEOAX=0 _CORCOMP=_T_3+2
N218380     ENDIF
N218390   ENDIF
N218400 ENDIF
N218410 IF ((_T_2==0) OR (_T_2==2))
N218420   IF (_I_CH_6==0)
N218430     _COMP="W" _CORMODE=1 _I_PROT=9
N218440   ELSE
N218450     _COMP="GW" _CORMODE=3 _I_PROT=0
N218460   ENDIF
N218470   IF (_DFLACH)
N218480     IF (_CORCOMP==0)
N218490       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N218500       EXECSTRING(_STR_PROT)
N218510       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N218520       IF (_H_T_3==3)
N218530         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N218540       ELSE
N218550         IF (_H_T_3==2)
N218560           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N218570         ELSE
N218580           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N218590         ENDIF
N218600       ENDIF
N218610     ELSE
N218620       IF (_CORCOMP==6)
N218630         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N218640         EXECSTRING(_STR_PROT)
N218650         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N218660       ENDIF
N218670     ENDIF
N218680   ELSE
N218690     IF (_CORCOMP==0)
N218700       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N218710       EXECSTRING(_STR_PROT)
N218720       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N218730       IF (_H_T_3==3)
N218740         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N218750       ELSE
N218760         IF (_H_T_3==2)
N218770           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N218780         ELSE
N218790           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N218800         ENDIF
N218810       ENDIF
N218820     ELSE
N218830       IF (_CORCOMP==6)
N218840         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N218850         EXECSTRING(_STR_PROT)
N218860         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N218870       ENDIF
N218880     ENDIF
N218890   ENDIF
N218900 ELSE
N218910   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N218920     GOTOF _AL22
N218930   ENDIF
N218940   IF (_DLNUM<0)
N218950     GOTOF _AL22
N218960   ELSE
N218970     IF ((_DLNUM==0) AND (_T_2<2))
N218980       GOTOF _AL22
N218990     ENDIF
N219000   ENDIF
N219010   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N219020     GOTOF _AL24
N219030   ENDIF
N219040   _OVI[13]=_DLNUM
N219050   IF (_I_CH_8==1)
N219060     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N219070       GOTOF _AL25
N219080     ENDIF
N219090     _COMP="E" _CORMODE=1
N219100   ELSE
N219110     IF (_I_CH_6==0)
N219120       _COMP="S" _CORMODE=1
N219130     ELSE
N219140       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N219150         GOTOF _AL25
N219160       ENDIF
N219170       _COMP="ES" _CORMODE=3
N219180     ENDIF
N219190   ENDIF
N219200   IF (_DFLACH)
N219210     IF (_CORCOMP==0)
N219220       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N219230       EXECSTRING(_STR_PROT)
N219240       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N219250       IF (_H_T_3==3)
N219260         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N219270       ELSE
N219280         IF (_H_T_3==2)
N219290           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N219300         ELSE
N219310           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N219320         ENDIF
N219330       ENDIF
N219340     ELSE
N219350       IF (_CORCOMP==6)
N219360         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N219370         EXECSTRING(_STR_PROT)
N219380         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N219390       ENDIF
N219400     ENDIF
N219410   ELSE
N219420     IF (_CORCOMP==0)
N219430       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N219440       EXECSTRING(_STR_PROT)
N219450       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N219460       IF (_H_T_3==3)
N219470         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N219480       ELSE
N219490         IF (_H_T_3==2)
N219500           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N219510         ELSE
N219520           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N219530         ENDIF
N219540       ENDIF
N219550     ELSE
N219560       IF (_CORCOMP==6)
N219570         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N219580         EXECSTRING(_STR_PROT)
N219590         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N219600       ENDIF
N219610     ENDIF
N219620   ENDIF
N219630 ENDIF
N219640 _H_TC=$P_TC
N219650 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N219660   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N219670   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N219680   TCARR=0
N219690   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N219700     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N219710   ENDIF
N219720   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N219730     PAROTOF
N219740   ENDIF
N219750   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N219760 ENDIF
N219770 IF (_HI_GG) AND (_T_2<2)
N219780   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N219790   G[6]=_HI_GG
N219800 ENDIF
N219810 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N219820   IF (_T_4==1)
N219830     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N219840   ENDIF
N219850   _CORVAL[0]=_H_OVR20
N219860   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N219870     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N219880   ENDIF
N219890 ELSE
N219900   IF (_T_4==1)
N219910     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N219920   ENDIF
N219930   _CORVAL[0]=_H_OVR20
N219940 ENDIF
N219950 IF ((_DLNUM==0) AND (_T_2==3))
N219960   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N219970 ELSE
N219980   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N219990 ENDIF
N220000 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N220010   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N220020     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N220030   ENDIF
N220040 ENDIF
N220050 IF (_HR_GG AND (_T_2<2))
N220060   G[6]=_HR_GG
N220070 ENDIF
N220080 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N220090   $P_CYCFRAME=CTRANS()
N220100   _T_7=_T_5 MOD 1000
N220110   G[8]=_T_7
N220120   TCARR=_H_TC
N220130   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N220140     _T_7=_T_5 DIV 1000 MOD 100
N220150     G[52]=_T_7
N220160   ENDIF
N220170   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N220180     _T_7=_T_5 DIV 100000 MOD 100
N220190     G[53]=_T_7
N220200   ENDIF
N220210 ENDIF
N220220 IF (_OVI[12]<>0)
N220230   _OVI[11]=0
N220240   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N220250 ENDIF
N220260 _FIN: _OVI[11]=1
N220270 RET
N220280 _AL1: _OVI[9]=61318
N220290 SETAL(_OVI[9])
N220300 RET
N220310 _AL5: _OVI[9]=61320
N220320 SETAL(_OVI[9])
N220330 RET
N220340 _AL7: _OVI[9]=61319
N220350 SETAL(_OVI[9])
N220360 RET
N220370 _AL8: _OVI[9]=61328
N220380 SETAL(_OVI[9])
N220390 RET
N220400 _AL11: _OVI[9]=61342
N220410 SETAL(_OVI[9])
N220420 RET
N220430 _AL12: _OVI[9]=61345
N220440 SETAL(_OVI[9])
N220450 RET
N220460 _AL20: _OVI[9]=61404
N220470 SETAL(_OVI[9])
N220480 RET
N220490 _AL21: _OVI[9]=61405
N220500 SETAL(_OVI[9])
N220510 RET
N220520 _AL22: _OVI[9]=61406
N220530 SETAL(_OVI[9])
N220540 RET
N220550 _AL24: _OVI[9]=61408
N220560 SETAL(_OVI[9])
N220570 RET
N220580 _AL25: _OVI[9]=61409
N220590 SETAL(_OVI[9])
N220600 RET
N220610 _AL26: _OVI[9]=61410
N220620 SETAL(_OVI[9])
N220630 RET
N220640 _AL27: _ALARM=61016
N220650 RET
N220660 _AL28: _OVI[9]=61404
N220670 SETAL(_OVI[9])
N220680 RET
N220690 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N220700 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N220710 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N220720 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N220730 DEF STRING[2] _COMP
N220740 DEF STRING[32] _I_TENV
N220750 DEF STRING[128] _STR_PROT
N220760 IF ($AN_NCK_VERSION<990000)
N220770   GOTOF _AL11
N220780 ENDIF
N220790 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N220800   RET
N220810 ENDIF
N220820 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N220830 _MWBILD: _I_K=_I_K MOD 100
N220840 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N220850 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N220860 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N220870 GOTOF _FINMW_1
N220880 _PA2A: _OVR[20]=_OVR[20]/_I_K
N220890 _FINMW_1: RET
N220900 _FINMW_2: _I_CH_6=1
N220910 RET
N220920 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N220930 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N220940   RET
N220950 ENDIF
N220960 IF (_OVI[6]==0) GOTOF _MT1
N220970 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N220980 _MT1: _I_MA=_MA
N220990 IF (_OVI[2]==974) OR (_OVI[2]==994)
N221000   _I_MA=(_I_MA MOD 10)
N221010   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N221020     _I_MA=2
N221030   ENDIF
N221040 ENDIF
N221050 IF (_KNUM==0)
N221060   RET
N221070 ENDIF
N221080 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N221090   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N221100   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N221110 ELSE
N221120   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N221130 ENDIF
N221140 _OVI[0]=_T_7
N221150 IF (_DFLACH)
N221160   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N221170 ELSE
N221180   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N221190 ENDIF
N221200 _SD42950=$SC_TOOL_LENGTH_TYPE
N221210 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N221220   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N221230     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N221240       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N221250     ENDIF
N221260     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N221270       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N221280       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N221290         IF (_T_4==0)
N221300           _T_4=1
N221310         ELSE
N221320           _T_4=0
N221330         ENDIF
N221340       ENDIF
N221350     ENDIF
N221360   ENDIF
N221370   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N221380     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N221390       IF ($SC_TOOL_LENGTH_CONST_T==19)
N221400         _I_PROT=1
N221410         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N221420           IF (_T_3==3)
N221430             _T_3=1 _H_T_3=3
N221440           ELSE
N221450             IF (_T_3==1)
N221460               _T_3=3 _H_T_3=1
N221470             ELSE
N221480               _T_3=2 _H_T_3=2
N221490             ENDIF
N221500           ENDIF
N221510         ENDIF
N221520         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N221530           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N221540         ENDIF
N221550         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N221560           _T_6=0 _T_3=1 _H_T_3=3
N221570         ENDIF
N221580         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N221590           IF (_T_4==0)
N221600             _T_4=1
N221610           ELSE
N221620             _T_4=0
N221630           ENDIF
N221640         ENDIF
N221650       ENDIF
N221660     ENDIF
N221670   ENDIF
N221680 ENDIF
N221690 IF (_T_2>1)
N221700   IF (_TENV=="")
N221710     GOTOF _AL21
N221720   ENDIF
N221730   _I_TENV=_TENV
N221740   IF (_DFLACH)
N221750     _TCOR=0
N221760   ENDIF
N221770   IF (_TCOR<0)
N221780     GOTOF _AL5
N221790   ENDIF
N221800   IF (_TCOR==0)
N221810     _RETW=GETTENV(_I_TENV,_TDDL)
N221820     _TOUT=_TDDL[0]
N221830     IF (_DFLACH) AND (_T_7==0)
N221840       _TOUT=_TDDL[1]
N221850     ENDIF
N221860   ENDIF
N221870 ELSE
N221880   IF (_TCOR<=0)
N221890     GOTOF _AL5
N221900   ENDIF
N221910   IF (_T_7==0)
N221920     GOTOF _AL8
N221930   ENDIF
N221940   _I_TENV=""
N221950 ENDIF
N221960 IF (_T_3==0)
N221970   IF (_T_6<2)
N221980     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N221990     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N222000     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N222010       IF (NOT(_I_PROT))
N222020         _H_T_3=_I_MA
N222030         IF (_I_MA==1)
N222040           _H_T_3=2
N222050         ELSE
N222060           IF (_I_MA==2)
N222070             _H_T_3=1
N222080           ENDIF
N222090         ENDIF
N222100       ELSE
N222110         IF (_I_MA==3)
N222120           _H_T_3=2 _GEOAX=1
N222130         ENDIF
N222140       ENDIF
N222150       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N222160     ENDIF
N222170   ELSE
N222180     IF (_T_6==2)
N222190       _CORCOMP=6
N222200       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N222210     ENDIF
N222220     _H_T_3=_I_MA
N222230   ENDIF
N222240 ELSE
N222250   IF (_T_3==4)
N222260     _CORCOMP=6
N222270     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N222280   ELSE
N222290     IF (_T_2<2)
N222300       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N222310         IF (_H_T_3<>1)
N222320           IF (_H_T_3==2)
N222330             _H_T_3=1
N222340           ELSE
N222350             _H_T_3=0
N222360           ENDIF
N222370         ELSE
N222380           _H_T_3=2
N222390         ENDIF
N222400         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N222410         IF (_HI_GG<0)
N222420           IF (_H_T_3==0)
N222430             _H_T_3=1
N222440           ELSE
N222450             IF (_H_T_3==1)
N222460               _H_T_3=0
N222470             ENDIF
N222480           ENDIF
N222490         ENDIF
N222500         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N222510         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N222520         _H_T_3=_T_3
N222530       ENDIF
N222540       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N222550         IF (NOT(_I_PROT))
N222560           IF (_H_T_3<>1)
N222570             IF (_H_T_3==2)
N222580               _H_T_3=0
N222590             ELSE
N222600               _H_T_3=2
N222610             ENDIF
N222620           ENDIF
N222630           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N222640           IF (_HI_GG<0)
N222650             IF (_H_T_3==0)
N222660               _H_T_3=1
N222670             ELSE
N222680               IF (_H_T_3==1)
N222690                 _H_T_3=0
N222700               ENDIF
N222710             ENDIF
N222720           ENDIF
N222730           _GEOAX=_H_T_3
N222740         ELSE
N222750           _GEOAX=_T_3-1
N222760         ENDIF
N222770         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N222780         IF (NOT(_I_PROT))
N222790           _H_T_3=_T_3
N222800         ENDIF
N222810         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N222820       ENDIF
N222830     ELSE
N222840       _GEOAX=0 _CORCOMP=_T_3+2
N222850     ENDIF
N222860   ENDIF
N222870 ENDIF
N222880 IF ((_T_2==0) OR (_T_2==2))
N222890   IF (_I_CH_6==0)
N222900     _COMP="W" _CORMODE=1 _I_PROT=9
N222910   ELSE
N222920     _COMP="GW" _CORMODE=3 _I_PROT=0
N222930   ENDIF
N222940   IF (_DFLACH)
N222950     IF (_CORCOMP==0)
N222960       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N222970       EXECSTRING(_STR_PROT)
N222980       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N222990       IF (_H_T_3==3)
N223000         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N223010       ELSE
N223020         IF (_H_T_3==2)
N223030           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N223040         ELSE
N223050           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N223060         ENDIF
N223070       ENDIF
N223080     ELSE
N223090       IF (_CORCOMP==6)
N223100         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N223110         EXECSTRING(_STR_PROT)
N223120         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N223130       ENDIF
N223140     ENDIF
N223150   ELSE
N223160     IF (_CORCOMP==0)
N223170       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N223180       EXECSTRING(_STR_PROT)
N223190       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N223200       IF (_H_T_3==3)
N223210         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N223220       ELSE
N223230         IF (_H_T_3==2)
N223240           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N223250         ELSE
N223260           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N223270         ENDIF
N223280       ENDIF
N223290     ELSE
N223300       IF (_CORCOMP==6)
N223310         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N223320         EXECSTRING(_STR_PROT)
N223330         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N223340       ENDIF
N223350     ENDIF
N223360   ENDIF
N223370 ELSE
N223380   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N223390     GOTOF _AL22
N223400   ENDIF
N223410   IF (_DLNUM<0)
N223420     GOTOF _AL22
N223430   ELSE
N223440     IF ((_DLNUM==0) AND (_T_2<2))
N223450       GOTOF _AL22
N223460     ENDIF
N223470   ENDIF
N223480   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N223490     GOTOF _AL24
N223500   ENDIF
N223510   _OVI[13]=_DLNUM
N223520   IF (_I_CH_8==1)
N223530     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N223540       GOTOF _AL25
N223550     ENDIF
N223560     _COMP="E" _CORMODE=1
N223570   ELSE
N223580     IF (_I_CH_6==0)
N223590       _COMP="S" _CORMODE=1
N223600     ELSE
N223610       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N223620         GOTOF _AL25
N223630       ENDIF
N223640       _COMP="ES" _CORMODE=3
N223650     ENDIF
N223660   ENDIF
N223670   IF (_DFLACH)
N223680     IF (_CORCOMP==0)
N223690       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N223700       EXECSTRING(_STR_PROT)
N223710       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N223720       IF (_H_T_3==3)
N223730         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N223740       ELSE
N223750         IF (_H_T_3==2)
N223760           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N223770         ELSE
N223780           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N223790         ENDIF
N223800       ENDIF
N223810     ELSE
N223820       IF (_CORCOMP==6)
N223830         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N223840         EXECSTRING(_STR_PROT)
N223850         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N223860       ENDIF
N223870     ENDIF
N223880   ELSE
N223890     IF (_CORCOMP==0)
N223900       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N223910       EXECSTRING(_STR_PROT)
N223920       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N223930       IF (_H_T_3==3)
N223940         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N223950       ELSE
N223960         IF (_H_T_3==2)
N223970           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N223980         ELSE
N223990           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N224000         ENDIF
N224010       ENDIF
N224020     ELSE
N224030       IF (_CORCOMP==6)
N224040         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N224050         EXECSTRING(_STR_PROT)
N224060         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N224070       ENDIF
N224080     ENDIF
N224090   ENDIF
N224100 ENDIF
N224110 _H_TC=$P_TC
N224120 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N224130   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N224140   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N224150   TCARR=0
N224160   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N224170     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N224180   ENDIF
N224190   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N224200     PAROTOF
N224210   ENDIF
N224220   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N224230 ENDIF
N224240 IF (_HI_GG) AND (_T_2<2)
N224250   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N224260   G[6]=_HI_GG
N224270 ENDIF
N224280 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N224290   IF (_T_4==1)
N224300     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N224310   ENDIF
N224320   _CORVAL[0]=_H_OVR20
N224330   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N224340     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N224350   ENDIF
N224360 ELSE
N224370   IF (_T_4==1)
N224380     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N224390   ENDIF
N224400   _CORVAL[0]=_H_OVR20
N224410 ENDIF
N224420 IF ((_DLNUM==0) AND (_T_2==3))
N224430   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N224440 ELSE
N224450   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N224460 ENDIF
N224470 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N224480   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N224490     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N224500   ENDIF
N224510 ENDIF
N224520 IF (_HR_GG AND (_T_2<2))
N224530   G[6]=_HR_GG
N224540 ENDIF
N224550 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N224560   $P_CYCFRAME=CTRANS()
N224570   _T_7=_T_5 MOD 1000
N224580   G[8]=_T_7
N224590   TCARR=_H_TC
N224600   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N224610     _T_7=_T_5 DIV 1000 MOD 100
N224620     G[52]=_T_7
N224630   ENDIF
N224640   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N224650     _T_7=_T_5 DIV 100000 MOD 100
N224660     G[53]=_T_7
N224670   ENDIF
N224680 ENDIF
N224690 IF (_OVI[12]<>0)
N224700   _OVI[11]=0
N224710   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N224720 ENDIF
N224730 _FIN: _OVI[11]=1
N224740 RET
N224750 _AL1: _OVI[9]=61318
N224760 SETAL(_OVI[9])
N224770 RET
N224780 _AL5: _OVI[9]=61320
N224790 SETAL(_OVI[9])
N224800 RET
N224810 _AL7: _OVI[9]=61319
N224820 SETAL(_OVI[9])
N224830 RET
N224840 _AL8: _OVI[9]=61328
N224850 SETAL(_OVI[9])
N224860 RET
N224870 _AL11: _OVI[9]=61342
N224880 SETAL(_OVI[9])
N224890 RET
N224900 _AL12: _OVI[9]=61345
N224910 SETAL(_OVI[9])
N224920 RET
N224930 _AL20: _OVI[9]=61404
N224940 SETAL(_OVI[9])
N224950 RET
N224960 _AL21: _OVI[9]=61405
N224970 SETAL(_OVI[9])
N224980 RET
N224990 _AL22: _OVI[9]=61406
N225000 SETAL(_OVI[9])
N225010 RET
N225020 _AL24: _OVI[9]=61408
N225030 SETAL(_OVI[9])
N225040 RET
N225050 _AL25: _OVI[9]=61409
N225060 SETAL(_OVI[9])
N225070 RET
N225080 _AL26: _OVI[9]=61410
N225090 SETAL(_OVI[9])
N225100 RET
N225110 _AL27: _ALARM=61016
N225120 RET
N225130 _AL28: _OVI[9]=61404
N225140 SETAL(_OVI[9])
N225150 RET
N225160 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N225170 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N225180 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N225190 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N225200 DEF STRING[2] _COMP
N225210 DEF STRING[32] _I_TENV
N225220 DEF STRING[128] _STR_PROT
N225230 IF ($AN_NCK_VERSION<990000)
N225240   GOTOF _AL11
N225250 ENDIF
N225260 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N225270   RET
N225280 ENDIF
N225290 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N225300 _MWBILD: _I_K=_I_K MOD 100
N225310 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N225320 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N225330 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N225340 GOTOF _FINMW_1
N225350 _PA2A: _OVR[20]=_OVR[20]/_I_K
N225360 _FINMW_1: RET
N225370 _FINMW_2: _I_CH_6=1
N225380 RET
N225390 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N225400 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N225410   RET
N225420 ENDIF
N225430 IF (_OVI[6]==0) GOTOF _MT1
N225440 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N225450 _MT1: _I_MA=_MA
N225460 IF (_OVI[2]==974) OR (_OVI[2]==994)
N225470   _I_MA=(_I_MA MOD 10)
N225480   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N225490     _I_MA=2
N225500   ENDIF
N225510 ENDIF
N225520 IF (_KNUM==0)
N225530   RET
N225540 ENDIF
N225550 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N225560   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N225570   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N225580 ELSE
N225590   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N225600 ENDIF
N225610 _OVI[0]=_T_7
N225620 IF (_DFLACH)
N225630   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N225640 ELSE
N225650   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N225660 ENDIF
N225670 _SD42950=$SC_TOOL_LENGTH_TYPE
N225680 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N225690   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N225700     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N225710       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N225720     ENDIF
N225730     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N225740       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N225750       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N225760         IF (_T_4==0)
N225770           _T_4=1
N225780         ELSE
N225790           _T_4=0
N225800         ENDIF
N225810       ENDIF
N225820     ENDIF
N225830   ENDIF
N225840   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N225850     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N225860       IF ($SC_TOOL_LENGTH_CONST_T==19)
N225870         _I_PROT=1
N225880         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N225890           IF (_T_3==3)
N225900             _T_3=1 _H_T_3=3
N225910           ELSE
N225920             IF (_T_3==1)
N225930               _T_3=3 _H_T_3=1
N225940             ELSE
N225950               _T_3=2 _H_T_3=2
N225960             ENDIF
N225970           ENDIF
N225980         ENDIF
N225990         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N226000           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N226010         ENDIF
N226020         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N226030           _T_6=0 _T_3=1 _H_T_3=3
N226040         ENDIF
N226050         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N226060           IF (_T_4==0)
N226070             _T_4=1
N226080           ELSE
N226090             _T_4=0
N226100           ENDIF
N226110         ENDIF
N226120       ENDIF
N226130     ENDIF
N226140   ENDIF
N226150 ENDIF
N226160 IF (_T_2>1)
N226170   IF (_TENV=="")
N226180     GOTOF _AL21
N226190   ENDIF
N226200   _I_TENV=_TENV
N226210   IF (_DFLACH)
N226220     _TCOR=0
N226230   ENDIF
N226240   IF (_TCOR<0)
N226250     GOTOF _AL5
N226260   ENDIF
N226270   IF (_TCOR==0)
N226280     _RETW=GETTENV(_I_TENV,_TDDL)
N226290     _TOUT=_TDDL[0]
N226300     IF (_DFLACH) AND (_T_7==0)
N226310       _TOUT=_TDDL[1]
N226320     ENDIF
N226330   ENDIF
N226340 ELSE
N226350   IF (_TCOR<=0)
N226360     GOTOF _AL5
N226370   ENDIF
N226380   IF (_T_7==0)
N226390     GOTOF _AL8
N226400   ENDIF
N226410   _I_TENV=""
N226420 ENDIF
N226430 IF (_T_3==0)
N226440   IF (_T_6<2)
N226450     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N226460     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N226470     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N226480       IF (NOT(_I_PROT))
N226490         _H_T_3=_I_MA
N226500         IF (_I_MA==1)
N226510           _H_T_3=2
N226520         ELSE
N226530           IF (_I_MA==2)
N226540             _H_T_3=1
N226550           ENDIF
N226560         ENDIF
N226570       ELSE
N226580         IF (_I_MA==3)
N226590           _H_T_3=2 _GEOAX=1
N226600         ENDIF
N226610       ENDIF
N226620       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N226630     ENDIF
N226640   ELSE
N226650     IF (_T_6==2)
N226660       _CORCOMP=6
N226670       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N226680     ENDIF
N226690     _H_T_3=_I_MA
N226700   ENDIF
N226710 ELSE
N226720   IF (_T_3==4)
N226730     _CORCOMP=6
N226740     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N226750   ELSE
N226760     IF (_T_2<2)
N226770       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N226780         IF (_H_T_3<>1)
N226790           IF (_H_T_3==2)
N226800             _H_T_3=1
N226810           ELSE
N226820             _H_T_3=0
N226830           ENDIF
N226840         ELSE
N226850           _H_T_3=2
N226860         ENDIF
N226870         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N226880         IF (_HI_GG<0)
N226890           IF (_H_T_3==0)
N226900             _H_T_3=1
N226910           ELSE
N226920             IF (_H_T_3==1)
N226930               _H_T_3=0
N226940             ENDIF
N226950           ENDIF
N226960         ENDIF
N226970         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N226980         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N226990         _H_T_3=_T_3
N227000       ENDIF
N227010       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N227020         IF (NOT(_I_PROT))
N227030           IF (_H_T_3<>1)
N227040             IF (_H_T_3==2)
N227050               _H_T_3=0
N227060             ELSE
N227070               _H_T_3=2
N227080             ENDIF
N227090           ENDIF
N227100           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N227110           IF (_HI_GG<0)
N227120             IF (_H_T_3==0)
N227130               _H_T_3=1
N227140             ELSE
N227150               IF (_H_T_3==1)
N227160                 _H_T_3=0
N227170               ENDIF
N227180             ENDIF
N227190           ENDIF
N227200           _GEOAX=_H_T_3
N227210         ELSE
N227220           _GEOAX=_T_3-1
N227230         ENDIF
N227240         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N227250         IF (NOT(_I_PROT))
N227260           _H_T_3=_T_3
N227270         ENDIF
N227280         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N227290       ENDIF
N227300     ELSE
N227310       _GEOAX=0 _CORCOMP=_T_3+2
N227320     ENDIF
N227330   ENDIF
N227340 ENDIF
N227350 IF ((_T_2==0) OR (_T_2==2))
N227360   IF (_I_CH_6==0)
N227370     _COMP="W" _CORMODE=1 _I_PROT=9
N227380   ELSE
N227390     _COMP="GW" _CORMODE=3 _I_PROT=0
N227400   ENDIF
N227410   IF (_DFLACH)
N227420     IF (_CORCOMP==0)
N227430       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N227440       EXECSTRING(_STR_PROT)
N227450       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N227460       IF (_H_T_3==3)
N227470         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N227480       ELSE
N227490         IF (_H_T_3==2)
N227500           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N227510         ELSE
N227520           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N227530         ENDIF
N227540       ENDIF
N227550     ELSE
N227560       IF (_CORCOMP==6)
N227570         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N227580         EXECSTRING(_STR_PROT)
N227590         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N227600       ENDIF
N227610     ENDIF
N227620   ELSE
N227630     IF (_CORCOMP==0)
N227640       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N227650       EXECSTRING(_STR_PROT)
N227660       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N227670       IF (_H_T_3==3)
N227680         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N227690       ELSE
N227700         IF (_H_T_3==2)
N227710           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N227720         ELSE
N227730           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N227740         ENDIF
N227750       ENDIF
N227760     ELSE
N227770       IF (_CORCOMP==6)
N227780         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N227790         EXECSTRING(_STR_PROT)
N227800         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N227810       ENDIF
N227820     ENDIF
N227830   ENDIF
N227840 ELSE
N227850   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N227860     GOTOF _AL22
N227870   ENDIF
N227880   IF (_DLNUM<0)
N227890     GOTOF _AL22
N227900   ELSE
N227910     IF ((_DLNUM==0) AND (_T_2<2))
N227920       GOTOF _AL22
N227930     ENDIF
N227940   ENDIF
N227950   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N227960     GOTOF _AL24
N227970   ENDIF
N227980   _OVI[13]=_DLNUM
N227990   IF (_I_CH_8==1)
N228000     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N228010       GOTOF _AL25
N228020     ENDIF
N228030     _COMP="E" _CORMODE=1
N228040   ELSE
N228050     IF (_I_CH_6==0)
N228060       _COMP="S" _CORMODE=1
N228070     ELSE
N228080       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N228090         GOTOF _AL25
N228100       ENDIF
N228110       _COMP="ES" _CORMODE=3
N228120     ENDIF
N228130   ENDIF
N228140   IF (_DFLACH)
N228150     IF (_CORCOMP==0)
N228160       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N228170       EXECSTRING(_STR_PROT)
N228180       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N228190       IF (_H_T_3==3)
N228200         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N228210       ELSE
N228220         IF (_H_T_3==2)
N228230           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N228240         ELSE
N228250           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N228260         ENDIF
N228270       ENDIF
N228280     ELSE
N228290       IF (_CORCOMP==6)
N228300         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N228310         EXECSTRING(_STR_PROT)
N228320         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N228330       ENDIF
N228340     ENDIF
N228350   ELSE
N228360     IF (_CORCOMP==0)
N228370       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N228380       EXECSTRING(_STR_PROT)
N228390       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N228400       IF (_H_T_3==3)
N228410         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N228420       ELSE
N228430         IF (_H_T_3==2)
N228440           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N228450         ELSE
N228460           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N228470         ENDIF
N228480       ENDIF
N228490     ELSE
N228500       IF (_CORCOMP==6)
N228510         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N228520         EXECSTRING(_STR_PROT)
N228530         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N228540       ENDIF
N228550     ENDIF
N228560   ENDIF
N228570 ENDIF
N228580 _H_TC=$P_TC
N228590 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N228600   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N228610   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N228620   TCARR=0
N228630   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N228640     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N228650   ENDIF
N228660   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N228670     PAROTOF
N228680   ENDIF
N228690   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N228700 ENDIF
N228710 IF (_HI_GG) AND (_T_2<2)
N228720   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N228730   G[6]=_HI_GG
N228740 ENDIF
N228750 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N228760   IF (_T_4==1)
N228770     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N228780   ENDIF
N228790   _CORVAL[0]=_H_OVR20
N228800   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N228810     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N228820   ENDIF
N228830 ELSE
N228840   IF (_T_4==1)
N228850     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N228860   ENDIF
N228870   _CORVAL[0]=_H_OVR20
N228880 ENDIF
N228890 IF ((_DLNUM==0) AND (_T_2==3))
N228900   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N228910 ELSE
N228920   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N228930 ENDIF
N228940 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N228950   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N228960     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N228970   ENDIF
N228980 ENDIF
N228990 IF (_HR_GG AND (_T_2<2))
N229000   G[6]=_HR_GG
N229010 ENDIF
N229020 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N229030   $P_CYCFRAME=CTRANS()
N229040   _T_7=_T_5 MOD 1000
N229050   G[8]=_T_7
N229060   TCARR=_H_TC
N229070   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N229080     _T_7=_T_5 DIV 1000 MOD 100
N229090     G[52]=_T_7
N229100   ENDIF
N229110   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N229120     _T_7=_T_5 DIV 100000 MOD 100
N229130     G[53]=_T_7
N229140   ENDIF
N229150 ENDIF
N229160 IF (_OVI[12]<>0)
N229170   _OVI[11]=0
N229180   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N229190 ENDIF
N229200 _FIN: _OVI[11]=1
N229210 RET
N229220 _AL1: _OVI[9]=61318
N229230 SETAL(_OVI[9])
N229240 RET
N229250 _AL5: _OVI[9]=61320
N229260 SETAL(_OVI[9])
N229270 RET
N229280 _AL7: _OVI[9]=61319
N229290 SETAL(_OVI[9])
N229300 RET
N229310 _AL8: _OVI[9]=61328
N229320 SETAL(_OVI[9])
N229330 RET
N229340 _AL11: _OVI[9]=61342
N229350 SETAL(_OVI[9])
N229360 RET
N229370 _AL12: _OVI[9]=61345
N229380 SETAL(_OVI[9])
N229390 RET
N229400 _AL20: _OVI[9]=61404
N229410 SETAL(_OVI[9])
N229420 RET
N229430 _AL21: _OVI[9]=61405
N229440 SETAL(_OVI[9])
N229450 RET
N229460 _AL22: _OVI[9]=61406
N229470 SETAL(_OVI[9])
N229480 RET
N229490 _AL24: _OVI[9]=61408
N229500 SETAL(_OVI[9])
N229510 RET
N229520 _AL25: _OVI[9]=61409
N229530 SETAL(_OVI[9])
N229540 RET
N229550 _AL26: _OVI[9]=61410
N229560 SETAL(_OVI[9])
N229570 RET
N229580 _AL27: _ALARM=61016
N229590 RET
N229600 _AL28: _OVI[9]=61404
N229610 SETAL(_OVI[9])
N229620 RET
N229630 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N229640 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N229650 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N229660 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N229670 DEF STRING[2] _COMP
N229680 DEF STRING[32] _I_TENV
N229690 DEF STRING[128] _STR_PROT
N229700 IF ($AN_NCK_VERSION<990000)
N229710   GOTOF _AL11
N229720 ENDIF
N229730 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N229740   RET
N229750 ENDIF
N229760 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N229770 _MWBILD: _I_K=_I_K MOD 100
N229780 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N229790 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N229800 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N229810 GOTOF _FINMW_1
N229820 _PA2A: _OVR[20]=_OVR[20]/_I_K
N229830 _FINMW_1: RET
N229840 _FINMW_2: _I_CH_6=1
N229850 RET
N229860 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N229870 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N229880   RET
N229890 ENDIF
N229900 IF (_OVI[6]==0) GOTOF _MT1
N229910 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N229920 _MT1: _I_MA=_MA
N229930 IF (_OVI[2]==974) OR (_OVI[2]==994)
N229940   _I_MA=(_I_MA MOD 10)
N229950   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N229960     _I_MA=2
N229970   ENDIF
N229980 ENDIF
N229990 IF (_KNUM==0)
N230000   RET
N230010 ENDIF
N230020 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N230030   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N230040   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N230050 ELSE
N230060   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N230070 ENDIF
N230080 _OVI[0]=_T_7
N230090 IF (_DFLACH)
N230100   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N230110 ELSE
N230120   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N230130 ENDIF
N230140 _SD42950=$SC_TOOL_LENGTH_TYPE
N230150 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N230160   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N230170     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N230180       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N230190     ENDIF
N230200     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N230210       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N230220       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N230230         IF (_T_4==0)
N230240           _T_4=1
N230250         ELSE
N230260           _T_4=0
N230270         ENDIF
N230280       ENDIF
N230290     ENDIF
N230300   ENDIF
N230310   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N230320     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N230330       IF ($SC_TOOL_LENGTH_CONST_T==19)
N230340         _I_PROT=1
N230350         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N230360           IF (_T_3==3)
N230370             _T_3=1 _H_T_3=3
N230380           ELSE
N230390             IF (_T_3==1)
N230400               _T_3=3 _H_T_3=1
N230410             ELSE
N230420               _T_3=2 _H_T_3=2
N230430             ENDIF
N230440           ENDIF
N230450         ENDIF
N230460         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N230470           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N230480         ENDIF
N230490         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N230500           _T_6=0 _T_3=1 _H_T_3=3
N230510         ENDIF
N230520         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N230530           IF (_T_4==0)
N230540             _T_4=1
N230550           ELSE
N230560             _T_4=0
N230570           ENDIF
N230580         ENDIF
N230590       ENDIF
N230600     ENDIF
N230610   ENDIF
N230620 ENDIF
N230630 IF (_T_2>1)
N230640   IF (_TENV=="")
N230650     GOTOF _AL21
N230660   ENDIF
N230670   _I_TENV=_TENV
N230680   IF (_DFLACH)
N230690     _TCOR=0
N230700   ENDIF
N230710   IF (_TCOR<0)
N230720     GOTOF _AL5
N230730   ENDIF
N230740   IF (_TCOR==0)
N230750     _RETW=GETTENV(_I_TENV,_TDDL)
N230760     _TOUT=_TDDL[0]
N230770     IF (_DFLACH) AND (_T_7==0)
N230780       _TOUT=_TDDL[1]
N230790     ENDIF
N230800   ENDIF
N230810 ELSE
N230820   IF (_TCOR<=0)
N230830     GOTOF _AL5
N230840   ENDIF
N230850   IF (_T_7==0)
N230860     GOTOF _AL8
N230870   ENDIF
N230880   _I_TENV=""
N230890 ENDIF
N230900 IF (_T_3==0)
N230910   IF (_T_6<2)
N230920     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N230930     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N230940     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N230950       IF (NOT(_I_PROT))
N230960         _H_T_3=_I_MA
N230970         IF (_I_MA==1)
N230980           _H_T_3=2
N230990         ELSE
N231000           IF (_I_MA==2)
N231010             _H_T_3=1
N231020           ENDIF
N231030         ENDIF
N231040       ELSE
N231050         IF (_I_MA==3)
N231060           _H_T_3=2 _GEOAX=1
N231070         ENDIF
N231080       ENDIF
N231090       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N231100     ENDIF
N231110   ELSE
N231120     IF (_T_6==2)
N231130       _CORCOMP=6
N231140       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N231150     ENDIF
N231160     _H_T_3=_I_MA
N231170   ENDIF
N231180 ELSE
N231190   IF (_T_3==4)
N231200     _CORCOMP=6
N231210     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N231220   ELSE
N231230     IF (_T_2<2)
N231240       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N231250         IF (_H_T_3<>1)
N231260           IF (_H_T_3==2)
N231270             _H_T_3=1
N231280           ELSE
N231290             _H_T_3=0
N231300           ENDIF
N231310         ELSE
N231320           _H_T_3=2
N231330         ENDIF
N231340         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N231350         IF (_HI_GG<0)
N231360           IF (_H_T_3==0)
N231370             _H_T_3=1
N231380           ELSE
N231390             IF (_H_T_3==1)
N231400               _H_T_3=0
N231410             ENDIF
N231420           ENDIF
N231430         ENDIF
N231440         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N231450         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N231460         _H_T_3=_T_3
N231470       ENDIF
N231480       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N231490         IF (NOT(_I_PROT))
N231500           IF (_H_T_3<>1)
N231510             IF (_H_T_3==2)
N231520               _H_T_3=0
N231530             ELSE
N231540               _H_T_3=2
N231550             ENDIF
N231560           ENDIF
N231570           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N231580           IF (_HI_GG<0)
N231590             IF (_H_T_3==0)
N231600               _H_T_3=1
N231610             ELSE
N231620               IF (_H_T_3==1)
N231630                 _H_T_3=0
N231640               ENDIF
N231650             ENDIF
N231660           ENDIF
N231670           _GEOAX=_H_T_3
N231680         ELSE
N231690           _GEOAX=_T_3-1
N231700         ENDIF
N231710         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N231720         IF (NOT(_I_PROT))
N231730           _H_T_3=_T_3
N231740         ENDIF
N231750         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N231760       ENDIF
N231770     ELSE
N231780       _GEOAX=0 _CORCOMP=_T_3+2
N231790     ENDIF
N231800   ENDIF
N231810 ENDIF
N231820 IF ((_T_2==0) OR (_T_2==2))
N231830   IF (_I_CH_6==0)
N231840     _COMP="W" _CORMODE=1 _I_PROT=9
N231850   ELSE
N231860     _COMP="GW" _CORMODE=3 _I_PROT=0
N231870   ENDIF
N231880   IF (_DFLACH)
N231890     IF (_CORCOMP==0)
N231900       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N231910       EXECSTRING(_STR_PROT)
N231920       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N231930       IF (_H_T_3==3)
N231940         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N231950       ELSE
N231960         IF (_H_T_3==2)
N231970           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N231980         ELSE
N231990           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N232000         ENDIF
N232010       ENDIF
N232020     ELSE
N232030       IF (_CORCOMP==6)
N232040         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N232050         EXECSTRING(_STR_PROT)
N232060         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N232070       ENDIF
N232080     ENDIF
N232090   ELSE
N232100     IF (_CORCOMP==0)
N232110       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N232120       EXECSTRING(_STR_PROT)
N232130       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N232140       IF (_H_T_3==3)
N232150         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N232160       ELSE
N232170         IF (_H_T_3==2)
N232180           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N232190         ELSE
N232200           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N232210         ENDIF
N232220       ENDIF
N232230     ELSE
N232240       IF (_CORCOMP==6)
N232250         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N232260         EXECSTRING(_STR_PROT)
N232270         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N232280       ENDIF
N232290     ENDIF
N232300   ENDIF
N232310 ELSE
N232320   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N232330     GOTOF _AL22
N232340   ENDIF
N232350   IF (_DLNUM<0)
N232360     GOTOF _AL22
N232370   ELSE
N232380     IF ((_DLNUM==0) AND (_T_2<2))
N232390       GOTOF _AL22
N232400     ENDIF
N232410   ENDIF
N232420   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N232430     GOTOF _AL24
N232440   ENDIF
N232450   _OVI[13]=_DLNUM
N232460   IF (_I_CH_8==1)
N232470     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N232480       GOTOF _AL25
N232490     ENDIF
N232500     _COMP="E" _CORMODE=1
N232510   ELSE
N232520     IF (_I_CH_6==0)
N232530       _COMP="S" _CORMODE=1
N232540     ELSE
N232550       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N232560         GOTOF _AL25
N232570       ENDIF
N232580       _COMP="ES" _CORMODE=3
N232590     ENDIF
N232600   ENDIF
N232610   IF (_DFLACH)
N232620     IF (_CORCOMP==0)
N232630       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N232640       EXECSTRING(_STR_PROT)
N232650       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N232660       IF (_H_T_3==3)
N232670         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N232680       ELSE
N232690         IF (_H_T_3==2)
N232700           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N232710         ELSE
N232720           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N232730         ENDIF
N232740       ENDIF
N232750     ELSE
N232760       IF (_CORCOMP==6)
N232770         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N232780         EXECSTRING(_STR_PROT)
N232790         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N232800       ENDIF
N232810     ENDIF
N232820   ELSE
N232830     IF (_CORCOMP==0)
N232840       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N232850       EXECSTRING(_STR_PROT)
N232860       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N232870       IF (_H_T_3==3)
N232880         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N232890       ELSE
N232900         IF (_H_T_3==2)
N232910           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N232920         ELSE
N232930           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N232940         ENDIF
N232950       ENDIF
N232960     ELSE
N232970       IF (_CORCOMP==6)
N232980         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N232990         EXECSTRING(_STR_PROT)
N233000         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N233010       ENDIF
N233020     ENDIF
N233030   ENDIF
N233040 ENDIF
N233050 _H_TC=$P_TC
N233060 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N233070   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N233080   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N233090   TCARR=0
N233100   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N233110     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N233120   ENDIF
N233130   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N233140     PAROTOF
N233150   ENDIF
N233160   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N233170 ENDIF
N233180 IF (_HI_GG) AND (_T_2<2)
N233190   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N233200   G[6]=_HI_GG
N233210 ENDIF
N233220 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N233230   IF (_T_4==1)
N233240     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N233250   ENDIF
N233260   _CORVAL[0]=_H_OVR20
N233270   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N233280     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N233290   ENDIF
N233300 ELSE
N233310   IF (_T_4==1)
N233320     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N233330   ENDIF
N233340   _CORVAL[0]=_H_OVR20
N233350 ENDIF
N233360 IF ((_DLNUM==0) AND (_T_2==3))
N233370   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N233380 ELSE
N233390   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N233400 ENDIF
N233410 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N233420   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N233430     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N233440   ENDIF
N233450 ENDIF
N233460 IF (_HR_GG AND (_T_2<2))
N233470   G[6]=_HR_GG
N233480 ENDIF
N233490 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N233500   $P_CYCFRAME=CTRANS()
N233510   _T_7=_T_5 MOD 1000
N233520   G[8]=_T_7
N233530   TCARR=_H_TC
N233540   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N233550     _T_7=_T_5 DIV 1000 MOD 100
N233560     G[52]=_T_7
N233570   ENDIF
N233580   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N233590     _T_7=_T_5 DIV 100000 MOD 100
N233600     G[53]=_T_7
N233610   ENDIF
N233620 ENDIF
N233630 IF (_OVI[12]<>0)
N233640   _OVI[11]=0
N233650   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N233660 ENDIF
N233670 _FIN: _OVI[11]=1
N233680 RET
N233690 _AL1: _OVI[9]=61318
N233700 SETAL(_OVI[9])
N233710 RET
N233720 _AL5: _OVI[9]=61320
N233730 SETAL(_OVI[9])
N233740 RET
N233750 _AL7: _OVI[9]=61319
N233760 SETAL(_OVI[9])
N233770 RET
N233780 _AL8: _OVI[9]=61328
N233790 SETAL(_OVI[9])
N233800 RET
N233810 _AL11: _OVI[9]=61342
N233820 SETAL(_OVI[9])
N233830 RET
N233840 _AL12: _OVI[9]=61345
N233850 SETAL(_OVI[9])
N233860 RET
N233870 _AL20: _OVI[9]=61404
N233880 SETAL(_OVI[9])
N233890 RET
N233900 _AL21: _OVI[9]=61405
N233910 SETAL(_OVI[9])
N233920 RET
N233930 _AL22: _OVI[9]=61406
N233940 SETAL(_OVI[9])
N233950 RET
N233960 _AL24: _OVI[9]=61408
N233970 SETAL(_OVI[9])
N233980 RET
N233990 _AL25: _OVI[9]=61409
N234000 SETAL(_OVI[9])
N234010 RET
N234020 _AL26: _OVI[9]=61410
N234030 SETAL(_OVI[9])
N234040 RET
N234050 _AL27: _ALARM=61016
N234060 RET
N234070 _AL28: _OVI[9]=61404
N234080 SETAL(_OVI[9])
N234090 RET
N234100 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N234110 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N234120 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N234130 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N234140 DEF STRING[2] _COMP
N234150 DEF STRING[32] _I_TENV
N234160 DEF STRING[128] _STR_PROT
N234170 IF ($AN_NCK_VERSION<990000)
N234180   GOTOF _AL11
N234190 ENDIF
N234200 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N234210   RET
N234220 ENDIF
N234230 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N234240 _MWBILD: _I_K=_I_K MOD 100
N234250 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N234260 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N234270 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N234280 GOTOF _FINMW_1
N234290 _PA2A: _OVR[20]=_OVR[20]/_I_K
N234300 _FINMW_1: RET
N234310 _FINMW_2: _I_CH_6=1
N234320 RET
N234330 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N234340 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N234350   RET
N234360 ENDIF
N234370 IF (_OVI[6]==0) GOTOF _MT1
N234380 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N234390 _MT1: _I_MA=_MA
N234400 IF (_OVI[2]==974) OR (_OVI[2]==994)
N234410   _I_MA=(_I_MA MOD 10)
N234420   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N234430     _I_MA=2
N234440   ENDIF
N234450 ENDIF
N234460 IF (_KNUM==0)
N234470   RET
N234480 ENDIF
N234490 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N234500   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N234510   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N234520 ELSE
N234530   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N234540 ENDIF
N234550 _OVI[0]=_T_7
N234560 IF (_DFLACH)
N234570   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N234580 ELSE
N234590   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N234600 ENDIF
N234610 _SD42950=$SC_TOOL_LENGTH_TYPE
N234620 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N234630   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N234640     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N234650       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N234660     ENDIF
N234670     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N234680       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N234690       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N234700         IF (_T_4==0)
N234710           _T_4=1
N234720         ELSE
N234730           _T_4=0
N234740         ENDIF
N234750       ENDIF
N234760     ENDIF
N234770   ENDIF
N234780   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N234790     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N234800       IF ($SC_TOOL_LENGTH_CONST_T==19)
N234810         _I_PROT=1
N234820         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N234830           IF (_T_3==3)
N234840             _T_3=1 _H_T_3=3
N234850           ELSE
N234860             IF (_T_3==1)
N234870               _T_3=3 _H_T_3=1
N234880             ELSE
N234890               _T_3=2 _H_T_3=2
N234900             ENDIF
N234910           ENDIF
N234920         ENDIF
N234930         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N234940           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N234950         ENDIF
N234960         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N234970           _T_6=0 _T_3=1 _H_T_3=3
N234980         ENDIF
N234990         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N235000           IF (_T_4==0)
N235010             _T_4=1
N235020           ELSE
N235030             _T_4=0
N235040           ENDIF
N235050         ENDIF
N235060       ENDIF
N235070     ENDIF
N235080   ENDIF
N235090 ENDIF
N235100 IF (_T_2>1)
N235110   IF (_TENV=="")
N235120     GOTOF _AL21
N235130   ENDIF
N235140   _I_TENV=_TENV
N235150   IF (_DFLACH)
N235160     _TCOR=0
N235170   ENDIF
N235180   IF (_TCOR<0)
N235190     GOTOF _AL5
N235200   ENDIF
N235210   IF (_TCOR==0)
N235220     _RETW=GETTENV(_I_TENV,_TDDL)
N235230     _TOUT=_TDDL[0]
N235240     IF (_DFLACH) AND (_T_7==0)
N235250       _TOUT=_TDDL[1]
N235260     ENDIF
N235270   ENDIF
N235280 ELSE
N235290   IF (_TCOR<=0)
N235300     GOTOF _AL5
N235310   ENDIF
N235320   IF (_T_7==0)
N235330     GOTOF _AL8
N235340   ENDIF
N235350   _I_TENV=""
N235360 ENDIF
N235370 IF (_T_3==0)
N235380   IF (_T_6<2)
N235390     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N235400     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N235410     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N235420       IF (NOT(_I_PROT))
N235430         _H_T_3=_I_MA
N235440         IF (_I_MA==1)
N235450           _H_T_3=2
N235460         ELSE
N235470           IF (_I_MA==2)
N235480             _H_T_3=1
N235490           ENDIF
N235500         ENDIF
N235510       ELSE
N235520         IF (_I_MA==3)
N235530           _H_T_3=2 _GEOAX=1
N235540         ENDIF
N235550       ENDIF
N235560       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N235570     ENDIF
N235580   ELSE
N235590     IF (_T_6==2)
N235600       _CORCOMP=6
N235610       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N235620     ENDIF
N235630     _H_T_3=_I_MA
N235640   ENDIF
N235650 ELSE
N235660   IF (_T_3==4)
N235670     _CORCOMP=6
N235680     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N235690   ELSE
N235700     IF (_T_2<2)
N235710       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N235720         IF (_H_T_3<>1)
N235730           IF (_H_T_3==2)
N235740             _H_T_3=1
N235750           ELSE
N235760             _H_T_3=0
N235770           ENDIF
N235780         ELSE
N235790           _H_T_3=2
N235800         ENDIF
N235810         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N235820         IF (_HI_GG<0)
N235830           IF (_H_T_3==0)
N235840             _H_T_3=1
N235850           ELSE
N235860             IF (_H_T_3==1)
N235870               _H_T_3=0
N235880             ENDIF
N235890           ENDIF
N235900         ENDIF
N235910         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N235920         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N235930         _H_T_3=_T_3
N235940       ENDIF
N235950       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N235960         IF (NOT(_I_PROT))
N235970           IF (_H_T_3<>1)
N235980             IF (_H_T_3==2)
N235990               _H_T_3=0
N236000             ELSE
N236010               _H_T_3=2
N236020             ENDIF
N236030           ENDIF
N236040           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N236050           IF (_HI_GG<0)
N236060             IF (_H_T_3==0)
N236070               _H_T_3=1
N236080             ELSE
N236090               IF (_H_T_3==1)
N236100                 _H_T_3=0
N236110               ENDIF
N236120             ENDIF
N236130           ENDIF
N236140           _GEOAX=_H_T_3
N236150         ELSE
N236160           _GEOAX=_T_3-1
N236170         ENDIF
N236180         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N236190         IF (NOT(_I_PROT))
N236200           _H_T_3=_T_3
N236210         ENDIF
N236220         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N236230       ENDIF
N236240     ELSE
N236250       _GEOAX=0 _CORCOMP=_T_3+2
N236260     ENDIF
N236270   ENDIF
N236280 ENDIF
N236290 IF ((_T_2==0) OR (_T_2==2))
N236300   IF (_I_CH_6==0)
N236310     _COMP="W" _CORMODE=1 _I_PROT=9
N236320   ELSE
N236330     _COMP="GW" _CORMODE=3 _I_PROT=0
N236340   ENDIF
N236350   IF (_DFLACH)
N236360     IF (_CORCOMP==0)
N236370       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N236380       EXECSTRING(_STR_PROT)
N236390       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N236400       IF (_H_T_3==3)
N236410         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N236420       ELSE
N236430         IF (_H_T_3==2)
N236440           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N236450         ELSE
N236460           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N236470         ENDIF
N236480       ENDIF
N236490     ELSE
N236500       IF (_CORCOMP==6)
N236510         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N236520         EXECSTRING(_STR_PROT)
N236530         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N236540       ENDIF
N236550     ENDIF
N236560   ELSE
N236570     IF (_CORCOMP==0)
N236580       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N236590       EXECSTRING(_STR_PROT)
N236600       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N236610       IF (_H_T_3==3)
N236620         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N236630       ELSE
N236640         IF (_H_T_3==2)
N236650           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N236660         ELSE
N236670           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N236680         ENDIF
N236690       ENDIF
N236700     ELSE
N236710       IF (_CORCOMP==6)
N236720         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N236730         EXECSTRING(_STR_PROT)
N236740         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N236750       ENDIF
N236760     ENDIF
N236770   ENDIF
N236780 ELSE
N236790   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N236800     GOTOF _AL22
N236810   ENDIF
N236820   IF (_DLNUM<0)
N236830     GOTOF _AL22
N236840   ELSE
N236850     IF ((_DLNUM==0) AND (_T_2<2))
N236860       GOTOF _AL22
N236870     ENDIF
N236880   ENDIF
N236890   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N236900     GOTOF _AL24
N236910   ENDIF
N236920   _OVI[13]=_DLNUM
N236930   IF (_I_CH_8==1)
N236940     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N236950       GOTOF _AL25
N236960     ENDIF
N236970     _COMP="E" _CORMODE=1
N236980   ELSE
N236990     IF (_I_CH_6==0)
N237000       _COMP="S" _CORMODE=1
N237010     ELSE
N237020       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N237030         GOTOF _AL25
N237040       ENDIF
N237050       _COMP="ES" _CORMODE=3
N237060     ENDIF
N237070   ENDIF
N237080   IF (_DFLACH)
N237090     IF (_CORCOMP==0)
N237100       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N237110       EXECSTRING(_STR_PROT)
N237120       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N237130       IF (_H_T_3==3)
N237140         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N237150       ELSE
N237160         IF (_H_T_3==2)
N237170           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N237180         ELSE
N237190           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N237200         ENDIF
N237210       ENDIF
N237220     ELSE
N237230       IF (_CORCOMP==6)
N237240         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N237250         EXECSTRING(_STR_PROT)
N237260         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N237270       ENDIF
N237280     ENDIF
N237290   ELSE
N237300     IF (_CORCOMP==0)
N237310       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N237320       EXECSTRING(_STR_PROT)
N237330       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N237340       IF (_H_T_3==3)
N237350         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N237360       ELSE
N237370         IF (_H_T_3==2)
N237380           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N237390         ELSE
N237400           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N237410         ENDIF
N237420       ENDIF
N237430     ELSE
N237440       IF (_CORCOMP==6)
N237450         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N237460         EXECSTRING(_STR_PROT)
N237470         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N237480       ENDIF
N237490     ENDIF
N237500   ENDIF
N237510 ENDIF
N237520 _H_TC=$P_TC
N237530 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N237540   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N237550   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N237560   TCARR=0
N237570   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N237580     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N237590   ENDIF
N237600   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N237610     PAROTOF
N237620   ENDIF
N237630   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N237640 ENDIF
N237650 IF (_HI_GG) AND (_T_2<2)
N237660   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N237670   G[6]=_HI_GG
N237680 ENDIF
N237690 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N237700   IF (_T_4==1)
N237710     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N237720   ENDIF
N237730   _CORVAL[0]=_H_OVR20
N237740   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N237750     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N237760   ENDIF
N237770 ELSE
N237780   IF (_T_4==1)
N237790     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N237800   ENDIF
N237810   _CORVAL[0]=_H_OVR20
N237820 ENDIF
N237830 IF ((_DLNUM==0) AND (_T_2==3))
N237840   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N237850 ELSE
N237860   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N237870 ENDIF
N237880 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N237890   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N237900     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N237910   ENDIF
N237920 ENDIF
N237930 IF (_HR_GG AND (_T_2<2))
N237940   G[6]=_HR_GG
N237950 ENDIF
N237960 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N237970   $P_CYCFRAME=CTRANS()
N237980   _T_7=_T_5 MOD 1000
N237990   G[8]=_T_7
N238000   TCARR=_H_TC
N238010   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N238020     _T_7=_T_5 DIV 1000 MOD 100
N238030     G[52]=_T_7
N238040   ENDIF
N238050   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N238060     _T_7=_T_5 DIV 100000 MOD 100
N238070     G[53]=_T_7
N238080   ENDIF
N238090 ENDIF
N238100 IF (_OVI[12]<>0)
N238110   _OVI[11]=0
N238120   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N238130 ENDIF
N238140 _FIN: _OVI[11]=1
N238150 RET
N238160 _AL1: _OVI[9]=61318
N238170 SETAL(_OVI[9])
N238180 RET
N238190 _AL5: _OVI[9]=61320
N238200 SETAL(_OVI[9])
N238210 RET
N238220 _AL7: _OVI[9]=61319
N238230 SETAL(_OVI[9])
N238240 RET
N238250 _AL8: _OVI[9]=61328
N238260 SETAL(_OVI[9])
N238270 RET
N238280 _AL11: _OVI[9]=61342
N238290 SETAL(_OVI[9])
N238300 RET
N238310 _AL12: _OVI[9]=61345
N238320 SETAL(_OVI[9])
N238330 RET
N238340 _AL20: _OVI[9]=61404
N238350 SETAL(_OVI[9])
N238360 RET
N238370 _AL21: _OVI[9]=61405
N238380 SETAL(_OVI[9])
N238390 RET
N238400 _AL22: _OVI[9]=61406
N238410 SETAL(_OVI[9])
N238420 RET
N238430 _AL24: _OVI[9]=61408
N238440 SETAL(_OVI[9])
N238450 RET
N238460 _AL25: _OVI[9]=61409
N238470 SETAL(_OVI[9])
N238480 RET
N238490 _AL26: _OVI[9]=61410
N238500 SETAL(_OVI[9])
N238510 RET
N238520 _AL27: _ALARM=61016
N238530 RET
N238540 _AL28: _OVI[9]=61404
N238550 SETAL(_OVI[9])
N238560 RET
N238570 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N238580 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N238590 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N238600 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N238610 DEF STRING[2] _COMP
N238620 DEF STRING[32] _I_TENV
N238630 DEF STRING[128] _STR_PROT
N238640 IF ($AN_NCK_VERSION<990000)
N238650   GOTOF _AL11
N238660 ENDIF
N238670 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N238680   RET
N238690 ENDIF
N238700 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N238710 _MWBILD: _I_K=_I_K MOD 100
N238720 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N238730 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N238740 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N238750 GOTOF _FINMW_1
N238760 _PA2A: _OVR[20]=_OVR[20]/_I_K
N238770 _FINMW_1: RET
N238780 _FINMW_2: _I_CH_6=1
N238790 RET
N238800 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N238810 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N238820   RET
N238830 ENDIF
N238840 IF (_OVI[6]==0) GOTOF _MT1
N238850 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N238860 _MT1: _I_MA=_MA
N238870 IF (_OVI[2]==974) OR (_OVI[2]==994)
N238880   _I_MA=(_I_MA MOD 10)
N238890   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N238900     _I_MA=2
N238910   ENDIF
N238920 ENDIF
N238930 IF (_KNUM==0)
N238940   RET
N238950 ENDIF
N238960 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N238970   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N238980   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N238990 ELSE
N239000   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N239010 ENDIF
N239020 _OVI[0]=_T_7
N239030 IF (_DFLACH)
N239040   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N239050 ELSE
N239060   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N239070 ENDIF
N239080 _SD42950=$SC_TOOL_LENGTH_TYPE
N239090 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N239100   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N239110     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N239120       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N239130     ENDIF
N239140     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N239150       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N239160       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N239170         IF (_T_4==0)
N239180           _T_4=1
N239190         ELSE
N239200           _T_4=0
N239210         ENDIF
N239220       ENDIF
N239230     ENDIF
N239240   ENDIF
N239250   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N239260     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N239270       IF ($SC_TOOL_LENGTH_CONST_T==19)
N239280         _I_PROT=1
N239290         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N239300           IF (_T_3==3)
N239310             _T_3=1 _H_T_3=3
N239320           ELSE
N239330             IF (_T_3==1)
N239340               _T_3=3 _H_T_3=1
N239350             ELSE
N239360               _T_3=2 _H_T_3=2
N239370             ENDIF
N239380           ENDIF
N239390         ENDIF
N239400         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N239410           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N239420         ENDIF
N239430         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N239440           _T_6=0 _T_3=1 _H_T_3=3
N239450         ENDIF
N239460         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N239470           IF (_T_4==0)
N239480             _T_4=1
N239490           ELSE
N239500             _T_4=0
N239510           ENDIF
N239520         ENDIF
N239530       ENDIF
N239540     ENDIF
N239550   ENDIF
N239560 ENDIF
N239570 IF (_T_2>1)
N239580   IF (_TENV=="")
N239590     GOTOF _AL21
N239600   ENDIF
N239610   _I_TENV=_TENV
N239620   IF (_DFLACH)
N239630     _TCOR=0
N239640   ENDIF
N239650   IF (_TCOR<0)
N239660     GOTOF _AL5
N239670   ENDIF
N239680   IF (_TCOR==0)
N239690     _RETW=GETTENV(_I_TENV,_TDDL)
N239700     _TOUT=_TDDL[0]
N239710     IF (_DFLACH) AND (_T_7==0)
N239720       _TOUT=_TDDL[1]
N239730     ENDIF
N239740   ENDIF
N239750 ELSE
N239760   IF (_TCOR<=0)
N239770     GOTOF _AL5
N239780   ENDIF
N239790   IF (_T_7==0)
N239800     GOTOF _AL8
N239810   ENDIF
N239820   _I_TENV=""
N239830 ENDIF
N239840 IF (_T_3==0)
N239850   IF (_T_6<2)
N239860     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N239870     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N239880     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N239890       IF (NOT(_I_PROT))
N239900         _H_T_3=_I_MA
N239910         IF (_I_MA==1)
N239920           _H_T_3=2
N239930         ELSE
N239940           IF (_I_MA==2)
N239950             _H_T_3=1
N239960           ENDIF
N239970         ENDIF
N239980       ELSE
N239990         IF (_I_MA==3)
N240000           _H_T_3=2 _GEOAX=1
N240010         ENDIF
N240020       ENDIF
N240030       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N240040     ENDIF
N240050   ELSE
N240060     IF (_T_6==2)
N240070       _CORCOMP=6
N240080       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N240090     ENDIF
N240100     _H_T_3=_I_MA
N240110   ENDIF
N240120 ELSE
N240130   IF (_T_3==4)
N240140     _CORCOMP=6
N240150     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N240160   ELSE
N240170     IF (_T_2<2)
N240180       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N240190         IF (_H_T_3<>1)
N240200           IF (_H_T_3==2)
N240210             _H_T_3=1
N240220           ELSE
N240230             _H_T_3=0
N240240           ENDIF
N240250         ELSE
N240260           _H_T_3=2
N240270         ENDIF
N240280         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N240290         IF (_HI_GG<0)
N240300           IF (_H_T_3==0)
N240310             _H_T_3=1
N240320           ELSE
N240330             IF (_H_T_3==1)
N240340               _H_T_3=0
N240350             ENDIF
N240360           ENDIF
N240370         ENDIF
N240380         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N240390         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N240400         _H_T_3=_T_3
N240410       ENDIF
N240420       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N240430         IF (NOT(_I_PROT))
N240440           IF (_H_T_3<>1)
N240450             IF (_H_T_3==2)
N240460               _H_T_3=0
N240470             ELSE
N240480               _H_T_3=2
N240490             ENDIF
N240500           ENDIF
N240510           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N240520           IF (_HI_GG<0)
N240530             IF (_H_T_3==0)
N240540               _H_T_3=1
N240550             ELSE
N240560               IF (_H_T_3==1)
N240570                 _H_T_3=0
N240580               ENDIF
N240590             ENDIF
N240600           ENDIF
N240610           _GEOAX=_H_T_3
N240620         ELSE
N240630           _GEOAX=_T_3-1
N240640         ENDIF
N240650         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N240660         IF (NOT(_I_PROT))
N240670           _H_T_3=_T_3
N240680         ENDIF
N240690         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N240700       ENDIF
N240710     ELSE
N240720       _GEOAX=0 _CORCOMP=_T_3+2
N240730     ENDIF
N240740   ENDIF
N240750 ENDIF
N240760 IF ((_T_2==0) OR (_T_2==2))
N240770   IF (_I_CH_6==0)
N240780     _COMP="W" _CORMODE=1 _I_PROT=9
N240790   ELSE
N240800     _COMP="GW" _CORMODE=3 _I_PROT=0
N240810   ENDIF
N240820   IF (_DFLACH)
N240830     IF (_CORCOMP==0)
N240840       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N240850       EXECSTRING(_STR_PROT)
N240860       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N240870       IF (_H_T_3==3)
N240880         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N240890       ELSE
N240900         IF (_H_T_3==2)
N240910           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N240920         ELSE
N240930           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N240940         ENDIF
N240950       ENDIF
N240960     ELSE
N240970       IF (_CORCOMP==6)
N240980         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N240990         EXECSTRING(_STR_PROT)
N241000         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N241010       ENDIF
N241020     ENDIF
N241030   ELSE
N241040     IF (_CORCOMP==0)
N241050       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N241060       EXECSTRING(_STR_PROT)
N241070       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N241080       IF (_H_T_3==3)
N241090         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N241100       ELSE
N241110         IF (_H_T_3==2)
N241120           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N241130         ELSE
N241140           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N241150         ENDIF
N241160       ENDIF
N241170     ELSE
N241180       IF (_CORCOMP==6)
N241190         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N241200         EXECSTRING(_STR_PROT)
N241210         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N241220       ENDIF
N241230     ENDIF
N241240   ENDIF
N241250 ELSE
N241260   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N241270     GOTOF _AL22
N241280   ENDIF
N241290   IF (_DLNUM<0)
N241300     GOTOF _AL22
N241310   ELSE
N241320     IF ((_DLNUM==0) AND (_T_2<2))
N241330       GOTOF _AL22
N241340     ENDIF
N241350   ENDIF
N241360   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N241370     GOTOF _AL24
N241380   ENDIF
N241390   _OVI[13]=_DLNUM
N241400   IF (_I_CH_8==1)
N241410     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N241420       GOTOF _AL25
N241430     ENDIF
N241440     _COMP="E" _CORMODE=1
N241450   ELSE
N241460     IF (_I_CH_6==0)
N241470       _COMP="S" _CORMODE=1
N241480     ELSE
N241490       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N241500         GOTOF _AL25
N241510       ENDIF
N241520       _COMP="ES" _CORMODE=3
N241530     ENDIF
N241540   ENDIF
N241550   IF (_DFLACH)
N241560     IF (_CORCOMP==0)
N241570       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N241580       EXECSTRING(_STR_PROT)
N241590       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N241600       IF (_H_T_3==3)
N241610         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N241620       ELSE
N241630         IF (_H_T_3==2)
N241640           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N241650         ELSE
N241660           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N241670         ENDIF
N241680       ENDIF
N241690     ELSE
N241700       IF (_CORCOMP==6)
N241710         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N241720         EXECSTRING(_STR_PROT)
N241730         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N241740       ENDIF
N241750     ENDIF
N241760   ELSE
N241770     IF (_CORCOMP==0)
N241780       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N241790       EXECSTRING(_STR_PROT)
N241800       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N241810       IF (_H_T_3==3)
N241820         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N241830       ELSE
N241840         IF (_H_T_3==2)
N241850           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N241860         ELSE
N241870           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N241880         ENDIF
N241890       ENDIF
N241900     ELSE
N241910       IF (_CORCOMP==6)
N241920         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N241930         EXECSTRING(_STR_PROT)
N241940         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N241950       ENDIF
N241960     ENDIF
N241970   ENDIF
N241980 ENDIF
N241990 _H_TC=$P_TC
N242000 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N242010   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N242020   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N242030   TCARR=0
N242040   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N242050     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N242060   ENDIF
N242070   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N242080     PAROTOF
N242090   ENDIF
N242100   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N242110 ENDIF
N242120 IF (_HI_GG) AND (_T_2<2)
N242130   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N242140   G[6]=_HI_GG
N242150 ENDIF
N242160 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N242170   IF (_T_4==1)
N242180     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N242190   ENDIF
N242200   _CORVAL[0]=_H_OVR20
N242210   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N242220     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N242230   ENDIF
N242240 ELSE
N242250   IF (_T_4==1)
N242260     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N242270   ENDIF
N242280   _CORVAL[0]=_H_OVR20
N242290 ENDIF
N242300 IF ((_DLNUM==0) AND (_T_2==3))
N242310   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N242320 ELSE
N242330   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N242340 ENDIF
N242350 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N242360   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N242370     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N242380   ENDIF
N242390 ENDIF
N242400 IF (_HR_GG AND (_T_2<2))
N242410   G[6]=_HR_GG
N242420 ENDIF
N242430 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N242440   $P_CYCFRAME=CTRANS()
N242450   _T_7=_T_5 MOD 1000
N242460   G[8]=_T_7
N242470   TCARR=_H_TC
N242480   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N242490     _T_7=_T_5 DIV 1000 MOD 100
N242500     G[52]=_T_7
N242510   ENDIF
N242520   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N242530     _T_7=_T_5 DIV 100000 MOD 100
N242540     G[53]=_T_7
N242550   ENDIF
N242560 ENDIF
N242570 IF (_OVI[12]<>0)
N242580   _OVI[11]=0
N242590   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N242600 ENDIF
N242610 _FIN: _OVI[11]=1
N242620 RET
N242630 _AL1: _OVI[9]=61318
N242640 SETAL(_OVI[9])
N242650 RET
N242660 _AL5: _OVI[9]=61320
N242670 SETAL(_OVI[9])
N242680 RET
N242690 _AL7: _OVI[9]=61319
N242700 SETAL(_OVI[9])
N242710 RET
N242720 _AL8: _OVI[9]=61328
N242730 SETAL(_OVI[9])
N242740 RET
N242750 _AL11: _OVI[9]=61342
N242760 SETAL(_OVI[9])
N242770 RET
N242780 _AL12: _OVI[9]=61345
N242790 SETAL(_OVI[9])
N242800 RET
N242810 _AL20: _OVI[9]=61404
N242820 SETAL(_OVI[9])
N242830 RET
N242840 _AL21: _OVI[9]=61405
N242850 SETAL(_OVI[9])
N242860 RET
N242870 _AL22: _OVI[9]=61406
N242880 SETAL(_OVI[9])
N242890 RET
N242900 _AL24: _OVI[9]=61408
N242910 SETAL(_OVI[9])
N242920 RET
N242930 _AL25: _OVI[9]=61409
N242940 SETAL(_OVI[9])
N242950 RET
N242960 _AL26: _OVI[9]=61410
N242970 SETAL(_OVI[9])
N242980 RET
N242990 _AL27: _ALARM=61016
N243000 RET
N243010 _AL28: _OVI[9]=61404
N243020 SETAL(_OVI[9])
N243030 RET
N243040 PROC CYCLE114(INT _SEL,VAR INT _ALARM,AXIS _MAV,BOOL _ADD,REAL _I_TMV,INT _I_K,BOOL _I_CH_4,VAR BOOL _I_CH_6,BOOL _I_CH_8,BOOL _I_CH_19,BOOL _I_NC_7,REAL _H_SPE52) ACTBLOCNO
N243050 DEF INT _T_2,_T_3,_H_T_3,_T_4,_T_5,_T_6,_T_7,_RETW,_TDDL[3],_I_PROT,_SD42950
N243060 DEF INT _I_MA,_DFLACH,_CORCOMP,_CORMODE,_GEOAX,_TCOR,_TOUT,_TTYP,_H_TC,_HI_GG
N243070 DEF REAL _CORVAL[3],_HR_GG,_H_OVR20,_R_PROT[3]
N243080 DEF STRING[2] _COMP
N243090 DEF STRING[32] _I_TENV
N243100 DEF STRING[128] _STR_PROT
N243110 IF ($AN_NCK_VERSION<990000)
N243120   GOTOF _AL11
N243130 ENDIF
N243140 IF ($P_SEARCH OR $P_ISTEST OR $P_DRYRUN)
N243150   RET
N243160 ENDIF
N243170 CASE(_SEL) OF 2 GOTOF _MWBILD 3 GOTOF _WZKOR DEFAULT GOTOF _AL7
N243180 _MWBILD: _I_K=_I_K MOD 100
N243190 IF (ABS(_OVR[20])>_I_TMV) GOTOF _FINMW_2
N243200 IF (_I_K==0) GOTOF _AL1 IF (_OVI[6]==0) OR (_I_CH_4==0) GOTOF _PA2A
N243210 _OVR[20]=_MV[_OVI[6]-1]-_MV[_OVI[6]-1]/_I_K+_OVR[20]/_I_K
N243220 GOTOF _FINMW_1
N243230 _PA2A: _OVR[20]=_OVR[20]/_I_K
N243240 _FINMW_1: RET
N243250 _FINMW_2: _I_CH_6=1
N243260 RET
N243270 _WZKOR: _OVI[11]=0 _H_OVR20=_OVR[20]*_H_SPE52
N243280 IF (_ALARM>0) AND (_ALARM<>61304) AND (_ALARM<>61305)
N243290   RET
N243300 ENDIF
N243310 IF (_OVI[6]==0) GOTOF _MT1
N243320 _MV[_OVI[6]-1]=0 $SCS_MEA_AVERAGE_VALUE[_OVI[6]-1]=0
N243330 _MT1: _I_MA=_MA
N243340 IF (_OVI[2]==974) OR (_OVI[2]==994)
N243350   _I_MA=(_I_MA MOD 10)
N243360   IF ($P_GG[6]==2) AND (_I_CH_19) AND (_I_MA==3)
N243370     _I_MA=2
N243380   ENDIF
N243390 ENDIF
N243400 IF (_KNUM==0)
N243410   RET
N243420 ENDIF
N243430 IF ($MN_MM_TYPE_OF_CUTTING_EDGE==1) OR ($MN_MM_MAX_CUTTING_EDGE_NO>999)
N243440   _DFLACH=$MN_MM_TYPE_OF_CUTTING_EDGE
N243450   _T_2=_KNUM _DEC9 _T_3=_KNUM _DEC8 _T_4=_KNUM _DEC7 _T_6=_KNUM _DEC6 _T_7=_KNUM MOD 100000 _H_T_3=_T_3
N243460 ELSE
N243470   _T_2=_KNUM _DEC7 _T_3=_KNUM _DEC6 _T_4=_KNUM _DEC5 _T_6=_KNUM _DEC4 _T_7=_KNUM MOD 1000 _H_T_3=_T_3
N243480 ENDIF
N243490 _OVI[0]=_T_7
N243500 IF (_DFLACH)
N243510   _TCOR=1 _TOUT=_T_7 _TTYP=$TC_DP1[_T_7]
N243520 ELSE
N243530   _TCOR=_OVI[8] _TOUT=_TCOR _TTYP=$TC_DP1[_TCOR,_T_7]
N243540 ENDIF
N243550 _SD42950=$SC_TOOL_LENGTH_TYPE
N243560 IF (($MCS_TECHNOLOGY==2) AND ($MCS_TECHNOLOGY_EXTENSION==1))
N243570   IF ((_SD42950==2) AND ($SC_TOOL_LENGTH_CONST==-1018))
N243580     IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N243590       IF ((_TTYP _DEC3)==5) GOTOF _AL28
N243600     ENDIF
N243610     IF ((_T_2==0) AND (_T_6==2) AND ((_OVI[2]==977) OR (_OVI[2]==979)))
N243620       _T_6=0 _T_3=2 _H_T_3=_T_3+1
N243630       IF ((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3)
N243640         IF (_T_4==0)
N243650           _T_4=1
N243660         ELSE
N243670           _T_4=0
N243680         ENDIF
N243690       ENDIF
N243700     ENDIF
N243710   ENDIF
N243720   IF ((_SD42950==3) AND (_TTYP>=400) AND (_TTYP<=599))
N243730     IF (ISVAR("$SC_TOOL_LENGTH_CONST_T"))
N243740       IF ($SC_TOOL_LENGTH_CONST_T==19)
N243750         _I_PROT=1
N243760         IF ((_T_2==0) AND (_T_3>0) AND (_T_3<>4))
N243770           IF (_T_3==3)
N243780             _T_3=1 _H_T_3=3
N243790           ELSE
N243800             IF (_T_3==1)
N243810               _T_3=3 _H_T_3=1
N243820             ELSE
N243830               _T_3=2 _H_T_3=2
N243840             ENDIF
N243850           ENDIF
N243860         ENDIF
N243870         IF ((_T_2==0) AND (_T_3==0) AND (_T_6==2) AND (_OVI[2]==978))
N243880           IF ((_TTYP _DEC3)==5) GOTOF _AL28
N243890         ENDIF
N243900         IF ((((_OVI[2]==977) OR (_OVI[2]==979))) AND ((_T_2==0) AND (_T_6==2)))
N243910           _T_6=0 _T_3=1 _H_T_3=3
N243920         ENDIF
N243930         IF (((_MVAR _DEC1)==1) OR ((_MVAR _DEC1)==3))
N243940           IF (_T_4==0)
N243950             _T_4=1
N243960           ELSE
N243970             _T_4=0
N243980           ENDIF
N243990         ENDIF
N244000       ENDIF
N244010     ENDIF
N244020   ENDIF
N244030 ENDIF
N244040 IF (_T_2>1)
N244050   IF (_TENV=="")
N244060     GOTOF _AL21
N244070   ENDIF
N244080   _I_TENV=_TENV
N244090   IF (_DFLACH)
N244100     _TCOR=0
N244110   ENDIF
N244120   IF (_TCOR<0)
N244130     GOTOF _AL5
N244140   ENDIF
N244150   IF (_TCOR==0)
N244160     _RETW=GETTENV(_I_TENV,_TDDL)
N244170     _TOUT=_TDDL[0]
N244180     IF (_DFLACH) AND (_T_7==0)
N244190       _TOUT=_TDDL[1]
N244200     ENDIF
N244210   ENDIF
N244220 ELSE
N244230   IF (_TCOR<=0)
N244240     GOTOF _AL5
N244250   ENDIF
N244260   IF (_T_7==0)
N244270     GOTOF _AL8
N244280   ENDIF
N244290   _I_TENV=""
N244300 ENDIF
N244310 IF (_T_3==0)
N244320   IF (_T_6<2)
N244330     _CORCOMP=0 _GEOAX=_I_MA-1 _H_T_3=(3-_GEOAX)
N244340     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N244350     IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N244360       IF (NOT(_I_PROT))
N244370         _H_T_3=_I_MA
N244380         IF (_I_MA==1)
N244390           _H_T_3=2
N244400         ELSE
N244410           IF (_I_MA==2)
N244420             _H_T_3=1
N244430           ENDIF
N244440         ENDIF
N244450       ELSE
N244460         IF (_I_MA==3)
N244470           _H_T_3=2 _GEOAX=1
N244480         ENDIF
N244490       ENDIF
N244500       _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N244510     ENDIF
N244520   ELSE
N244530     IF (_T_6==2)
N244540       _CORCOMP=6
N244550       _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N244560     ENDIF
N244570     _H_T_3=_I_MA
N244580   ENDIF
N244590 ELSE
N244600   IF (_T_3==4)
N244610     _CORCOMP=6
N244620     _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,4"
N244630   ELSE
N244640     IF (_T_2<2)
N244650       IF (_SD42950==1) OR (((_SD42950==0) OR (_SD42950==3)) AND ((_TTYP<400) OR (_TTYP==710)))
N244660         IF (_H_T_3<>1)
N244670           IF (_H_T_3==2)
N244680             _H_T_3=1
N244690           ELSE
N244700             _H_T_3=0
N244710           ENDIF
N244720         ELSE
N244730           _H_T_3=2
N244740         ENDIF
N244750         _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N244760         IF (_HI_GG<0)
N244770           IF (_H_T_3==0)
N244780             _H_T_3=1
N244790           ELSE
N244800             IF (_H_T_3==1)
N244810               _H_T_3=0
N244820             ENDIF
N244830           ENDIF
N244840         ENDIF
N244850         _CORCOMP=0 _GEOAX=_H_T_3 _HI_GG=ABS(_HI_GG)
N244860         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(3-_GEOAX)
N244870         _H_T_3=_T_3
N244880       ENDIF
N244890       IF (_SD42950==2) OR (((_SD42950==0) OR (_SD42950==3)) AND (_TTYP>=400) AND (_TTYP<=599))
N244900         IF (NOT(_I_PROT))
N244910           IF (_H_T_3<>1)
N244920             IF (_H_T_3==2)
N244930               _H_T_3=0
N244940             ELSE
N244950               _H_T_3=2
N244960             ENDIF
N244970           ENDIF
N244980           _HI_GG=$SC_TOOL_LENGTH_CONST MOD 100
N244990           IF (_HI_GG<0)
N245000             IF (_H_T_3==0)
N245010               _H_T_3=1
N245020             ELSE
N245030               IF (_H_T_3==1)
N245040                 _H_T_3=0
N245050               ENDIF
N245060             ENDIF
N245070           ENDIF
N245080           _GEOAX=_H_T_3
N245090         ELSE
N245100           _GEOAX=_T_3-1
N245110         ENDIF
N245120         _CORCOMP=0 _HI_GG=ABS(_HI_GG)
N245130         IF (NOT(_I_PROT))
N245140           _H_T_3=_T_3
N245150         ENDIF
N245160         _PROTVAL[25]=SET("","","","","") _PROTVAL[29]="T,"<<($P_GG[6]+16)<<","<<(_I_K _DEC3)<<",,"<<(_H_T_3)
N245170       ENDIF
N245180     ELSE
N245190       _GEOAX=0 _CORCOMP=_T_3+2
N245200     ENDIF
N245210   ENDIF
N245220 ENDIF
N245230 IF ((_T_2==0) OR (_T_2==2))
N245240   IF (_I_CH_6==0)
N245250     _COMP="W" _CORMODE=1 _I_PROT=9
N245260   ELSE
N245270     _COMP="GW" _CORMODE=3 _I_PROT=0
N245280   ENDIF
N245290   IF (_DFLACH)
N245300     IF (_CORCOMP==0)
N245310       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_T_7] "
N245320       EXECSTRING(_STR_PROT)
N245330       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N245340       IF (_H_T_3==3)
N245350         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[2]
N245360       ELSE
N245370         IF (_H_T_3==2)
N245380           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[1]
N245390         ELSE
N245400           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N245410         ENDIF
N245420       ENDIF
N245430     ELSE
N245440       IF (_CORCOMP==6)
N245450         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_T_7] "
N245460         EXECSTRING(_STR_PROT)
N245470         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_T_7<<"],"<<_R_PROT[0]
N245480       ENDIF
N245490     ENDIF
N245500   ELSE
N245510     IF (_CORCOMP==0)
N245520       _STR_PROT="_R_PROT[2]=$TC_DP"<<(5+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[1]=$TC_DP"<<(4+_I_PROT)<<"[_TCOR,_T_7] "<<" "<<"_R_PROT[0]=$TC_DP"<<(3+_I_PROT)<<"[_TCOR,_T_7] "
N245530       EXECSTRING(_STR_PROT)
N245540       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N245550       IF (_H_T_3==3)
N245560         _PROTVAL[24+_H_T_3]="$TC_DP"<<(5+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N245570       ELSE
N245580         IF (_H_T_3==2)
N245590           _PROTVAL[24+_H_T_3]="$TC_DP"<<(4+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N245600         ELSE
N245610           _PROTVAL[24+_H_T_3]="$TC_DP"<<(3+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N245620         ENDIF
N245630       ENDIF
N245640     ELSE
N245650       IF (_CORCOMP==6)
N245660         _STR_PROT="_R_PROT[0]=$TC_DP"<<(6+_I_PROT)<<"[_TCOR,_T_7] "
N245670         EXECSTRING(_STR_PROT)
N245680         _PROTVAL[28]="$TC_DP"<<(6+_I_PROT)<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N245690       ENDIF
N245700     ENDIF
N245710   ENDIF
N245720 ELSE
N245730   IF (_DLNUM>$MN_MM_MAX_SUMCORR_PER_CUTTEDGE)
N245740     GOTOF _AL22
N245750   ENDIF
N245760   IF (_DLNUM<0)
N245770     GOTOF _AL22
N245780   ELSE
N245790     IF ((_DLNUM==0) AND (_T_2<2))
N245800       GOTOF _AL22
N245810     ENDIF
N245820   ENDIF
N245830   IF (NOT($MN_MM_TOOL_MANAGEMENT_MASK B_AND 'B100000000'))
N245840     GOTOF _AL24
N245850   ENDIF
N245860   _OVI[13]=_DLNUM
N245870   IF (_I_CH_8==1)
N245880     IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N245890       GOTOF _AL25
N245900     ENDIF
N245910     _COMP="E" _CORMODE=1
N245920   ELSE
N245930     IF (_I_CH_6==0)
N245940       _COMP="S" _CORMODE=1
N245950     ELSE
N245960       IF (NOT($MN_MM_KIND_OF_SUMCORR B_AND 'B10000'))
N245970         GOTOF _AL25
N245980       ENDIF
N245990       _COMP="ES" _CORMODE=3
N246000     ENDIF
N246010   ENDIF
N246020   IF (_DFLACH)
N246030     IF (_CORCOMP==0)
N246040       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"] "
N246050       EXECSTRING(_STR_PROT)
N246060       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N246070       IF (_H_T_3==3)
N246080         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_T_7<<"],"<<_R_PROT[2]
N246090       ELSE
N246100         IF (_H_T_3==2)
N246110           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_T_7<<"],"<<_R_PROT[1]
N246120         ELSE
N246130           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_T_7<<"],"<<_R_PROT[0]
N246140         ENDIF
N246150       ENDIF
N246160     ELSE
N246170       IF (_CORCOMP==6)
N246180         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"] "
N246190         EXECSTRING(_STR_PROT)
N246200         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_T_7<<"],"<<_R_PROT[0]
N246210       ENDIF
N246220     ENDIF
N246230   ELSE
N246240     IF (_CORCOMP==0)
N246250       _STR_PROT="_R_PROT[2]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[1]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"] "<<" "<<"_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"] "
N246260       EXECSTRING(_STR_PROT)
N246270       _PROTVAL[25]=SET(""<<_R_PROT[0],""<<_R_PROT[1],""<<_R_PROT[2],"")
N246280       IF (_H_T_3==3)
N246290         _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"5"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[2]
N246300       ELSE
N246310         IF (_H_T_3==2)
N246320           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"4"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[1]
N246330         ELSE
N246340           _PROTVAL[24+_H_T_3]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"3"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N246350         ENDIF
N246360       ENDIF
N246370     ELSE
N246380       IF (_CORCOMP==6)
N246390         _STR_PROT="_R_PROT[0]=$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"] "
N246400         EXECSTRING(_STR_PROT)
N246410         _PROTVAL[28]="$TC_"<<SUBSTR(_COMP,0,1)<<"CP"<<_DLNUM<<"6"<<"["<<_TCOR<<","<<_T_7<<"],"<<_R_PROT[0]
N246420       ENDIF
N246430     ENDIF
N246440   ENDIF
N246450 ENDIF
N246460 _H_TC=$P_TC
N246470 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N246480   IF (NOT($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100000')) GOTOF _AL27
N246490   _T_5=$P_GG[8] _T_5=_T_5+($P_GG[52]*1000) _T_5=_T_5+($P_GG[53]*100000)
N246500   TCARR=0
N246510   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B10000')
N246520     $P_WPFRAME=(INVFRAME($P_WPFRAME): $P_WPFRAME)
N246530   ENDIF
N246540   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N246550     PAROTOF
N246560   ENDIF
N246570   $P_CYCFRAME=INVFRAME($P_ACTFRAME)
N246580 ENDIF
N246590 IF (_HI_GG) AND (_T_2<2)
N246600   _HR_GG=$P_GG[6] _HI_GG=_HI_GG-16
N246610   G[6]=_HI_GG
N246620 ENDIF
N246630 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N246640   IF (_T_4==1)
N246650     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N246660   ENDIF
N246670   _CORVAL[0]=_H_OVR20
N246680   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N246690     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,1)
N246700   ENDIF
N246710 ELSE
N246720   IF (_T_4==1)
N246730     _H_OVR20=_H_OVR20*(-1) _OVR[20]=_OVR[20]*(-1)
N246740   ENDIF
N246750   _CORVAL[0]=_H_OVR20
N246760 ENDIF
N246770 IF ((_DLNUM==0) AND (_T_2==3))
N246780   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0])
N246790 ELSE
N246800   _OVI[11]=-1 _OVI[12]=SETTCOR(_CORVAL,_COMP,_CORCOMP,_CORMODE,_GEOAX,_I_TENV,_TCOR,_OVI[0],_DLNUM)
N246810 ENDIF
N246820 IF (_T_3<4) AND (_T_6<2) AND (_T_2==0) AND (_I_CH_6==1) AND ((_OVI[2]==978) OR (_OVI[2]==974))
N246830   IF (ISFILE("/_N_CST_DIR/_N_CYCLE197_SPF"))
N246840     CYCLE197(_CORVAL,_CORMODE,_COMP,_MAV,_T_3,_T_4,2)
N246850   ENDIF
N246860 ENDIF
N246870 IF (_HR_GG AND (_T_2<2))
N246880   G[6]=_HR_GG
N246890 ENDIF
N246900 IF (_H_TC AND _I_NC_7 AND (_T_2<2))
N246910   $P_CYCFRAME=CTRANS()
N246920   _T_7=_T_5 MOD 1000
N246930   G[8]=_T_7
N246940   TCARR=_H_TC
N246950   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B100')
N246960     _T_7=_T_5 DIV 1000 MOD 100
N246970     G[52]=_T_7
N246980   ENDIF
N246990   IF ($MC_MM_SYSTEM_FRAME_MASK B_AND 'B1000')
N247000     _T_7=_T_5 DIV 100000 MOD 100
N247010     G[53]=_T_7
N247020   ENDIF
N247030 ENDIF
N247040 IF (_OVI[12]<>0)
N247050   _OVI[11]=0
N247060   CASE(_OVI[12]) OF-1 GOTOF _AL21-2 GOTOF _AL21-4 GOTOF _AL5-5 GOTOF _AL8-6 GOTOF _AL22-7 GOTOF _AL26-8 GOTOF _AL26-14 GOTOF _AL25 DEFAULT GOTOF _AL20
N247070 ENDIF
N247080 _FIN: _OVI[11]=1
N247090 RET
N247100 _AL1: _OVI[9]=61318
N247110 SETAL(_OVI[9])
N247120 RET
N247130 _AL5: _OVI[9]=61320
N247140 SETAL(_OVI[9])
N247150 RET
N247160 _AL7: _OVI[9]=61319
N247170 SETAL(_OVI[9])
N247180 RET
N247190 _AL8: _OVI[9]=61328
N247200 SETAL(_OVI[9])
N247210 RET
N247220 _AL11: _OVI[9]=61342
N247230 SETAL(_OVI[9])
N247240 RET
N247250 _AL12: _OVI[9]=61345
N247260 SETAL(_OVI[9])
N247270 RET
N247280 _AL20: _OVI[9]=61404
N247290 SETAL(_OVI[9])
N247300 RET
N247310 _AL21: _OVI[9]=61405
N247320 SETAL(_OVI[9])
N247330 RET
N247340 _AL22: _OVI[9]=61406
N247350 SETAL(_OVI[9])
N247360 RET
N247370 _AL24: _OVI[9]=61408
N247380 SETAL(_OVI[9])
N247390 RET
N247400 _AL25: _OVI[9]=61409
N247410 SETAL(_OVI[9])
N247420 RET
N247430 _AL26: _OVI[9]=61410
N247440 SETAL(_OVI[9])
N247450 RET
N247460 _AL27: _ALARM=61016
N247470 RET
N247480 _AL28: _OVI[9]=61404
N247490 SETAL(_OVI[9])
N247500 RET
